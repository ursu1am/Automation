https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template
  Cloud DayN Templates/DMVPN Spoke for Branch Router - System Default
  Cloud DayN Templates/DMVPN for Cloud Router - System Default
  Cloud DayN Templates/IPsec for Branch Router - System Default
  Cloud DayN Templates/IPsec for Cloud Router - System Default
  Hon-global-LAN-DayN-template/Hon-access-AAA
  Hon-global-LAN-DayN-template/Hon-access-DayN Template
  Hon-global-LAN-DayN-template/Hon-access-NTP
  Hon-global-LAN-DayN-template/Hon-access-QoS
  Hon-global-LAN-DayN-template/Hon-access-SNMP
  Hon-global-LAN-DayN-template/Hon-access-Segmentation
  Hon-global-LAN-DayN-template/Hon-access-Syslog
  Hon-global-LAN-DayN-template/Hon-access-ports-wireless
  Hon-global-LAN-DayN-template/Hon-core-AAA
  Hon-global-LAN-DayN-template/Hon-core-DayN Template
  Hon-global-LAN-DayN-template/Hon-core-NTP
  Hon-global-LAN-DayN-template/Hon-core-QoS
  Hon-global-LAN-DayN-template/Hon-core-SNMP
  Hon-global-LAN-DayN-template/Hon-core-Syslog
  Hon-global-LAN-DayN-template/Hon-core-ports-wireless
  Hon-global-LAN-DayN-template/Hon-core-segmentation
  Hon-global-LAN-DayN-template/Hon-global-ACL
  Hon-global-LAN-DayN-template/Hon-global-Banner
  Hon-global-LAN-DayN-template/Hon-global-Hardening-Vulnerability-remediation
  Hon-global-LAN-DayN-template/Hon-global-Local-Credentials
  Hon-global-LAN-DayN-template/Hon-global-Various-PNP-cleanup
  Hon-global-LAN-template/Access-SNMP
  Hon-global-LAN-template/BCS_REM_VUL_Config_with_ACL
  Hon-global-LAN-template/Banner
  Hon-global-LAN-template/Hon-access-DayN Template
  Hon-global-LAN-template/Hon-access-QoS
  Hon-global-LAN-template/Hon-access-Uservlan-Banner
  Hon-global-LAN-template/Hon-access-acl
  Hon-global-LAN-template/Hon-access-ports-wireless
  Hon-global-LAN-template/Hon-core-DHCP_Cleanup
  Hon-global-LAN-template/Hon-core-DayN Template
  Hon-global-LAN-template/Hon-core-QoS
  Hon-global-LAN-template/Hon-core-acl
  Hon-global-LAN-template/Local_Credentials_UnRestricted_Site_New
  Hon-global-LAN-template/Local_Credentilas_UnRestrictedSite
  Hon-global-LAN-template/Router update post discovery
  Hon-global-LAN-template/SW_Rapid7_Splunk_ACL_Log
  Hon-global-LAN-template/Switch update post discovery
  Hon-global-LAN-template/TCM-config-fix
  Hon-global-LAN-template/Test_Copy
  Onboarding Configuration/DMVPN Hub for Cloud Router- System Default
  Onboarding Configuration/Hon-access-initial-template
  Onboarding Configuration/Hon-access-initial-template-OLD
  Onboarding Configuration/Hon-core-initial template
  Onboarding Configuration/Hon-core-initial template-OLD
  Onboarding Configuration/IPsec 1 Branch for Cloud Router - System Default
  Onboarding Configuration/IPsec 2 Branch for Cloud Router - System Default

  Hon-global-LAN-DayN-template/Hon-access-AAA
##---AAA---
!
!
aaa new-model
!
ip tacacs source-interface Vlan1000
!
#if ($zone.toString().contains("EMEA"))
 tacacs server NL69_ISE
  address ipv4 10.238.2.94
  key 7 08094D791C2D0D23132D002D
#end
#if (($zone.toString().contains("US-WEST")) || ($zone.toString().contains("LATAM")) || ($zone.toString().contains("CANADA")) || ($zone.toString().contains("US-EAST")) || ($zone.toString().contains("EMEA")))
 tacacs server DE08_ISE
  address ipv4 10.224.2.50
  key 7 08094D791C2D0D23132D002D
#end
#if (($zone.toString().contains("US-WEST")) || ($zone.toString().contains("LATAM")) || ($zone.toString().contains("CANADA")) || ($zone.toString().contains("US-EAST")) || ($zone.toString().contains("APAC")))
 tacacs server AZ66_ISE
  address ipv4 10.195.2.50
  key 7 08094D791C2D0D23132D002D
#end
#if (($zone.toString().contains("APAC")))
 tacacs server APAC_ISE
  address ipv4 10.79.19.26
  key 7 08094D791C2D0D23132D002D
#end
!
aaa group server tacacs+ Honeywell
 #if (($zone.toString().contains("US-WEST")) || ($zone.toString().contains("LATAM")) || ($zone.toString().contains("CANADA")))
  server name AZ66_ISE
  server name DE08_ISE
 #end
 #if (($zone.toString().contains("US-EAST")))
  server name DE08_ISE
  server name AZ66_ISE
 #end
 #if ($zone.toString().contains("EMEA"))
  server name NL69_ISE
  server name DE08_ISE
 #end
 #if (($zone.toString().contains("APAC")))
  server name APAC_ISE
  server name AZ66_ISE
 #end
!
aaa authentication password-prompt "TACACS failure / enter local Password:"
aaa authentication username-prompt "TACACS failure / enter local Username:"
aaa authentication login default group Honeywell local
aaa authentication enable default group Honeywell enable
aaa authorization console
aaa authorization config-commands
aaa authorization exec default group Honeywell if-authenticated
aaa authorization commands 15 default group Honeywell if-authenticated
aaa accounting exec default start-stop group Honeywell
aaa accounting exec commands start-stop group Honeywell
aaa accounting commands 5 default stop-only group Honeywell
aaa accounting commands 15 default start-stop group Honeywell
aaa accounting connection default start-stop group Honeywell
aaa accounting system default start-stop group Honeywell
!
aaa session-id common
!
##---------NTP--------
Hon-global-LAN-DayN-template/Hon-access-NTP
!
clock timezone GMT 0
!
ip access-list standard DENY-ANY
 deny any
!
ip access-list standard NTP-SERVERS
 remark *** HONEYWELL NTP SERVERS ***
 permit 199.63.64.181
 permit 10.199.222.33
 permit 10.223.222.83
!
ntp access-group peer NTP-SERVERS
ntp access-group serve DENY-ANY
ntp access-group serve-only DENY-ANY
ntp access-group query-only DENY-ANY
!
ntp source vlan1000
#if ( $zone.toString().contains("US-WEST") || $zone.toString().contains("CANADA") || $zone.toString().contains("LATAM"))
ntp server 10.199.222.33 prefer
ntp server 10.223.222.83
#elseif ( $zone.toString().contains("US-EAST"))
ntp server 10.223.222.83 prefer
ntp server 10.199.222.33
#elseif ( $zone.toString().contains("EMEA"))
ntp server 10.223.222.83 prefer
ntp server 10.199.222.33
#elseif ( $zone.toString().contains("APAC"))
ntp server 199.63.64.181 prefer
ntp server 10.199.222.33
#end
!
!---QOS Access_list ---
Hon-global-LAN-DayN-template/Hon-access-QoS
!
ip access-list extended LYNC_voice
 permit tcp any any range 39040 39059
 permit udp any any range 39040 39059
 permit tcp any range 39040 39059 any
 permit udp any range 39040 39059 any

ip access-list extended LYNC_video
  permit udp any any range 39060 39079
 permit tcp any any range 39060 39079
 permit udp any range 39060 39079 any
 permit tcp any range 39060 39079 any

ip access-list extended LYNC_signaling
  permit tcp any any eq 5061
  permit tcp any eq 5061 any

ip access-list extended CAPWAP_control
  permit udp any any eq 5246


class-map match-any LYNC_voice
  match access-group name LYNC_voice
class-map match-any LYNC_video
  match access-group name LYNC_video
class-map match-any LYNC_signaling
  match access-group name LYNC_signaling
class-map match-any CAPWAP_control
  match access-group name CAPWAP_control


class-map egress_voice
 match dscp 40 46
class-map egress_video
  match dscp CS4 af41 af42 af43
class-map egress_critical
  match dscp af31
class-map egress_preferred
  match dscp af32 af33
class-map egress_net_control_mgmt
  match dscp cs6 AF22
class-map egress_signaling
  match dscp af21
class-map egress_bulk
  match dscp cs1



policy-map mark_user_interface
  class LYNC_voice
    set dscp ef
    police 160000 8000  conform-action transmit exceed-action drop
  class LYNC_video
    set dscp af41
  class LYNC_signaling
    set dscp af21
  class class-default
    set dscp default
!
policy-map mark_AP_wireless_interface
    class CAPWAP_control
      set dscp cs6
    class LYNC_voice
      set dscp ef
      police 1600000 8000 conform-action transmit exceed-action drop
    class LYNC_video
      set dscp af41
    class LYNC_signaling
      set dscp af21
    class class-default
      set dscp default

policy-map egress_queue
  class egress_voice
   priority level 1
   police rate percent 10
  class egress_video
    bandwidth remaining percent 34
    queue-buffers ratio 15
    queue-limit dscp AF43 percent 80
    queue-limit dscp AF42 percent 90
    queue-limit dscp AF41 percent 100
   class egress_critical
    bandwidth remaining percent 15
    queue-buffers ratio 10
   class egress_preferred
    bandwidth remaining percent 8
    queue-buffers ratio 10
    queue-limit dscp AF33 percent 80
    queue-limit dscp AF32 percent 100
   class egress_net_control_mgmt
    bandwidth remaining percent 9
    queue-buffers ratio 10
    queue-limit dscp AF23 percent 80
    queue-limit dscp AF22 percent 90
    queue-limit dscp CS6 percent 100
   class egress_signaling
     bandwidth remaining percent 8
     queue-buffers ratio 10
   class egress_bulk
     bandwidth remaining percent 1
     queue-buffers ratio 10
     queue-limit dscp AF13 percent 80
     queue-limit dscp AF12 percent 90
     queue-limit dscp AF11 percent 100
   class class-default
      bandwidth remaining percent 25
      queue-buffers ratio 25
!
!
!
##---SNMP---
!
Hon-global-LAN-DayN-template/Hon-access-SNMP
!
no snmp-server group default v3 priv
snmp-server view ReadView-Internet internet included
snmp-server group HON-SNMP-RO v3 priv read ReadView-Internet access SNMP-HON-ACL
snmp-server user honeywell-ro HON-SNMP-RO v3 auth md5 2018Ch440ll3ng35 priv aes 128 2018Ch440ll3ng35 access SNMP-HON-ACL
!
snmp-server enable traps snmp authentication linkdown linkup coldstart warmstart
snmp-server enable traps mac-notification change move
!
!
snmp-server trap-source Vlan1000
snmp-server queue-length 20
!
#if ($zone.toString().contains("EMEA"))
 snmp-server location EMEA/${LID}/${location-building}/${location-floor}/${location-room}
#elseif (($zone.toString().contains("US-WEST")))
 snmp-server location US-WEST/${LID}/${location-building}/${location-floor}/${location-room}
#elseif (($zone.toString().contains("LATAM")))
 snmp-server location LATAM/${LID}/${location-building}/${location-floor}/${location-room}
#elseif (($zone.toString().contains("CANADA")))
 snmp-server location CANADA/${LID}/${location-building}/${location-floor}/${location-room}
#elseif (($zone.toString().contains("US-EAST")))
 snmp-server location US-EAST/${LID}/${location-building}/${location-floor}/${location-room}
#elseif (($zone.toString().contains("APAC")))
 snmp-server location APAC/${LID}/${location-building}/${location-floor}/${location-room}
#end
!
snmp ifmib ifindex persist
!
##---SNMP for E911 - US only----
!
!
#if ( $E911_site == "YES" )
 ip access-list standard SNMP-RO-ACL
  remark E911 Gateway Scanners
  permit host 10.194.132.241
  permit host 10.218.130.171
 !
 snmp-server group HITSgroup v3 priv read ReadView-Internet access SNMP-RO-ACL
 snmp-server user honnetwork HITSgroup v3 auth md5 W3t0thw00fn3m4 priv aes 128 W3t0thw00fn3m4 access SNMP-RO-ACL
 snmp-server group HITSgroup v3 auth context vlan- match prefix
 !
#end
##!!!some commands are commented out, because they are part of the Segmentation runbook, but are already implemented as part of previous configuration templates!!!##
!
##get LID and the hostname from hostname string
!
#set ($hostnames = $hostname.split('\.'))
#set ($only_hostname = $hostnames.get(0))
#set( $LID = $hostname.substring(0,4) )
!
##turn off config authorization, otherwise it will timeout because of too much config
!
no aaa authorization config-commands
!
##---SEGMENTATION---
!
!
#INTERACTIVE
do cts credential id ${only_hostname} password IGnE352SsrTv<IQ>confirm<R>yes
#ENDS_INTERACTIVE
!
##ip domain-name net.honeywell.com
##crypto key generate rsa general-keys mod 2048
!
ip http server
ip http secure-server
ip http secure-active-session-modules none
ip http active-session-modules none
!
aaa new-model
!
#if ($zone.toString().contains("EMEA"))
 radius server ISE-VIP-EMEA
  address ipv4 10.239.95.254 auth-port 1812 acct-port 1813
  pac key iVMt2T1ukfx0
#end
#if ($zone.toString().contains("US-WEST") || $zone.toString().contains("CANADA") || $zone.toString().contains("LATAM") || ($zone.toString().contains("US-EAST")) || ($zone.toString().contains("EMEA")))
 radius server ISE-VIP-DCE
  address ipv4 10.217.95.254 auth-port 1812 acct-port 1813
  pac key iVMt2T1ukfx0
#end
#if ($zone.toString().contains("US-WEST") || $zone.toString().contains("CANADA") || $zone.toString().contains("LATAM") || ($zone.toString().contains("US-EAST")) || ($zone.toString().contains("APAC")))
 radius server ISE-VIP-AZ66
  address ipv4 10.195.3.254 auth-port 1812 acct-port 1813
  pac key iVMt2T1ukfx0
#end
#if ($zone.toString().contains("APAC"))
 radius server ISE-VIP-APAC
  address ipv4 10.79.119.10 auth-port 1812 acct-port 1813
  pac key iVMt2T1ukfx0
#end
!
aaa group server radius HONEYWELL-ISE
 #if ($zone.toString().contains("US-WEST") || $zone.toString().contains("CANADA") || $zone.toString().contains("LATAM"))
  server name ISE-VIP-AZ66
  server name ISE-VIP-DCE
 #end
 #if ($zone.toString().contains("US-EAST"))
  server name ISE-VIP-DCE
  server name ISE-VIP-AZ66
 #end
 #if ($zone.toString().contains("EMEA"))
  server name ISE-VIP-EMEA
  server name ISE-VIP-DCE
 #end
 #if ($zone.toString().contains("APAC"))
  server name ISE-VIP-APAC
  server name ISE-VIP-AZ66
 #end
!
aaa authentication dot1x default group HONEYWELL-ISE
aaa authorization network default group HONEYWELL-ISE
aaa authorization network auth-list group HONEYWELL-ISE
aaa authorization network cts-list group HONEYWELL-ISE
aaa authorization credential-download cts-list group HONEYWELL-ISE
aaa authorization auth-proxy default group HONEYWELL-ISE
aaa accounting auth-proxy default start-stop group HONEYWELL-ISE
aaa accounting dot1x default start-stop group HONEYWELL-ISE
aaa accounting update newinfo periodic 55
!
aaa server radius dynamic-author
 client 10.217.95.254 server-key iVMt2T1ukfx0
 client 10.239.95.254 server-key iVMt2T1ukfx0
 client 10.79.119.10 server-key iVMt2T1ukfx0
 client 10.195.3.254 server-key iVMt2T1ukfx0
 client 10.195.2.32 server-key iVMt2T1ukfx0
 client 10.217.94.21 server-key iVMt2T1ukfx0
!
aaa session-id common
!
##cdp run
##lldp run
!
device-tracking upgrade-cli force
!
device-tracking tracking auto-source override
device-tracking tracking retry-interval 60
!
device-tracking policy HON_DOT1X_INTERFACE
 security-level glean
 no protocol ndp
 no protocol udp
 tracking enable reachable-lifetime 10
!
device-sensor filter-list cdp list cdp-list
tlv name device-name
tlv name platform-type
!
device-sensor filter-list lldp list lldp-list
tlv name system-description
!
device-sensor filter-list dhcp list dhcp-list
option name host-name
option name class-identifier
option name client-identifier
!
device-sensor filter-spec lldp include list lldp-list
device-sensor filter-spec cdp include list cdp-list
device-sensor filter-spec dhcp include list dhcp-list
!
no macro auto monitor
access-session template monitor
device-sensor accounting
device-sensor notify all-changes
!
authentication mac-move permit
authentication critical recovery delay 1000
epm logging
!
cts authorization list cts-list
cts role-based enforcement
cts role-based enforcement vlan-list all
dot1x system-auth-control
!
##ip access-list standard SNMP-RO-ACL
## remark HONEYWELL ISE
## permit 10.217.94.0 0.0.0.255
## permit 10.217.95.0 0.0.0.255
## permit 10.239.95.0 0.0.0.255
## permit 10.79.15.128 0.0.0.31
## permit 10.195.2.32 0.0.0.15
!
ip access-list extended CWA_REDIRECT
 deny udp any eq bootpc any eq bootps
 deny udp any any eq domain
 deny tcp any 10.195.2.32 0.0.0.15 eq 8905
 deny udp any 10.195.2.32 0.0.0.15 eq 8905
 deny tcp any 10.195.2.32 0.0.0.15 eq 8906
 deny udp any 10.195.2.32 0.0.0.15 eq 8906
 deny tcp any 10.195.2.32 0.0.0.15 eq 8443
 deny tcp any 10.195.2.32 0.0.0.15 eq 443
 deny tcp any 10.195.2.32 0.0.0.15 eq www
 deny tcp any host 10.195.3.254 eq 8905
 deny udp any host 10.195.3.254 eq 8905
 deny tcp any host 10.195.3.254 eq 8906
 deny udp any host 10.195.3.254 eq 8906
 deny tcp any host 10.195.3.254 eq 8443
 deny tcp any host 10.195.3.254 eq 443
 deny tcp any host 10.195.3.254 eq www
 deny tcp any 10.217.95.0 0.0.0.255 eq 8905
 deny udp any 10.217.95.0 0.0.0.255 eq 8905
 deny tcp any 10.217.95.0 0.0.0.255 eq 8906
 deny udp any 10.217.95.0 0.0.0.255 eq 8906
 deny tcp any 10.217.95.0 0.0.0.255 eq 8443
 deny tcp any 10.217.95.0 0.0.0.255 eq 443
 deny tcp any 10.217.95.0 0.0.0.255 eq www
 deny tcp any 10.239.95.0 0.0.0.255 eq 8905
 deny udp any 10.239.95.0 0.0.0.255 eq 8905
 deny tcp any 10.239.95.0 0.0.0.255 eq 8906
 deny udp any 10.239.95.0 0.0.0.255 eq 8906
 deny tcp any 10.239.95.0 0.0.0.255 eq 8443
 deny tcp any 10.239.95.0 0.0.0.255 eq 443
 deny tcp any 10.239.95.0 0.0.0.255 eq www
 deny tcp any 10.79.15.128 0.0.0.31 eq 8905
 deny udp any 10.79.15.128 0.0.0.31 eq 8905
 deny tcp any 10.79.15.128 0.0.0.31 eq 8906
 deny udp any 10.79.15.128 0.0.0.31 eq 8906
 deny tcp any 10.79.15.128 0.0.0.31 eq 8443
 deny tcp any 10.79.15.128 0.0.0.31 eq 443
 deny tcp any 10.79.15.128 0.0.0.31 eq www
 deny tcp any host 10.79.119.10 eq 8905
 deny udp any host 10.79.119.10 eq 8905
 deny tcp any host 10.79.119.10 eq 8906
 deny udp any host 10.79.119.10 eq 8906
 deny tcp any host 10.79.119.10 eq 8443
 deny tcp any host 10.79.119.10 eq 443
 deny tcp any host 10.79.119.10 eq www
 permit tcp any any eq www
 permit tcp any any eq 443
!
ip radius source-interface Vlan1000
##logging origin-id ip
##logging source-interface Vlan1000
!
snmp-server group HITSgroup v3 priv read ReadView-Internet access SNMP-RO-ACL
##snmp-server view ReadView-Internet internet included
##snmp-server trap-source loopback0
snmp-server enable traps snmp linkdown linkup coldstart warmstart
snmp-server enable traps mac-notification change move
!
snmp-server user isesds HITSgroup v3 auth md5 EL9sbuP624Uy priv aes 128 EseyLnbPGk9s
!
radius-server attribute 6 on-for-login-auth
radius-server attribute 8 include-in-access-req
radius-server attribute 25 access-request include
radius-server dead-criteria time 30 tries 3
radius-server vsa send
radius-server deadtime 15
!
!
##---Segmentation/802.1x on Access Ports ---
!
#macro(User_access_port_segmentation)
 authentication event fail action next-method
 authentication host-mode multi-auth
 authentication open
 authentication order dot1x mab
 authentication priority mab dot1x
 authentication port-control auto
 authentication timer reauthenticate server
 authentication timer inactivity server
 authentication violation restrict
 mab
 dot1x pae authenticator
 dot1x timeout tx-period 10
 device-tracking attach-policy HON_DOT1X_INTERFACE
#end
!
## go through all interfaces and where the description matches L#.*${LID}rs.* (this is the interface towards core switch), configure CTS manual
## CTS cannot be configured on interfaces in channel, so the order of operation as follows:
!
## 1) this will identify the uplink port-channel and save the channel ID
!
#foreach ($interface in ${interfaces})
 #if($interface.description.matches("L#.*${LID}rs.*interface Po.*") && ($interface.interfaceType == "Virtual"))
  #set ($channel = $interface.portName.toString().split("channel"))
 #end
#end
!
## 2) this will identify the physical interfaces in the channel, remove them from the channel, and configure CTS manual
!
#foreach ($interface in ${interfaces})
 #if($interface.description.matches("L#.*${LID}rs.*") && ($interface.interfaceType == "Physical"))
  int $interface.portName
   no channel-group
   cts manual
    policy static sgt 2 trusted
 #end
#end
!
## 3) this will then return the interfaces back to the channel
!
#foreach ($interface in ${interfaces})
 #if($interface.description.matches("L#.*${LID}rs.*") && ($interface.interfaceType == "Physical"))
  int $interface.portName
   channel-group $channel.get(1) mode active
 #end
#end
!
## go through all interfaces and where the description matches the access port description, configure segmentation
!
#foreach ($interface in ${interfaces})
 #if($interface.description.matches("lan user port") && ($interface.interfaceType == "Physical"))
  !
  int $interface.portName
   #User_access_port_segmentation
  !
 #end
#end
!
##turn on config authorization, as it was turned off before
!
aaa authorization config-commands
!
!

Required Parameters for template body: {"channel":""}

Bindings ['"zone":"Inventory.Device"', '"hostname":"Inventory.Device"', '"interfaces":"Inventory.Interface"']
!
!
##---------logging-------
!
logging buffered 16384 debugging
logging console notifications
logging trap informational
logging host 10.195.3.200
logging host 10.224.3.200
logging host 10.224.20.28 transport udp port 5029
logging origin-id ip
logging source-interface Vlan1000
!
##---AAA---
!
!
aaa new-model
!
ip tacacs source-interface Lo0
!
#if ($zone.toString().contains("EMEA"))
 tacacs server NL69_ISE
  address ipv4 10.238.2.94
  key 7 08094D791C2D0D23132D002D
#end
#if (($zone.toString().contains("US-WEST")) || ($zone.toString().contains("LATAM")) || ($zone.toString().contains("CANADA")) || ($zone.toString().contains("US-EAST")) || ($zone.toString().contains("EMEA")))
 tacacs server DE08_ISE
  address ipv4 10.224.2.50
  key 7 08094D791C2D0D23132D002D
#end
#if (($zone.toString().contains("US-WEST")) || ($zone.toString().contains("LATAM")) || ($zone.toString().contains("CANADA")) || ($zone.toString().contains("US-EAST")) || ($zone.toString().contains("APAC")))
 tacacs server AZ66_ISE
  address ipv4 10.195.2.50
  key 7 08094D791C2D0D23132D002D
#end
#if (($zone.toString().contains("APAC")))
 tacacs server APAC_ISE
  address ipv4 10.79.19.26
  key 7 08094D791C2D0D23132D002D
#end
!
aaa group server tacacs+ Honeywell
 #if (($zone.toString().contains("US-WEST")) || ($zone.toString().contains("LATAM")) || ($zone.toString().contains("CANADA")))
  server name AZ66_ISE
  server name DE08_ISE
 #end
 #if (($zone.toString().contains("US-EAST")))
  server name DE08_ISE
  server name AZ66_ISE
 #end
 #if ($zone.toString().contains("EMEA"))
  server name NL69_ISE
  server name DE08_ISE
 #end
 #if (($zone.toString().contains("APAC")))
  server name APAC_ISE
  server name AZ66_ISE
 #end
!
## do necessary changes for authentication to work when using Gi0/0 for staging
!
#if($interface.status != "down")
aaa group server tacacs+ Honeywell
 ip vrf forwarding Mgmt-vrf
 ip tacacs source-interface GigabitEthernet0/0
!
line vty 0 15
 session-timeout 10
 access-class SSH-UNRESTRICTED in vrf-also
!
#end
!
aaa authentication password-prompt "TACACS failure / enter local Password:"
aaa authentication username-prompt "TACACS failure / enter local Username:"
aaa authentication login default group Honeywell local
aaa authentication enable default group Honeywell enable
aaa authorization console
aaa authorization config-commands
aaa authorization exec default group Honeywell if-authenticated
aaa authorization commands 15 default group Honeywell if-authenticated
aaa accounting exec default start-stop group Honeywell
aaa accounting exec commands start-stop group Honeywell
aaa accounting commands 5 default stop-only group Honeywell
aaa accounting commands 15 default start-stop group Honeywell
aaa accounting connection default start-stop group Honeywell
aaa accounting system default start-stop group Honeywell
!
aaa session-id common
!
##---------NTP--------
!
clock timezone GMT 0
!
ip access-list standard DENY-ANY
 deny any
!
ip access-list standard NTP-SERVERS
 remark *** HONEYWELL NTP SERVERS ***
 permit 199.63.64.181
 permit 10.199.222.33
 permit 10.223.222.83
!
ntp access-group peer NTP-SERVERS
ntp access-group serve DENY-ANY
ntp access-group serve-only DENY-ANY
ntp access-group query-only DENY-ANY
!
ntp source Lo0
#if ( $zone.toString().contains("US-WEST") || $zone.toString().contains("CANADA") || $zone.toString().contains("LATAM"))
ntp server 10.199.222.33 prefer
ntp server 10.223.222.83
#elseif ( $zone.toString().contains("US-EAST"))
ntp server 10.223.222.83 prefer
ntp server 10.199.222.33
#elseif ( $zone.toString().contains("EMEA"))
ntp server 10.223.222.83 prefer
ntp server 10.199.222.33
#elseif ( $zone.toString().contains("APAC"))
ntp server 199.63.64.181 prefer
ntp server 10.199.222.33
#end
!


Required Parameters for template body: {}

Bindings ['"zone":"Inventory.Device"']
!---QOS Access_list ---
!
ip access-list extended LYNC_voice
 permit tcp any any range 39040 39059
 permit udp any any range 39040 39059
 permit tcp any range 39040 39059 any
 permit udp any range 39040 39059 any

ip access-list extended LYNC_video
 permit udp any any range 39060 39079
 permit tcp any any range 39060 39079
 permit udp any range 39060 39079 any
 permit tcp any range 39060 39079 any

ip access-list extended LYNC_signaling
  permit tcp any any eq 5061
  permit tcp any eq 5061 any

ip access-list extended CAPWAP_control
  permit udp any any eq 5246


class-map match-any LYNC_voice
  match access-group name LYNC_voice
class-map match-any LYNC_video
  match access-group name LYNC_video
class-map match-any LYNC_signaling
  match access-group name LYNC_signaling
class-map match-any CAPWAP_control
  match access-group name CAPWAP_control


class-map egress_voice
 match dscp 40 46
class-map egress_video
  match dscp CS4 af41 af42 af43
class-map egress_critical
  match dscp af31
class-map egress_preferred
  match dscp af32 af33
class-map egress_net_control_mgmt
  match dscp cs6 AF22
class-map egress_signaling
  match dscp af21
class-map egress_bulk
  match dscp cs1



policy-map mark_user_interface
  class LYNC_voice
    set dscp ef
    police 160000 8000  conform-action transmit exceed-action drop
  class LYNC_video
    set dscp af41
  class LYNC_signaling
    set dscp af21
  class class-default
    set dscp default
!
policy-map mark_AP_wireless_interface
    class CAPWAP_control
      set dscp cs6
    class LYNC_voice
      set dscp ef
      police 1600000 8000 conform-action transmit exceed-action drop
    class LYNC_video
      set dscp af41
    class LYNC_signaling
      set dscp af21
    class class-default
      set dscp default

policy-map egress_queue
  class egress_voice
   priority level 1
   police rate percent 10
  class egress_video
    bandwidth remaining percent 34
    queue-buffers ratio 15
    queue-limit dscp AF43 percent 80
    queue-limit dscp AF42 percent 90
    queue-limit dscp AF41 percent 100
   class egress_critical
    bandwidth remaining percent 15
    queue-buffers ratio 10
   class egress_preferred
    bandwidth remaining percent 8
    queue-buffers ratio 10
    queue-limit dscp AF33 percent 80
    queue-limit dscp AF32 percent 100
   class egress_net_control_mgmt
    bandwidth remaining percent 9
    queue-buffers ratio 10
    queue-limit dscp AF23 percent 80
    queue-limit dscp AF22 percent 90
    queue-limit dscp CS6 percent 100
   class egress_signaling
     bandwidth remaining percent 8
     queue-buffers ratio 10
   class egress_bulk
     bandwidth remaining percent 1
     queue-buffers ratio 10
     queue-limit dscp AF13 percent 80
     queue-limit dscp AF12 percent 90
     queue-limit dscp AF11 percent 100
   class class-default
      bandwidth remaining percent 25
      queue-buffers ratio 25
!
##get LID from hostname
!
#set( $LID = $hostname.substring(0,4) )
!
##---SNMP---
!
!
no snmp-server group default v3 priv
snmp-server view ReadView-Internet internet included
snmp-server group HON-SNMP-RO v3 priv read ReadView-Internet access SNMP-HON-ACL
snmp-server user honeywell-ro HON-SNMP-RO v3 auth md5 2018Ch440ll3ng35 priv aes 128 2018Ch440ll3ng35 access SNMP-HON-ACL
!
snmp-server enable traps snmp authentication linkdown linkup coldstart warmstart
snmp-server enable traps mac-notification change move
!
!
snmp-server trap-source Lo0
snmp-server queue-length 20
!
#if ($zone.toString().contains("EMEA"))
 snmp-server location EMEA/${LID}/${location-building}/${location-floor}/${location-room}
#elseif (($zone.toString().contains("US-WEST")))
 snmp-server location US-WEST/${LID}/${location-building}/${location-floor}/${location-room}
#elseif (($zone.toString().contains("LATAM")))
 snmp-server location LATAM/${LID}/${location-building}/${location-floor}/${location-room}
#elseif (($zone.toString().contains("CANADA")))
 snmp-server location CANADA/${LID}/${location-building}/${location-floor}/${location-room}
#elseif (($zone.toString().contains("US-EAST")))
 snmp-server location US-EAST/${LID}/${location-building}/${location-floor}/${location-room}
#elseif (($zone.toString().contains("APAC")))
 snmp-server location APAC/${LID}/${location-building}/${location-floor}/${location-room}
#end
!
snmp ifmib ifindex persist
!
##---SNMP for E911 - US only----
!
!
#if ( $E911_site == "YES" )
 ip access-list standard SNMP-RO-ACL
  remark E911 Gateway Scanners
  permit host 10.194.132.241
  permit host 10.218.130.171
 !
 snmp-server group HITSgroup v3 priv read ReadView-Internet access SNMP-RO-ACL
 snmp-server user honnetwork HITSgroup v3 auth md5 W3t0thw00fn3m4 priv aes 128 W3t0thw00fn3m4 access SNMP-RO-ACL
 snmp-server group HITSgroup v3 auth context vlan- match prefix
 !
#end

Required Parameters for template body: {"location-room":"","location-floor":"","location-building":"","E911_site":""}

Bindings ['"hostname":"Inventory.Device"', '"zone":"Inventory.Device"']
!
##---------logging-------
!
logging buffered 16384 debugging
logging console notifications
logging trap informational
logging host 10.195.3.200
logging host 10.224.3.200
logging host 10.224.20.28 transport udp port 5029
logging origin-id ip
logging source-interface Lo0
!
##get LID from hostname
!
#set( $LID = $hostname.substring(0,4) )
!
##---Access Port Macro---
!
#macro(User_access_port)
 description lan user port
 switchport access vlan ${Local-user-vlan}
 switchport mode access
 switchport voice vlan 710
 no snmp trap link-status
 spanning-tree portfast
 service-policy input mark_user_interface
 service-policy output egress_queue
 no shut
#end
!
##---Local Wireless Port Macro---
!
#macro(AP_port_local)
 switchport access vlan 805
 switchport mode access
 power inline port priority high
 snmp trap link-status
 no lldp transmit
 no lldp receive
 spanning-tree portfast
 service-policy input mark_AP_wireless_interface
 service-policy output egress_queue
 no shut
#end
!
##---Central Wireless Port Macro---
!
#macro(AP_port_central)
 switchport trunk native vlan 805
 switchport trunk allowed vlan 801-809
 switchport mode trunk
 switchport nonegotiate
 power inline port priority high
 snmp trap link-status
 no lldp transmit
 no lldp receive
 spanning-tree portfast trunk
 service-policy input mark_AP_wireless_interface
 service-policy output egress_queue
 no shut
#end
!
##---WLC Port Configuration Macros----
!
#macro(WLC_port_primary)
 description W#Connected to ${WLC-hostname}-primary
 switchport trunk allowed vlan 801-809
 switchport mode trunk
 channel-group 110 mode on
 spanning-tree portfast trunk
 service-policy output egress_queue
#end
#macro(WLC_port_secondary)
 description W#Connected to ${WLC-hostname}-secondary
 switchport trunk allowed vlan 801-809
 switchport mode trunk
 channel-group 111 mode on
 spanning-tree portfast trunk
 service-policy output egress_queue
#end
#macro(WLC_port_channel_primary)
 description W#Connected to ${WLC-hostname}-primary
 switchport trunk allowed vlan 801-809
 switchport mode trunk
 spanning-tree portfast trunk
#end
#macro(WLC_port_channel_secondary)
 description W#Connected to ${WLC-hostname}-secondary
 switchport trunk allowed vlan 801-809
 switchport mode trunk
 spanning-tree portfast trunk
#end
!
##---Downlink to Access Port Macros----
!
#macro(Downlink_access_switch)
  switchport trunk native vlan 999
  switchport trunk allowed vlan ${user_downlink_vlan},710,805,1000
  switchport mode trunk
  switchport nonegotiate
  logging event bundle-status
  udld port aggressive
  no lldp receive
  no lldp transmit
  spanning-tree guard root
  service-policy output egress_queue
  ip dhcp snooping trust
  cts manual
   policy static sgt 2 trusted
  channel-group ${channel} mode active
  no shutdown
#end
#macro(Downlink_channel_access_switch)
  switchport trunk native vlan 999
  switchport trunk allowed vlan ${user_downlink_vlan},710,805,1000
  switchport mode trunk
  switchport nonegotiate
  logging event bundle-status
  no port-channel standalone-disable
  spanning-tree guard root
  ip dhcp snooping trust
  no shutdown
#end
!
##---Access Port configuration---
!
#if($switch_model.toString().contains("C9300"))
 !
 ## 1) prepare interface variables,
 !
 #set($Gig_min = 0)
 #set($Gig_max = 0)
 #set($TwoGig_min = 0)
 #set($TwoGig_max = 0)
 #set($mGig_min = 0)
 #set($mGig_max = 0)
 !
 ## 2) prepare upling substrings so the uplinks are not overriden if non-module interfaces are used as uplinks ,
 !
 #set ($index = -1)
 #set ($index = $Uplink_PORT1.indexOf('/0/'))
 #if ($index >= 0)
  #set ($index = $index - 1)
  #set ($Uplink_PORT1 = $Uplink_PORT1.substring($index))
 #end
 !
 #set ($index = $Uplink_PORT2.indexOf('/0/'))
 #if ($index >= 0)
  #set ($index = $index - 1)
  #set ($Uplink_PORT2 = $Uplink_PORT2.substring($index))
 #end
 !
 ## 3) take model info from DNAC inventory and split it if needed
 !
 #if($switch_model.toString().contains(", "))
  #set ($models = $switch_model.split('\, '))
 #else
  #set ($models = $switch_model)
 #end
 !
 #set($stack = 1)
 !
 ## define ranges for Gig , TwoGig and mGig interfaces and configure all ports as User access ports (except if they are used for uplinks)
 !
 #foreach($model in $models)
  #if(($model == "C9300-24U") || ($model == "C9300-24P"))
   #set($Gig_min = 1)
   #set($Gig_max = 24)
   #set($TwoGig_min = 0)
   #set($TwoGig_max = 0)
   #set($mGig_min = 0)
   #set($mGig_max = 0)
  #elseif(($model == "C9300-48U") || ($model == "C9300-48P"))
   #set($Gig_min = 1)
   #set($Gig_max = 48)
   #set($TwoGig_min = 0)
   #set($TwoGig_max = 0)
   #set($mGig_min = 0)
   #set($mGig_max = 0)
  #elseif($model == "C9300-24UX")
   #set($Gig_min = 0)
   #set($Gig_max = 0)
   #set($TwoGig_min = 0)
   #set($TwoGig_max = 0)
   #set($mGig_min = 1)
   #set($mGig_max = 24)
  #elseif($model == "C9300-48UXM")
   #set($Gig_min = 0)
   #set($Gig_max = 0)
   #set($TwoGig_min = 1)
   #set($TwoGig_max = 36)
   #set($mGig_min = 37)
   #set($mGig_max = 48)
  #end
  !
  #if(($Gig_min != 0) && ($Gig_max != 0))
   #foreach($int in [${Gig_min}..${Gig_max}])
    #if($Uplink_PORT1 != "${stack}/0/${int}" && $Uplink_PORT2 != "${stack}/0/${int}")
     default interface Gi${stack}/0/${int}
     interface Gi${stack}/0/${int}
      #User_access_port
    #end
   !
   #end
  #end
  #if(($TwoGig_min != 0) && ($TwoGig_max != 0))
   #foreach($int in [${TwoGig_min}..${TwoGig_max}])
    #if($Uplink_PORT1 != "${stack}/0/${int}" && $Uplink_PORT2 != "${stack}/0/${int}")
     default interface TwoGi${stack}/0/${int}
     interface TwoGi${stack}/0/${int}
      #User_access_port
    #end
   !
   #end
  #end
   #if(($mGig_min != 0) && ($mGig_max != 0))
   #foreach($int in [${mGig_min}..${mGig_max}])
    #if($Uplink_PORT1 != "${stack}/0/${int}" && $Uplink_PORT2 != "${stack}/0/${int}")
     default interface Te${stack}/0/${int}
     interface Te${stack}/0/${int}
      #User_access_port
    #end
   !
   #end
  #end
  !
  #set($stack = $stack + 1)
 #end
 !
#end
!
## configure AP Ports
!
#if($switch_model.toString().contains("C9300") && $AP_interfaces != "" && $AP_hostnames != "")
 !
 #if($AP_interfaces.toString().contains(","))
  #set ($interfaces = $AP_interfaces.split('\,'))
 #else
  #set ($interfaces = $AP_interfaces.split('\ '))
 #end
 !
 #if($AP_hostnames.toString().contains(","))
  #set ($APs = $AP_hostnames.split('\,'))
 #else
  #set ($APs = $AP_hostnames.split('\ '))
 #end
 !
 #set ( $count = 0)
 !
 #foreach($int in $interfaces)
  #if ( $count != $APs.size() )
    #set ( $AP = $APs.get($count) )
  #else
   #break
  #end
  default interface $int
  interface $int
   description A#Connected to ${AP} interface Gi0
  #if($local_wlc == "YES")
   #AP_port_local
  #elseif($local_wlc == "NO")
   #AP_port_central
  #end
  !
  #set ( $count = $count + 1)
 !
 #end
#end
!
## configure WLC Ports
!
#if(($WLC_primary_interfaces != "N/A") && $local_wlc == "YES")
!
 !
 #if($WLC_primary_interfaces.toString().contains(","))
  #set ($primary_interfaces = $WLC_primary_interfaces.split('\,'))
 #else
  #set ($primary_interfaces = $WLC_primary_interfaces.split('\ '))
 #end
 !
 #if($WLC_secondary_interfaces.toString().contains(","))
  #set ($secondary_interfaces = $WLC_secondary_interfaces.split('\,'))
 #else
  #set ($secondary_interfaces = $WLC_secondary_interfaces.split('\ '))
 #end
 !
 #foreach($int in $primary_interfaces)
  default interface $int
  interface $int
   #WLC_port_primary
 #end
 !
 interface Po110
  #WLC_port_channel_primary
 !
 #foreach($int in $secondary_interfaces)
  default interface $int
  interface $int
   #WLC_port_secondary
 #end
 !
 interface Po111
  #WLC_port_channel_secondary
 !
#end
!
!
!
##------ downlink to access switch----
!
#if (($switch_role == 'COLLAPSED_CORE') || ($switch_role == 'DISTRIBUTION'))

 #if($access_hostnames.toString().contains(","))
 #set ($access_hostnames_list = $access_hostnames.split('\,'))
 #else
 #set ($access_hostnames_list = $access_hostnames.split('\ '))
 #end
 #if($downlink1_to_access.toString().contains(","))
 #set ($downlink1_list = $downlink1_to_access.split('\,'))
 #else
 #set ($downlink1_list = $downlink1_to_access.split('\ '))
 #end
 #if($downlink2_to_access.toString().contains(","))
 #set ($downlink2_list = $downlink2_to_access.split('\,'))
 #else
 #set ($downlink2_list = $downlink2_to_access.split('\ '))
 #end
 #if($access_user_vlan.toString().contains(","))
 #set ($access_user_vlan_list = $access_user_vlan.split('\,'))
 #else
 #set ($access_user_vlan_list = $access_user_vlan.split('\ '))
 #end
 #if($access_uplink1.toString().contains(","))
 #set ($access_uplink1_list = $access_uplink1.split('\,'))
 #else
 #set ($access_uplink1_list = $access_uplink1.split('\ '))
 #end
 #if($access_uplink2.toString().contains(","))
 #set ($access_uplink2_list = $access_uplink2.split('\,'))
 #else
 #set ($access_uplink2_list = $access_uplink2.split('\ '))
 #end
 #if($channel_id.toString().contains(","))
 #set ($channel_list = $channel_id.split('\,'))
 #else
 #set ($channel_list = $channel_id.split('\ '))
 #end
 !
 #set ( $count = 0)
 !
 #foreach ($access_hostname in $access_hostnames_list)
  #if (($count != $downlink1_list.size()) || ($count != $downlink2_list.size()) || ($count != $access_user_vlan_list.size()) || ($count != $access_uplink1_list.size()) || ($count != $access_uplink2_list.size()) || ($count != $channel_list.size()))
   #set ( $downlink1 = $downlink1_list.get($count) )
   #set ( $downlink2 = $downlink2_list.get($count) )
   #set ( $user_downlink_vlan = $access_user_vlan_list.get($count) )
   #set ( $uplink1 = $access_uplink1_list.get($count) )
   #set ( $uplink2 = $access_uplink2_list.get($count) )
   #set ( $channel = $channel_list.get($count) )
  #else
   #break
  #end
 !
 interface ${downlink1}
 #if($switch_model.toString().contains("C9300"))
  no device-tracking attach-policy IPDT_POLICY
 #end
  description L#Connected to ${access_hostname} interface ${uplink1}
  #Downlink_access_switch
 !
 interface ${downlink2}
 #if($switch_model.toString().contains("C9300"))
  no device-tracking attach-policy IPDT_POLICY
 #end
  description L#Connected to ${access_hostname} interface ${uplink2}
  #Downlink_access_switch
 !
 interface Po${channel}
  description L#Connected to ${access_hostname} interface Po${channel}
  #Downlink_channel_access_switch
  !
  #set ( $count = $count + 1)
  !
 #end
!
#end
!


Required Parameters for template body: {"access_hostnames_list":"","user_downlink_vlan":"","access_user_vlan":"","downlink1":"","AP_interfaces":"","Local-user-vlan":"","access_uplink2_list":"","AP":"","access_uplink1":"","uplink2":"","local_wlc":"","downlink1_list":"","primary_interfaces":"","downlink2_list":"","uplink1":"","interfaces":"","APs":"","secondary_interfaces":"","Uplink_PORT2":"","access_uplink2":"","AP_hostnames":"","Uplink_PORT1":"","switch_role":"","WLC_primary_interfaces":"","downlink2":"","access_user_vlan_list":"","access_uplink1_list":"","downlink1_to_access":"","access_hostnames":"","channel":"","WLC-hostname":"","downlink2_to_access":"","models":"","channel_id":"","WLC_secondary_interfaces":"","channel_list":""}

Bindings ['"switch_model":"Inventory.Device"', '"hostname":"Inventory.Device"']
##!!!some commands are commented out, because they are part of the Segmentation runbook, but are already implemented as part of different configuration templates!!!##
!
##get LID and the hostname from hostname string
!
#set ($hostnames = $hostname.split('\.'))
#set ($only_hostname = $hostnames.get(0))
#set( $LID = $hostname.substring(0,4) )
!
##turn off config authorization, otherwise it will timeout because of too much config
!
no aaa authorization config-commands
!
##---SEGMENTATION---
!
!
#INTERACTIVE
do cts credential id ${only_hostname} password IGnE352SsrTv<IQ>confirm<R>yes
#ENDS_INTERACTIVE
!
##ip domain-name net.honeywell.com
##crypto key generate rsa general-keys mod 2048
!
ip http server
ip http secure-server
ip http secure-active-session-modules none
ip http active-session-modules none
!
aaa new-model
!
#if ($zone.toString().contains("EMEA"))
 radius server ISE-VIP-EMEA
  address ipv4 10.239.95.254 auth-port 1812 acct-port 1813
  pac key iVMt2T1ukfx0
#end
#if ($zone.toString().contains("US-WEST") || $zone.toString().contains("CANADA") || $zone.toString().contains("LATAM") || ($zone.toString().contains("US-EAST")) || ($zone.toString().contains("EMEA")))
 radius server ISE-VIP-DCE
  address ipv4 10.217.95.254 auth-port 1812 acct-port 1813
  pac key iVMt2T1ukfx0
#end
#if ($zone.toString().contains("US-WEST") || $zone.toString().contains("CANADA") || $zone.toString().contains("LATAM") || ($zone.toString().contains("US-EAST")) || ($zone.toString().contains("APAC")))
 radius server ISE-VIP-AZ66
  address ipv4 10.195.3.254 auth-port 1812 acct-port 1813
  pac key iVMt2T1ukfx0
#end
#if ($zone.toString().contains("APAC"))
 radius server ISE-VIP-APAC
  address ipv4 10.79.119.10 auth-port 1812 acct-port 1813
  pac key iVMt2T1ukfx0
#end
!
aaa group server radius HONEYWELL-ISE
 #if ($zone.toString().contains("US-WEST") || $zone.toString().contains("CANADA") || $zone.toString().contains("LATAM"))
  server name ISE-VIP-AZ66
  server name ISE-VIP-DCE
 #end
 #if ($zone.toString().contains("US-EAST"))
  server name ISE-VIP-DCE
  server name ISE-VIP-AZ66
 #end
 #if ($zone.toString().contains("EMEA"))
  server name ISE-VIP-EMEA
  server name ISE-VIP-DCE
 #end
 #if ($zone.toString().contains("APAC"))
  server name ISE-VIP-APAC
  server name ISE-VIP-AZ66
 #end
!
aaa authentication dot1x default group HONEYWELL-ISE
aaa authorization network default group HONEYWELL-ISE
aaa authorization network auth-list group HONEYWELL-ISE
aaa authorization network cts-list group HONEYWELL-ISE
aaa authorization credential-download cts-list group HONEYWELL-ISE
aaa authorization auth-proxy default group HONEYWELL-ISE
aaa accounting auth-proxy default start-stop group HONEYWELL-ISE
aaa accounting dot1x default start-stop group HONEYWELL-ISE
aaa accounting update newinfo periodic 55
!
aaa server radius dynamic-author
 client 10.217.95.254 server-key iVMt2T1ukfx0
 client 10.239.95.254 server-key iVMt2T1ukfx0
 client 10.79.119.10 server-key iVMt2T1ukfx0
 client 10.195.3.254 server-key iVMt2T1ukfx0
 client 10.195.2.32 server-key iVMt2T1ukfx0
 client 10.217.94.21 server-key iVMt2T1ukfx0
!
aaa session-id common
!
##cdp run
##lldp run
!
device-tracking upgrade-cli force
!
device-tracking tracking auto-source override
device-tracking tracking retry-interval 60
!
device-tracking policy HON_DOT1X_INTERFACE
 security-level glean
 no protocol ndp
 no protocol udp
 tracking enable reachable-lifetime 10
!
device-sensor filter-list cdp list cdp-list
tlv name device-name
tlv name platform-type
!
device-sensor filter-list lldp list lldp-list
tlv name system-description
!
device-sensor filter-list dhcp list dhcp-list
option name host-name
option name class-identifier
option name client-identifier
!
device-sensor filter-spec lldp include list lldp-list
device-sensor filter-spec cdp include list cdp-list
device-sensor filter-spec dhcp include list dhcp-list
!
no macro auto monitor
access-session template monitor
device-sensor accounting
device-sensor notify all-changes
!
authentication mac-move permit
authentication critical recovery delay 1000
epm logging
!
cts authorization list cts-list
cts role-based enforcement
cts role-based enforcement vlan-list all
dot1x system-auth-control
!
##ip access-list standard SNMP-RO-ACL
## remark HONEYWELL ISE
## permit 10.217.94.0 0.0.0.255
## permit 10.217.95.0 0.0.0.255
## permit 10.239.95.0 0.0.0.255
## permit 10.79.15.128 0.0.0.31
## permit 10.195.2.32 0.0.0.15
!
ip access-list extended CWA_REDIRECT
 deny udp any eq bootpc any eq bootps
 deny udp any any eq domain
 deny tcp any 10.195.2.32 0.0.0.15 eq 8905
 deny udp any 10.195.2.32 0.0.0.15 eq 8905
 deny tcp any 10.195.2.32 0.0.0.15 eq 8906
 deny udp any 10.195.2.32 0.0.0.15 eq 8906
 deny tcp any 10.195.2.32 0.0.0.15 eq 8443
 deny tcp any 10.195.2.32 0.0.0.15 eq 443
 deny tcp any 10.195.2.32 0.0.0.15 eq www
 deny tcp any host 10.195.3.254 eq 8905
 deny udp any host 10.195.3.254 eq 8905
 deny tcp any host 10.195.3.254 eq 8906
 deny udp any host 10.195.3.254 eq 8906
 deny tcp any host 10.195.3.254 eq 8443
 deny tcp any host 10.195.3.254 eq 443
 deny tcp any host 10.195.3.254 eq www
 deny tcp any 10.217.95.0 0.0.0.255 eq 8905
 deny udp any 10.217.95.0 0.0.0.255 eq 8905
 deny tcp any 10.217.95.0 0.0.0.255 eq 8906
 deny udp any 10.217.95.0 0.0.0.255 eq 8906
 deny tcp any 10.217.95.0 0.0.0.255 eq 8443
 deny tcp any 10.217.95.0 0.0.0.255 eq 443
 deny tcp any 10.217.95.0 0.0.0.255 eq www
 deny tcp any 10.239.95.0 0.0.0.255 eq 8905
 deny udp any 10.239.95.0 0.0.0.255 eq 8905
 deny tcp any 10.239.95.0 0.0.0.255 eq 8906
 deny udp any 10.239.95.0 0.0.0.255 eq 8906
 deny tcp any 10.239.95.0 0.0.0.255 eq 8443
 deny tcp any 10.239.95.0 0.0.0.255 eq 443
 deny tcp any 10.239.95.0 0.0.0.255 eq www
 deny tcp any 10.79.15.128 0.0.0.31 eq 8905
 deny udp any 10.79.15.128 0.0.0.31 eq 8905
 deny tcp any 10.79.15.128 0.0.0.31 eq 8906
 deny udp any 10.79.15.128 0.0.0.31 eq 8906
 deny tcp any 10.79.15.128 0.0.0.31 eq 8443
 deny tcp any 10.79.15.128 0.0.0.31 eq 443
 deny tcp any 10.79.15.128 0.0.0.31 eq www
 deny tcp any host 10.79.119.10 eq 8905
 deny udp any host 10.79.119.10 eq 8905
 deny tcp any host 10.79.119.10 eq 8906
 deny udp any host 10.79.119.10 eq 8906
 deny tcp any host 10.79.119.10 eq 8443
 deny tcp any host 10.79.119.10 eq 443
 deny tcp any host 10.79.119.10 eq www
 permit tcp any any eq www
 permit tcp any any eq 443
!
ip radius source-interface loopback0
##logging origin-id ip
##logging source-interface loopback0
!
snmp-server group HITSgroup v3 priv read ReadView-Internet access SNMP-RO-ACL
##snmp-server view ReadView-Internet internet included
##snmp-server trap-source loopback0
snmp-server enable traps snmp linkdown linkup coldstart warmstart
snmp-server enable traps mac-notification change move
!
snmp-server user isesds HITSgroup v3 auth md5 EL9sbuP624Uy priv aes 128 EseyLnbPGk9s
!
radius-server attribute 6 on-for-login-auth
radius-server attribute 8 include-in-access-req
radius-server attribute 25 access-request include
radius-server dead-criteria time 30 tries 3
radius-server vsa send
radius-server deadtime 15
!
!
##---Segmentation/802.1x on Access Ports ---
!
#macro(User_access_port_segmentation)
 authentication event fail action next-method
 authentication host-mode multi-auth
 authentication open
 authentication order dot1x mab
 authentication priority mab dot1x
 authentication port-control auto
 authentication timer reauthenticate server
 authentication timer inactivity server
 authentication violation restrict
 mab
 dot1x pae authenticator
 dot1x timeout tx-period 10
 device-tracking attach-policy HON_DOT1X_INTERFACE
#end
!
## go through all interfaces and where the description matches R#.*${LID}rt.* (this is the interface towards router), configure CTS manual
!
#foreach ($interface in ${interfaces})
 #if($interface.description.matches("R#.*${LID}rt.*") && ($interface.interfaceType == "Physical"))
  !
  int $interface.portName
   cts manual
    policy static sgt 2 trusted
 #end
#end
!
## go through all interfaces and where the description matches the access port description, configure segmentation
!
#foreach ($interface in ${interfaces})
 #if($interface.description.matches("lan user port") && ($interface.interfaceType == "Physical"))
  !
  int $interface.portName
   #User_access_port_segmentation
  !
 #end
#end
!
## CTS manual on the switch downlink interfaces was commented as this would not work for interfaces in Portchannel. I do not know a way how to get from DNA information in which channel the interface is co it could be returned back to the channel after configuring CTS manual.
!
##foreach ($interface in ${interfaces})
## #if($interface.description.startsWith("L#") && ($interface.interfaceType == "Physical"))
##  !
##  int $interface.portName
##   cts manual
##    policy static sgt 2 trusted
## #end
###end
!
!
##--SXP Configuration to local WLC---
!
## go through all interfaces and configure the SVIs in range of Vlan801-849 (this is the Wireless VLAN range)
!
#if ($Local_WLC == "YES")
 !
 cts sxp enable
 cts sxp default password X6zWasOuIRHc
 cts sxp reconciliation period 10
 cts sxp connection peer ${WLC_MGMT_IP} source $loopback0-ip-address.ipv4Address password default mode local listener hold-time 0 0
 !
 #foreach ($interface in ${interfaces})
 #if(($interface.interfaceType == "Virtual") && ($interface.className == "VLANInterfaceExtended") && (($interface.portName.matches("Vlan80[1-9]")) || ($interface.portName.matches("Vlan8[1-4][0-9]"))))
  !
  int $interface.portName
   ip proxy-arp
   ip local-proxy-arp
   ip route-cache same-interface
  !
 #end
#end
!
#end
!
##turn on config authorization, as it was turned off before
!
aaa authorization config-commands
!

Required Parameters for template body: {"WLC_MGMT_IP":"","Local_WLC":""}

Bindings ['"hostname":"Inventory.Device"', '"interfaces":"Inventory.Interface"', '"zone":"Inventory.Device"', '"loopback0-ip-address":"Inventory.Interface"']

##---------ACLs--------
!
ip access-list extended SSH-UNRESTRICTED
 remark ******** Honeywell Access ********
 remark PRIME/APICEM/SNTC/DNA
 permit ip 10.193.94.0 0.0.0.255 any
 permit ip 10.217.94.0 0.0.0.255 any
 permit ip 10.239.94.0 0.0.0.255 any
 permit ip 10.79.19.0 0.0.0.255 any
 permit ip 10.195.2.200 0.0.0.7 any
 permit ip 10.238.1.8 0.0.0.7 any
 permit ip 10.79.19.96 0.0.0.7 any
##2 lines for QA-DNA
 permit ip 10.195.92.108 0.0.0.3 any
 permit ip 10.195.92.112 0.0.0.3 any
##
 remark Rapid7 servers
 permit ip host 10.224.29.136 any
 permit ip host 10.224.29.137 any
 permit ip host 10.195.27.20 any
 permit ip host 10.195.27.19 any
 permit ip host 10.224.32.35 any
 permit ip host 10.195.33.8 any
 permit ip host 10.224.180.34 any
 permit ip host 10.195.180.37 any
 permit ip host 10.224.29.142 any
 permit ip host 10.224.29.143 any
 permit ip host 10.195.27.39 any
 permit ip host 10.195.27.40 any
 permit ip host 10.195.26.245 any
 permit ip host 10.195.26.244 any
 permit ip host 10.195.26.246 any
 permit ip host 10.195.26.247 any
 permit ip host 10.224.26.12 any
 permit ip host 10.238.2.28 any
 permit ip host 10.238.2.132 any
 permit ip host 10.238.2.133 any
 remark IPSoft - Automation Initiative
 permit ip host 10.195.2.31 any
 permit ip host 10.195.2.65 any
 permit ip host 10.224.2.155 any
 permit ip host 10.224.2.173 any
 permit ip host 10.238.2.43 any
 permit ip host 10.78.4.84 any
 remark HRA ITGsupport AZ66
 permit ip 199.62.224.64 0.0.0.15 any
 permit ip 199.62.224.80 0.0.0.15 any
 permit ip 10.17.21.128 0.0.0.31 any
 permit ip 10.17.27.64 0.0.0.31 any
 remark HRA ITGsupport DCE
 permit ip 199.62.225.0 0.0.0.15 any
 permit ip 199.62.225.16 0.0.0.15 any
 permit ip 10.18.185.208 0.0.0.15 any
 permit ip 10.18.234.208 0.0.0.15 any
 remark HRA ITGsupport NL69
 permit ip 172.28.70.0 0.0.0.63 any
 permit ip 172.28.102.0 0.0.0.63 any
 permit ip 10.132.96.64 0.0.0.63 any
 permit ip 10.132.160.64 0.0.0.63 any
 remark HRA ITGsupport IE3B
 permit ip 172.21.60.192 0.0.0.63 any
 permit ip 172.21.188.192 0.0.0.63 any
 permit ip 10.68.113.0 0.0.0.63 any
 permit ip 10.68.179.128 0.0.0.63 any
 remark HRA Firewall DCW
 permit ip 199.62.224.0 0.0.0.31 any
 remark HRA Firewall DCE
 permit ip 199.62.225.128 0.0.0.31 any
 remark HRA Firewall New Subnets
 permit ip 10.132.156.16 0.0.0.7 any
 permit ip 10.132.92.16 0.0.0.7 any
 permit ip 10.18.186.48 0.0.0.7 any
 permit ip 10.18.235.48 0.0.0.7 any
 permit ip 10.68.178.160 0.0.0.7 any
 permit ip 10.17.186.120 0.0.0.7 any
 permit ip 10.17.28.0 0.0.0.7 any
 remark Firewall Group
 permit ip 137.160.213.0 0.0.0.255 any
 remark Firewall Appliance
 permit ip 10.195.106.0 0.0.0.255 any
 permit ip 10.224.106.0 0.0.0.255 any
 remark Honeywell APAC Jump Servers
 permit ip host 159.99.234.141 any
 permit ip host 159.99.234.143 any
 permit ip host 159.99.234.160 any
 permit ip host 159.99.234.235 any
 remark Honeywell EMEA Jump Server
 permit ip host 165.195.13.10 any
 remark SOC and Investigations
 permit ip 137.160.241.0 0.0.0.255 any
 remark DCE Loopbacks and OOB
 permit ip 10.223.225.0 0.0.0.255 any
 permit ip 10.223.250.0 0.0.0.255 any
 permit ip host 10.224.180.30 any
 permit ip host 10.195.180.41 any
!
line vty 0 15
 access-class SSH-UNRESTRICTED in
line vty 16 31
 access-class SSH-UNRESTRICTED in
!
ip access-list standard SNMP-HON-ACL
 remark PRIME/APICEM/LACTION/SNTC
 permit 10.193.94.0 0.0.0.255
 permit 10.217.94.0 0.0.0.255
 permit 10.239.94.0 0.0.0.255
 permit 159.99.255.138
 remark SNTC NL69
 permit 10.238.2.130
 remark SNTC IE3B
 permit 10.79.19.0 0.0.0.255
 remark BMC Discovery
 permit 10.192.42.108
 permit 10.216.17.80
 remark Global Monitoring
 permit 10.223.224.0 0.0.0.255
 permit 10.199.224.0 0.0.0.255
 permit 199.63.32.220
 permit 10.239.246.101
 remark EMEA Monitoring Server for BMW
 permit 165.195.13.10
 remark Nagios
 permit 10.194.12.126
 permit 10.218.131.131
 permit 10.238.2.92
 permit 199.63.86.122
 remark ServiceNow Discovery - Legacy DC
 permit 10.192.42.84
 permit 10.223.150.21
 permit 10.223.191.109
 permit 10.223.191.111
 permit 10.224.25.75
 remark ServiceNow Discovery - New DC
 permit 10.224.28.62
 permit 10.224.28.78
 permit 10.224.28.134
 permit 10.224.28.133
 permit 10.224.28.132
 permit 10.224.28.136
 permit 10.224.28.137
 permit 10.224.28.79
 permit 10.224.28.131
 permit 10.224.28.80
 permit 10.224.28.142
 permit 10.224.28.143
 permit 10.224.28.141
 permit 10.224.28.140
 permit 10.224.28.139
 permit 10.224.28.158
 permit 10.192.42.84
 permit 10.195.25.96
 permit 10.216.17.53
 permit 10.224.26.134
 permit 199.63.86.145
 permit 199.63.86.158
 permit 10.224.25.75
 permit 10.195.4.38
 permit 10.224.4.20
 permit 10.195.2.14
 permit 10.224.2.75
 permit 10.195.191.25
 permit 10.224.191.47
 remark Firewall Appliance
 permit 10.195.106.0 0.0.0.255
 permit 10.224.106.0 0.0.0.255
 remark IPSoft - Automation Initiative
 permit 10.195.2.31
 permit 10.195.2.65
 permit 10.224.2.155
 permit 10.224.2.173
 permit 10.238.2.43
 permit 10.78.4.84
 remark Cisco DNA Center
 permit 10.195.2.201
 permit 10.195.2.202
 permit 10.195.2.203
 permit 10.195.2.204
 permit 10.238.1.10
 permit 10.238.1.11
 permit 10.238.1.12
 permit 10.238.1.13
##4 lines for QA-DNA
 permit 10.195.92.110
 permit 10.195.92.111
 permit 10.195.92.112
 permit 10.195.92.113
##!
!
ip access-list standard SNMP-RO-ACL
 remark HONEYWELL ISE
 permit 10.217.94.0 0.0.0.255
 permit 10.217.95.0 0.0.0.255
 permit 10.239.95.0 0.0.0.255
 permit 10.79.15.128 0.0.0.31
 permit 10.195.2.32 0.0.0.15
!
##get LID from hostname
!
#set( $LID = $hostname.substring(0,4) )
!
##---------Banners--------
!
!
<MLTCMD>banner login &
Name: ${LID} - $(hostname)
&</MLTCMD>
!
<MLTCMD>banner motd &
*******************************************************************************************************
*                                         Warning:                                                    *
* Honeywell policies - including its Code of Business Conduct and its Acceptable Use of Information   *
* Resources Policy - govern access to this system and other information resources. The unauthorized   *
* use of any of the company's computers, electronic devices, or electronic systems is prohibited and  *
* may result in discipline and/or legal action.                                                       *
* The company reserves the right to monitor and audit all information resources without notice. No    *
* employee or agent of the company may waive this right. Any data stored on or transmitted through    *
* Honeywell information resources is not private. By logging on, you expressly consent to these terms.*
*******************************************************************************************************
&</MLTCMD>
!
<MLTCMD>banner exec &You are connected to $(hostname)
&</MLTCMD>
!

Required Parameters for template body: {}

Bindings ['"hostname":"Inventory.Device"']
##--------various hardening and vulnerability remediation configs applicable globally-------
!
!
##Q42020 - Rapid7 scan - remove weak SSH ciphers
!
no ip ssh server algorithm encryption 3des-cbc
no ip ssh client algorithm encryption 3des-cbc
no ip ssh client algorithm encryption aes128-cbc
no ip ssh server algorithm encryption aes192-cbc
no ip ssh server algorithm encryption aes256-cbc
no ip ssh server algorithm encryption aes128-cbc
no ip ssh client algorithm encryption aes192-cbc
no ip ssh client algorithm encryption aes256-cbc
!
no ip ssh server algorithm mac hmac-sha1-96
no ip ssh client algorithm mac hmac-sha1-96
!
##Q42020 - Rapid7 scan - remove DH-1 group
!
ip ssh dh min size 2048
!
##Q42020 - Rapid7 scan - ICMP Timestamp vulnerability
!
ip access-list extended ICMP-TIMESTAMP
 permit icmp any any timestamp-reply
 permit icmp any any timestamp-request
 deny   ip any any
class-map match-all ICMP-TIMESTAMP-DROP
 match access-group name ICMP-TIMESTAMP
policy-map system-cpp-policy
 class ICMP-TIMESTAMP-DROP
##  drop
!
##Q12021 - TCM Template for IOS 16
!
archive
 log config
  logging enable
  logging size 500
  hidekeys
!
#set($sign = "$")
##-------Local Credentials---------
!
enable secret 9 ${sign}9${sign}ffsLpTvImSSuy.${sign}/Y4MuNb5QMk.cWg9BzMht.YlaGnqFuhl8JA/JHZAcvg
!
username HonMgmtLocal secret 9 ${sign}9${sign}RFWzn1wtXoekJU${sign}cwDtLqjaKwv0Oj6zuSzgrLJtsV8XmPSGBSG/EiAENcs
!

PNP-cleanup 
##-----Various configs & PnP cleanup configs
!
##remove "-PNP" from hostname
!
#if($hostname.toString().contains("-PNP"))
 #set ($hostname-split = $hostname.split('-PNP'))
#elseif($hostname.toString().contains("."))
 #set ($hostname-split = $hostname.split('\.'))
#end
!
hostname $hostname-split.get(0)
!
## regnerate SSH keys, turn off IP lookup
!
crypto key generate rsa general-keys modulus 2048
!
no ip domain lookup
!
##remove all local hostnames pushed from DNAC during PnP
!
#INTERACTIVE
no username cisco <IQ>confirm<R>y
no username svc-hon-prime <IQ>confirm<R>y
#ENDS_INTERACTIVE
!
##line final config and cleanup
!
line con 0
 session-timeout 10
 exec-timeout 10 0
 no password
 login authentication default
!
line vty 0 15
 session-timeout 10
 exec-timeout 10 0
 no password
 login authentication default
!
line vty 16 31
 session-timeout 10
 exec-timeout 10 0
 no password
 login authentication default
!
##shut the management interface and fix AAA
##only if it is not used (does not shut when the switch is being staged over Gi0/0)
!
#if($interface.status == "down")
interface GigabitEthernet0/0
 shutdown
!
#end
!
## remove the configs containint Gi0/0
!
no ip http client source-interface GigabitEthernet0/0
no ip ssh source-interface GigabitEthernet0/0
!
##remove DHCP client ID from the MGMT interface
!
interface Vlan1000
 no ip dhcp client client-id
!
##cleanup interfaces
##Po1 is present after PNP if the device was connected to a portchannel on the uplink. Po1 is then present in the config, it is configured and has PNP description, so it needs to be removed.
##When we try to remove Po1 and it is not present, the template would fail. Therefore we workaround it by adding it and then deleting it here.
!
interface Port-channel1
no interface Port-channel1
!
##software auto-upgrade
!
software auto-upgrade enable
!



Required Parameters for template body: {"hostname-split":""}

Bindings ['"hostname":"Inventory.Device"', '"interface":"Inventory.Interface"']
#MODE_ENABLE
write memory
#END_MODE_ENABLE

## BCS_recommended_Config_Changes_Consolidated

##1## Disable any MD5 or 96-bit HMAC algorithms within the SSH configuration
no ip ssh server algorithm mac hmac-sha1-96
no ip ssh client algorithm mac hmac-sha1-96
!

##2## Disable SSH support for 3DES cipher suite
no ip ssh server algorithm encryption 3des-cbc
no ip ssh client algorithm encryption 3des-cbc
!
##3## Disable ICMP timestamp responses on Cisco IOS
ip access-list extended ICMP-TIMESTAMP
permit icmp any any timestamp-reply
permit icmp any any timestamp-request
deny   ip any any
class-map match-all ICMP-TIMESTAMP-DROP
match access-group name ICMP-TIMESTAMP
policy-map system-cpp-policy
class ICMP-TIMESTAMP-DROP
drop
##4## Disable NTP queries
##5## Restrict NTP readvar queries
!
ip access-list standard DENY-ANY-099
 deny any
!
ip access-list standard NTP-SERVERS
 remark *** HONEYWELL NTP SERVERS ***
 permit 199.63.64.181
 permit 10.199.222.33
 permit 10.223.222.83
!
ntp access-group peer NTP-SERVERS
ntp access-group serve DENY-ANY-099
ntp access-group serve-only DENY-ANY-099
ntp access-group query-only DENY-ANY-099
!
## switches should have already ntp source config present
##ntp source Vlan1000
!
##6## Disable SSH support for ssh-diffie-hellman-group1-sha1
ip ssh dh min size 2048

##7## Disable SSH support for CBC cipher suite
no ip ssh client algorithm encryption aes128-cbc
no ip ssh server algorithm encryption aes192-cbc
no ip ssh server algorithm encryption aes256-cbc
no ip ssh server algorithm encryption aes128-cbc
no ip ssh client algorithm encryption aes192-cbc
no ip ssh client algorithm encryption aes256-cbc
!

 ## SPlunk Logging
##logging host 10.224.20.28
logging host 10.224.20.28 transport udp port 5029
## updated ACL for Rapid7
no ip access-list extended SSH-UNRESTRICTED
ip access-list extended SSH-UNRESTRICTED
remark ******** Honeywell Access ********
remark PRIME/APICEM/SNTC/DNA
permit ip 10.193.94.0 0.0.0.255 any
permit ip 10.217.94.0 0.0.0.255 any
permit ip 10.239.94.0 0.0.0.255 any
permit ip 10.79.19.0 0.0.0.255 any
permit ip 10.195.2.200 0.0.0.7 any
permit ip 10.238.1.8 0.0.0.7 any
permit ip 10.79.19.96 0.0.0.7 any
remark Rapid7 servers
permit ip host 10.224.29.136 any
permit ip host 10.224.29.137 any
permit ip host 10.195.27.20 any
permit ip host 10.195.27.19 any
permit ip host 10.224.32.35 any
permit ip host 10.195.33.8 any
permit ip host 10.224.180.34 any
permit ip host 10.195.180.37 any
permit ip host 10.224.29.142 any
permit ip host 10.224.29.143 any
permit ip host 10.195.27.39 any
permit ip host 10.195.27.40 any
permit ip host 10.195.26.245 any
permit ip host 10.195.26.244 any
permit ip host 10.195.26.246 any
permit ip host 10.195.26.247 any
permit ip host 10.224.26.12 any
permit ip host 10.238.2.28 any
permit ip host 10.238.2.132 any
permit ip host 10.238.2.133 any
remark IPSoft - Automation Initiative
permit ip host 10.195.2.31 any
permit ip host 10.195.2.65 any
permit ip host 10.224.2.155 any
permit ip host 10.224.2.173 any
permit ip host 10.238.2.43 any
permit ip host 10.78.4.84 any
remark HRA ITGsupport AZ66
permit ip 199.62.224.64 0.0.0.15 any
permit ip 199.62.224.80 0.0.0.15 any
permit ip 10.17.21.128 0.0.0.31 any
permit ip 10.17.27.64 0.0.0.31 any
remark HRA ITGsupport DCE
permit ip 199.62.225.0 0.0.0.15 any
permit ip 199.62.225.16 0.0.0.15 any
permit ip 10.18.185.208 0.0.0.15 any
permit ip 10.18.234.208 0.0.0.15 any
remark HRA ITGsupport NL69
permit ip 172.28.70.0 0.0.0.63 any
permit ip 172.28.102.0 0.0.0.63 any
permit ip 10.132.96.64 0.0.0.63 any
permit ip 10.132.160.64 0.0.0.63 any
remark HRA ITGsupport IE3B
permit ip 172.21.60.192 0.0.0.63 any
permit ip 172.21.188.192 0.0.0.63 any
permit ip 10.68.113.0 0.0.0.63 any
permit ip 10.68.179.128 0.0.0.63 any
remark HRA Firewall DCW
permit ip 199.62.224.0 0.0.0.31 any
remark HRA Firewall DCE
permit ip 199.62.225.128 0.0.0.31 any
remark HRA Firewall New Subnets
permit ip 10.132.156.16 0.0.0.7 any
permit ip 10.132.92.16 0.0.0.7 any
permit ip 10.18.186.48 0.0.0.7 any
permit ip 10.18.235.48 0.0.0.7 any
permit ip 10.68.178.160 0.0.0.7 any
permit ip 10.17.186.120 0.0.0.7 any
permit ip 10.17.28.0 0.0.0.7 any
remark Firewall Group
permit ip 137.160.213.0 0.0.0.255 any
remark Firewall Appliance
permit ip 10.195.106.0 0.0.0.255 any
permit ip 10.224.106.0 0.0.0.255 any
remark Honeywell APAC Jump Servers
permit ip host 159.99.234.141 any
permit ip host 159.99.234.143 any
permit ip host 159.99.234.160 any
permit ip host 159.99.234.235 any
remark Honeywell EMEA Jump Server
permit ip host 165.195.13.10 any
remark SOC and Investigations
permit ip 137.160.241.0 0.0.0.255 any
remark DCE Loopbacks and OOB
permit ip 10.223.225.0 0.0.0.255 any
permit ip 10.223.250.0 0.0.0.255 any
permit ip host 10.224.180.30 any
permit ip host 10.195.180.41 any
!

!
<MLTCMD>banner motd ~ Warning:
Honeywell policies - including its Code of Business Conduct and its Acceptable Use of Information
Resources Policy - govern access to this system and other information resources. The unauthorized
use of any of the company's computers, electronic devices, or electronic systems is prohibited and
may result in discipline and/or legal action.
The company reserves the right to monitor and audit all information resources without notice. No
employee or agent of the company may waive this right. Any data stored on or transmitted through
Honeywell information resources is not private. By logging on, you expressly consent to these terms.
~</MLTCMD>
!

C:\Users\H421923\DNAC-TemplateProgrammer>python.exe template.py --template Hon-global-LAN-template/Hon-access-DayN Template
Enter DNAC URL :apac-dna.honeywell.com
usage: template.py [-h] [--template TEMPLATE] [--update UPDATE] [--device DEVICE] [--preview] [--force] [--params PARAMS] [--paramsfile PARAMSFILE] [--bulkfile BULKFILE] [-v]
template.py: error: unrecognized arguments: Template

C:\Users\H421923\DNAC-TemplateProgrammer>python.exe template.py --template "Hon-global-LAN-template/Hon-access-DayN Template"
Enter DNAC URL :apac-dna.honeywell.com
Looking for: Hon-global-LAN-template/Hon-access-DayN Template
https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template
TemplateId: 5cd20795-26c2-43a3-ab23-6386b1b44938 Version: 6

https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template/5cd20795-26c2-43a3-ab23-6386b1b44938
Showing Template Body:
{'name': 'Hon-access-DayN Template', 'description': '', 'author': 'h297951', 'deviceTypes': [{'productFamily': 'Switches and Hubs'}], 'softwareType': 'IOS-XE', 'softwareVariant': 'XE', 'templateContent': '[{"name":"Hon-access-QoS","id":"74cb6b7d-ee3a-4377-9131-a07468369de7","composite":false},{"name":"Hon-access-acl","id":"ce335f7c-e6b8-408a-ab83-b372af30ed00","composite":false},{"name":"Hon-access-ports-wireless ","id":"53b02fc7-915b-411b-b6b5-0ab6676e03b9","composite":false},{"name":"Hon-access-Uservlan-Banner","id":"8eaf5d59-55e5-4465-8f7b-6632fff5e0f0","composite":false}]', 'templateParams': [], 'rollbackTemplateParams': [], 'composite': True, 'containingTemplates': [{'name': 'Hon-access-QoS', 'id': '74cb6b7d-ee3a-4377-9131-a07468369de7', 'composite': False, 'projectName': 'Hon-global-LAN-template'}, {'name': 'Hon-access-acl', 'id': 'ce335f7c-e6b8-408a-ab83-b372af30ed00', 'composite': False, 'projectName': 'Hon-global-LAN-template'}, {'name': 'Hon-access-ports-wireless ', 'id': '53b02fc7-915b-411b-b6b5-0ab6676e03b9', 'composite': False, 'projectName': 'Hon-global-LAN-template'}, {'name': 'Hon-access-Uservlan-Banner', 'id': '8eaf5d59-55e5-4465-8f7b-6632fff5e0f0', 'composite': False, 'projectName': 'Hon-global-LAN-template'}], 'failurePolicy': 'CONTINUE_ON_ERROR', 'language': 'VELOCITY', 'id': '5cd20795-26c2-43a3-ab23-6386b1b44938', 'version': '6', 'customParamsOrder': False, 'createTime': 1594398135609, 'lastUpdateTime': 1594399125887, 'latestVersionTime': 1594399166001, 'projectName': 'Hon-global-LAN-template', 'projectId': '8cb3458d-ecdb-453d-9edc-5baf192c1dd3', 'parentTemplateId': '9821cf7c-65ff-4e68-b714-1636666711fd', 'validationErrors': {'templateErrors': [], 'rollbackTemplateErrors': [], 'templateId': '5cd20795-26c2-43a3-ab23-6386b1b44938'}, 'projectAssociated': True, 'documentDatabase': False}
[{"name":"Hon-access-QoS","id":"74cb6b7d-ee3a-4377-9131-a07468369de7","composite":false},{"name":"Hon-access-acl","id":"ce335f7c-e6b8-408a-ab83-b372af30ed00","composite":false},{"name":"Hon-access-ports-wireless ","id":"53b02fc7-915b-411b-b6b5-0ab6676e03b9","composite":false},{"name":"Hon-access-Uservlan-Banner","id":"8eaf5d59-55e5-4465-8f7b-6632fff5e0f0","composite":false}]

Required Parameters for template body: {}

Bindings []

!---QOS Access_list ---
!
ip access-list extended LYNC_voice
 permit tcp any any range 39040 39059
 permit udp any any range 39040 39059
 permit tcp any range 39040 39059 any
 permit udp any range 39040 39059 any

ip access-list extended LYNC_video
  permit udp any any range 39060 39079
 permit tcp any any range 39060 39079
 permit udp any range 39060 39079 any
 permit tcp any range 39060 39079 any

ip access-list extended LYNC_signaling
  permit tcp any any eq 5061
  permit tcp any eq 5061 any

ip access-list extended CAPWAP_control
  permit udp any any eq 5246


class-map match-any LYNC_voice
  match access-group name LYNC_voice
class-map match-any LYNC_video
  match access-group name LYNC_video
class-map match-any LYNC_signaling
  match access-group name LYNC_signaling
class-map match-any CAPWAP_control
  match access-group name CAPWAP_control


class-map egress_voice
 match dscp 40 46
class-map egress_video
  match dscp CS4 af41 af42 af43
class-map egress_critical
  match dscp af31
class-map egress_preferred
  match dscp af32 af33
class-map egress_net_control_mgmt
  match dscp cs6 AF22
class-map egress_signaling
  match dscp af21
class-map egress_bulk
  match dscp cs1



policy-map mark_user_interface
  class LYNC_voice
    set dscp ef
    police 160000 8000  conform-action transmit exceed-action drop
  class LYNC_video
    set dscp af41
  class LYNC_signaling
    set dscp af21
  class class-default
    set dscp default
!
policy-map mark_AP_wireless_interface
    class CAPWAP_control
      set dscp cs6
    class LYNC_voice
      set dscp ef
      police 1600000 8000 conform-action transmit exceed-action drop
    class LYNC_video
      set dscp af41
    class LYNC_signaling
      set dscp af21
    class class-default
      set dscp default

policy-map egress_queue
  class egress_voice
   priority level 1
   police rate percent 10
  class egress_video
    bandwidth remaining percent 34
    queue-buffers ratio 15
    queue-limit dscp AF43 percent 80
    queue-limit dscp AF42 percent 90
    queue-limit dscp AF41 percent 100
   class egress_critical
    bandwidth remaining percent 15
    queue-buffers ratio 10
   class egress_preferred
    bandwidth remaining percent 8
    queue-buffers ratio 10
    queue-limit dscp AF33 percent 80
    queue-limit dscp AF32 percent 100
   class egress_net_control_mgmt
    bandwidth remaining percent 9
    queue-buffers ratio 10
    queue-limit dscp AF23 percent 80
    queue-limit dscp AF22 percent 90
    queue-limit dscp CS6 percent 100
   class egress_signaling
     bandwidth remaining percent 8
     queue-buffers ratio 10
   class egress_bulk
     bandwidth remaining percent 1
     queue-buffers ratio 10
     queue-limit dscp AF13 percent 80
     queue-limit dscp AF12 percent 90
     queue-limit dscp AF11 percent 100
   class class-default
      bandwidth remaining percent 25
      queue-buffers ratio 25
!
!
!
!
<MLTCMD>banner motd ~ Warning:
Honeywell policies - including its Code of Business Conduct and its Acceptable Use of Information
Resources Policy - govern access to this system and other information resources. The unauthorized
use of any of the company's computers, electronic devices, or electronic systems is prohibited and
may result in discipline and/or legal action.
The company reserves the right to monitor and audit all information resources without notice. No
employee or agent of the company may waive this right. Any data stored on or transmitted through
Honeywell information resources is not private. By logging on, you expressly consent to these terms.
~</MLTCMD>
!
!
##set( $strippedhostname = $hostname.replace(".net.honeywell.com", "") )

##Name: ${strippedhostname}
!
!
##ip default-gateway ${MGMT_RS01}
!
##ip http client source-interface vlan 1000
ip ftp source-interface vlan 1000
ip tftp source-interface vlan 1000
##ip ssh source-interface Vlan1000
!

ip access-list extended SSH-UNRESTRICTED
remark ******** Honeywell Access ********
remark PRIME/APICEM/SNTC/DNA
permit ip 10.193.94.0 0.0.0.255 any
permit ip 10.217.94.0 0.0.0.255 any
permit ip 10.239.94.0 0.0.0.255 any
permit ip 10.79.19.0 0.0.0.255 any
permit ip 10.195.2.200 0.0.0.7 any
remark Rapid7 servers
permit ip host 10.224.24.215 any
permit ip host 10.224.24.216 any
permit ip host 10.224.24.217 any
permit ip host 10.224.24.218 any
permit ip host 10.224.26.12 any
permit ip host 10.224.26.14 any
permit ip host 10.224.26.105 any
permit ip host 10.224.26.109 any
permit ip host 10.195.24.205 any
permit ip host 10.195.24.206 any
permit ip host 10.195.24.207 any
permit ip host 10.195.24.208 any
permit ip host 10.195.25.216 any
permit ip host 10.195.25.217 any
permit ip host 10.238.2.28 any
permit ip host 10.238.2.132 any
permit ip host 10.238.2.133 any
remark IPSoft - Automation Initiative
permit ip host 10.195.2.31 any
permit ip host 10.195.2.65 any
permit ip host 10.224.2.155 any
permit ip host 10.224.2.173 any
permit ip host 10.238.2.43 any
permit ip host 10.78.4.84 any
remark HRA ITGsupport AZ66
permit ip 199.62.224.64 0.0.0.15 any
permit ip 199.62.224.80 0.0.0.15 any
permit ip 10.17.21.128 0.0.0.31 any
permit ip 10.17.27.64 0.0.0.31 any
remark HRA ITGsupport DCE
permit ip 199.62.225.0 0.0.0.15 any
permit ip 199.62.225.16 0.0.0.15 any
permit ip 10.18.185.208 0.0.0.15 any
permit ip 10.18.234.208 0.0.0.15 any
remark HRA ITGsupport NL69
permit ip 172.28.70.0 0.0.0.63 any
permit ip 172.28.102.0 0.0.0.63 any
permit ip 10.132.96.64 0.0.0.63 any
permit ip 10.132.160.64 0.0.0.63 any
remark HRA ITGsupport IE3B
permit ip 172.21.60.192 0.0.0.63 any
permit ip 172.21.188.192 0.0.0.63 any
permit ip 10.68.113.0 0.0.0.63 any
permit ip 10.68.179.128 0.0.0.63 any
remark HRA Firewall DCW
permit ip 199.62.224.0 0.0.0.31 any
remark HRA Firewall DCE
permit ip 199.62.225.128 0.0.0.31 any
remark HRA Firewall New Subnets
permit ip 10.132.156.16 0.0.0.7 any
permit ip 10.132.92.16 0.0.0.7 any
permit ip 10.18.186.48 0.0.0.7 any
permit ip 10.18.235.48 0.0.0.7 any
permit ip 10.68.178.160 0.0.0.7 any
permit ip 10.17.186.120 0.0.0.7 any
permit ip 10.17.28.0 0.0.0.7 any
remark Firewall Group
permit ip 137.160.213.0 0.0.0.255 any
remark Firewall Appliance
permit ip 10.195.106.0 0.0.0.255 any
permit ip 10.224.106.0 0.0.0.255 any
remark Honeywell APAC Jump Servers
permit ip host 159.99.234.141 any
permit ip host 159.99.234.143 any
permit ip host 159.99.234.160 any
permit ip host 159.99.234.235 any
remark Honeywell EMEA Jump Server
permit ip host 165.195.13.10 any
remark SOC and Investigations
permit ip 137.160.241.0 0.0.0.255 any
remark DCE Loopbacks and OOB
permit ip 10.223.225.0 0.0.0.255 any
permit ip 10.223.250.0 0.0.0.255 any
!
!
no ip access-list standard SNMP-HON-ACL
ip access-list standard SNMP-HON-ACL
remark PRIME/APICEM/LACTION/SNTC
 permit 10.193.94.0 0.0.0.255
 permit 10.217.94.0 0.0.0.255
 permit 10.239.94.0 0.0.0.255
 permit 159.99.255.138
remark SNTC NL69
 permit 10.238.2.130
remark SNTC IE3B
 permit 10.79.19.0 0.0.0.255
remark BMC Discovery
 permit 10.192.42.108
 permit 10.216.17.80
remark Global Monitoring
 permit 10.223.224.0 0.0.0.255
 permit 10.199.224.0 0.0.0.255
 permit 199.63.32.220
 permit 10.239.246.101
remark EMEA Monitoring Server for BMW
 permit 165.195.13.10
remark Nagios
 permit 10.194.12.126
 permit 10.218.131.131
 permit 10.238.2.92
 permit 199.63.86.122
remark ServiceNow Discovery - Legacy DC
 permit 10.192.42.84
 permit 10.223.150.21
 permit 10.223.191.109
 permit 10.223.191.111
 permit 10.224.25.75
remark ServiceNow Discovery - New DC
 permit 10.195.2.14
 permit 10.195.4.38
 permit 10.195.191.25
 permit 10.224.191.47
 permit 10.224.4.20
 permit 10.224.2.75
 permit 10.216.17.53
 permit 10.195.25.96
 permit 10.224.26.134
 permit 199.63.86.145
 permit 199.63.86.158
remark Firewall Appliance
 permit 10.195.106.0 0.0.0.255
 permit 10.224.106.0 0.0.0.255
remark IPSoft - Automation Initiative
 permit 10.195.2.31
 permit 10.195.2.65
 permit 10.224.2.155
 permit 10.224.2.173
 permit 10.238.2.43
 permit 10.78.4.84
remark Cisco DNA Center
 permit 10.195.2.201
 permit 10.195.2.202
 permit 10.195.2.203
 permit 10.195.2.204
end
!
#if ( $deploy_type == "Full_Refresh" )
no ip dhcp excluded-address ${VL1000_MGMT_IP}
no ip dhcp pool pnp_device_pool
#else
int vlan 1000
no shutdown

#if($all_int_vlanids.toString().contains(","))
#set ($vlans = $all_int_vlanids.split('\,'))

#else
#set ($vlans = $all_int_vlanids.split('\ '))
#end
#set ( $count = 0)
#foreach ($vlan in $vlans)
interface vlan ${vlan}
no shutdown
#end
#end

Required Parameters for template body: {"all_int_vlanids":"","VL1000_MGMT_IP":"","deploy_type":""}

C:\Users\H421923\DNAC-TemplateProgrammer>python.exe template.py --template Hon-global-LAN-template/Hon-core-DayN Template
Enter DNAC URL :apac-dna.honeywell.com
usage: template.py [-h] [--template TEMPLATE] [--update UPDATE] [--device DEVICE] [--preview] [--force] [--params PARAMS] [--paramsfile PARAMSFILE] [--bulkfile BULKFILE] [-v]
template.py: error: unrecognized arguments: Template

C:\Users\H421923\DNAC-TemplateProgrammer>python.exe template.py --template "Hon-global-LAN-template/Hon-core-DayN Template"
Enter DNAC URL :apac-dna.honeywell.com
Looking for: Hon-global-LAN-template/Hon-core-DayN Template
https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template
TemplateId: 25baee78-cd8f-479a-be71-b7a4dbb6b5b2 Version: 5

https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template/25baee78-cd8f-479a-be71-b7a4dbb6b5b2
Showing Template Body:
{'name': 'Hon-core-DayN Template', 'description': 'Core Template', 'author': 'h297951', 'deviceTypes': [{'productFamily': 'Switches and Hubs'}], 'softwareType': 'IOS-XE', 'softwareVariant': 'XE', 'templateContent': '[{"name":"Hon-core-QoS","id":"64dc864f-aef0-4a87-ad6f-983ef2c861fb","composite":false},{"name":"Hon-core-acl","id":"7e577185-b361-487d-a4a0-c41a48388f1b","composite":false},{"name":"Banner","id":"54f71d12-c627-4ffe-96ff-91cfa546a8d2","composite":false},{"name":"Hon-core-DHCP_Cleanup","id":"7497af09-f73d-4f6a-86bc-88d805f80a5a","composite":false}]', 'templateParams': [], 'rollbackTemplateParams': [], 'composite': True, 'containingTemplates': [{'name': 'Hon-core-QoS', 'id': '64dc864f-aef0-4a87-ad6f-983ef2c861fb', 'composite': False, 'projectName': 'Hon-global-LAN-template'}, {'name': 'Hon-core-acl', 'id': '7e577185-b361-487d-a4a0-c41a48388f1b', 'composite': False, 'projectName': 'Hon-global-LAN-template'}, {'name': 'Banner', 'id': '54f71d12-c627-4ffe-96ff-91cfa546a8d2', 'composite': False, 'projectName': 'Hon-global-LAN-template'}, {'name': 'Hon-core-DHCP_Cleanup', 'id': '7497af09-f73d-4f6a-86bc-88d805f80a5a', 'composite': False, 'projectName': 'Hon-global-LAN-template'}], 'failurePolicy': 'CONTINUE_ON_ERROR', 'language': 'VELOCITY', 'id': '25baee78-cd8f-479a-be71-b7a4dbb6b5b2', 'version': '5', 'customParamsOrder': False, 'createTime': 1594396959409, 'lastUpdateTime': 1594397876798, 'latestVersionTime': 1594399181807, 'projectName': 'Hon-global-LAN-template', 'projectId': '8cb3458d-ecdb-453d-9edc-5baf192c1dd3', 'parentTemplateId': '08a7d53b-c949-4680-a3e2-6fd18db4bf94', 'validationErrors': {'templateErrors': [], 'rollbackTemplateErrors': [], 'templateId': '25baee78-cd8f-479a-be71-b7a4dbb6b5b2'}, 'projectAssociated': True, 'documentDatabase': False}
[{"name":"Hon-core-QoS","id":"64dc864f-aef0-4a87-ad6f-983ef2c861fb","composite":false},{"name":"Hon-core-acl","id":"7e577185-b361-487d-a4a0-c41a48388f1b","composite":false},{"name":"Banner","id":"54f71d12-c627-4ffe-96ff-91cfa546a8d2","composite":false},{"name":"Hon-core-DHCP_Cleanup","id":"7497af09-f73d-4f6a-86bc-88d805f80a5a","composite":false}]


!---QOS Access_list ---
!
ip access-list extended LYNC_voice
 permit tcp any any range 39040 39059
 permit udp any any range 39040 39059
 permit tcp any range 39040 39059 any
 permit udp any range 39040 39059 any

ip access-list extended LYNC_video
 permit udp any any range 39060 39079
 permit tcp any any range 39060 39079
 permit udp any range 39060 39079 any
 permit tcp any range 39060 39079 any

ip access-list extended LYNC_signaling
  permit tcp any any eq 5061
  permit tcp any eq 5061 any

ip access-list extended CAPWAP_control
  permit udp any any eq 5246


class-map match-any LYNC_voice
  match access-group name LYNC_voice
class-map match-any LYNC_video
  match access-group name LYNC_video
class-map match-any LYNC_signaling
  match access-group name LYNC_signaling
class-map match-any CAPWAP_control
  match access-group name CAPWAP_control


class-map egress_voice
 match dscp 40 46
class-map egress_video
  match dscp CS4 af41 af42 af43
class-map egress_critical
  match dscp af31
class-map egress_preferred
  match dscp af32 af33
class-map egress_net_control_mgmt
  match dscp cs6 AF22
class-map egress_signaling
  match dscp af21
class-map egress_bulk
  match dscp cs1



policy-map mark_user_interface
  class LYNC_voice
    set dscp ef
    police 160000 8000  conform-action transmit exceed-action drop
  class LYNC_video
    set dscp af41
  class LYNC_signaling
    set dscp af21
  class class-default
    set dscp default
!
policy-map mark_AP_wireless_interface
    class CAPWAP_control
      set dscp cs6
    class LYNC_voice
      set dscp ef
      police 1600000 8000 conform-action transmit exceed-action drop
    class LYNC_video
      set dscp af41
    class LYNC_signaling
      set dscp af21
    class class-default
      set dscp default

policy-map egress_queue
  class egress_voice
   priority level 1
   police rate percent 10
  class egress_video
    bandwidth remaining percent 34
    queue-buffers ratio 15
    queue-limit dscp AF43 percent 80
    queue-limit dscp AF42 percent 90
    queue-limit dscp AF41 percent 100
   class egress_critical
    bandwidth remaining percent 15
    queue-buffers ratio 10
   class egress_preferred
    bandwidth remaining percent 8
    queue-buffers ratio 10
    queue-limit dscp AF33 percent 80
    queue-limit dscp AF32 percent 100
   class egress_net_control_mgmt
    bandwidth remaining percent 9
    queue-buffers ratio 10
    queue-limit dscp AF23 percent 80
    queue-limit dscp AF22 percent 90
    queue-limit dscp CS6 percent 100
   class egress_signaling
     bandwidth remaining percent 8
     queue-buffers ratio 10
   class egress_bulk
     bandwidth remaining percent 1
     queue-buffers ratio 10
     queue-limit dscp AF13 percent 80
     queue-limit dscp AF12 percent 90
     queue-limit dscp AF11 percent 100
   class class-default
      bandwidth remaining percent 25
      queue-buffers ratio 25
!

ip access-list extended SSH-UNRESTRICTED
remark ******** Honeywell Access ********
remark PRIME/APICEM/SNTC/DNA
permit ip 10.193.94.0 0.0.0.255 any
permit ip 10.217.94.0 0.0.0.255 any
permit ip 10.239.94.0 0.0.0.255 any
permit ip 10.79.19.0 0.0.0.255 any
permit ip 10.195.2.200 0.0.0.7 any
remark Rapid7 servers
permit ip host 10.224.24.215 any
permit ip host 10.224.24.216 any
permit ip host 10.224.24.217 any
permit ip host 10.224.24.218 any
permit ip host 10.224.26.12 any
permit ip host 10.224.26.14 any
permit ip host 10.224.26.105 any
permit ip host 10.224.26.109 any
permit ip host 10.195.24.205 any
permit ip host 10.195.24.206 any
permit ip host 10.195.24.207 any
permit ip host 10.195.24.208 any
permit ip host 10.195.25.216 any
permit ip host 10.195.25.217 any
permit ip host 10.238.2.28 any
permit ip host 10.238.2.132 any
permit ip host 10.238.2.133 any
remark IPSoft - Automation Initiative
permit ip host 10.195.2.31 any
permit ip host 10.195.2.65 any
permit ip host 10.224.2.155 any
permit ip host 10.224.2.173 any
permit ip host 10.238.2.43 any
permit ip host 10.78.4.84 any
remark HRA ITGsupport AZ66
permit ip 199.62.224.64 0.0.0.15 any
permit ip 199.62.224.80 0.0.0.15 any
permit ip 10.17.21.128 0.0.0.31 any
permit ip 10.17.27.64 0.0.0.31 any
remark HRA ITGsupport DCE
permit ip 199.62.225.0 0.0.0.15 any
permit ip 199.62.225.16 0.0.0.15 any
permit ip 10.18.185.208 0.0.0.15 any
permit ip 10.18.234.208 0.0.0.15 any
remark HRA ITGsupport NL69
permit ip 172.28.70.0 0.0.0.63 any
permit ip 172.28.102.0 0.0.0.63 any
permit ip 10.132.96.64 0.0.0.63 any
permit ip 10.132.160.64 0.0.0.63 any
remark HRA ITGsupport IE3B
permit ip 172.21.60.192 0.0.0.63 any
permit ip 172.21.188.192 0.0.0.63 any
permit ip 10.68.113.0 0.0.0.63 any
permit ip 10.68.179.128 0.0.0.63 any
remark HRA Firewall DCW
permit ip 199.62.224.0 0.0.0.31 any
remark HRA Firewall DCE
permit ip 199.62.225.128 0.0.0.31 any
remark HRA Firewall New Subnets
permit ip 10.132.156.16 0.0.0.7 any
permit ip 10.132.92.16 0.0.0.7 any
permit ip 10.18.186.48 0.0.0.7 any
permit ip 10.18.235.48 0.0.0.7 any
permit ip 10.68.178.160 0.0.0.7 any
permit ip 10.17.186.120 0.0.0.7 any
permit ip 10.17.28.0 0.0.0.7 any
remark Firewall Group
permit ip 137.160.213.0 0.0.0.255 any
remark Firewall Appliance
permit ip 10.195.106.0 0.0.0.255 any
permit ip 10.224.106.0 0.0.0.255 any
remark Honeywell APAC Jump Servers
permit ip host 159.99.234.141 any
permit ip host 159.99.234.143 any
permit ip host 159.99.234.160 any
permit ip host 159.99.234.235 any
remark Honeywell EMEA Jump Server
permit ip host 165.195.13.10 any
remark SOC and Investigations
permit ip 137.160.241.0 0.0.0.255 any
remark DCE Loopbacks and OOB
permit ip 10.223.225.0 0.0.0.255 any
permit ip 10.223.250.0 0.0.0.255 any
!
!
no ip access-list standard SNMP-HON-ACL
ip access-list standard SNMP-HON-ACL
remark PRIME/APICEM/LACTION/SNTC
 permit 10.193.94.0 0.0.0.255
 permit 10.217.94.0 0.0.0.255
 permit 10.239.94.0 0.0.0.255
 permit 159.99.255.138
remark SNTC NL69
 permit 10.238.2.130
remark SNTC IE3B
 permit 10.79.19.0 0.0.0.255
remark BMC Discovery
 permit 10.192.42.108
 permit 10.216.17.80
remark Global Monitoring
 permit 10.223.224.0 0.0.0.255
 permit 10.199.224.0 0.0.0.255
 permit 199.63.32.220
 permit 10.239.246.101
remark EMEA Monitoring Server for BMW
 permit 165.195.13.10
remark Nagios
 permit 10.194.12.126
 permit 10.218.131.131
 permit 10.238.2.92
 permit 199.63.86.122
remark ServiceNow Discovery - Legacy DC
 permit 10.192.42.84
 permit 10.223.150.21
 permit 10.223.191.109
 permit 10.223.191.111
 permit 10.224.25.75
remark ServiceNow Discovery - New DC
 permit 10.195.2.14
 permit 10.195.4.38
 permit 10.195.191.25
 permit 10.224.191.47
 permit 10.224.4.20
 permit 10.224.2.75
 permit 10.216.17.53
 permit 10.195.25.96
 permit 10.224.26.134
 permit 199.63.86.145
 permit 199.63.86.158
remark Firewall Appliance
 permit 10.195.106.0 0.0.0.255
 permit 10.224.106.0 0.0.0.255
remark IPSoft - Automation Initiative
 permit 10.195.2.31
 permit 10.195.2.65
 permit 10.224.2.155
 permit 10.224.2.173
 permit 10.238.2.43
 permit 10.78.4.84
remark Cisco DNA Center
 permit 10.195.2.201
 permit 10.195.2.202
 permit 10.195.2.203
 permit 10.195.2.204
end
!
C:\Users\H421923\DNAC-TemplateProgrammer>python.exe template.py --template Hon-global-LAN-template/Local_Credentials_UnRestricted_Site_New
Enter DNAC URL :apac-dna.honeywell.com
Looking for: Hon-global-LAN-template/Local_Credentials_UnRestricted_Site_New
https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template
TemplateId: b7949cd4-ee42-4435-af08-ddde7821a717 Version: 15

https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template/b7949cd4-ee42-4435-af08-ddde7821a717
Showing Template Body:
{'name': 'Local_Credentials_UnRestricted_Site_New', 'description': 'Rapid7_Splunk_ACL_Log', 'author': 'h440088', 'deviceTypes': [{'productFamily': 'Switches and Hubs'}], 'softwareType': 'IOS-XE', 'softwareVariant': 'XE', 'templateContent': 'enable algorithm-type scrypt secret $enablepassword\nusername $username algorithm-type scrypt secret $password\n#MODE_ENABLE\nwrite memory\n#MODE_END_ENABLE', 'rollbackTemplateContent': '', 'templateParams': [{'parameterName': 'enablepassword', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 1, 'customOrder': 0, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '646dff9b-1e5c-42e5-a2e1-dc0b82608ca2'}, {'parameterName': 'password', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 3, 'customOrder': 0, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '1f49f18a-bf47-4e17-8fa1-83a4d27a8022'}, {'parameterName': 'username', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 2, 'customOrder': 0, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '70e75f89-40b6-4d13-a404-47bdf3c9a980'}], 'rollbackTemplateParams': [], 'composite': False, 'containingTemplates': [], 'language': 'VELOCITY', 'id': 'b7949cd4-ee42-4435-af08-ddde7821a717', 'version': '15', 'customParamsOrder': False, 'createTime': 1610696283659, 'lastUpdateTime': 1614579604690, 'latestVersionTime': 1614581145906, 'projectName': 'Hon-global-LAN-template', 'projectId': '8cb3458d-ecdb-453d-9edc-5baf192c1dd3', 'parentTemplateId': 'b55f96a1-cb9a-47fa-8d89-14f270729067', 'validationErrors': {'templateErrors': [], 'rollbackTemplateErrors': [], 'templateId': 'b7949cd4-ee42-4435-af08-ddde7821a717'}, 'projectAssociated': True, 'documentDatabase': False}
enable algorithm-type scrypt secret $enablepassword
username $username algorithm-type scrypt secret $password
#MODE_ENABLE
write memory
#MODE_END_ENABLE

Required Parameters for template body: {"enablepassword":"","password":"","username":""}

https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template/3f13a5f0-8140-46da-b3f4-61e74557ef1f
Showing Template Body:
{'name': 'Local_Credentilas_UnRestrictedSite', 'description': 'Local_Credentilas_UnRestrictedSite', 'author': 'h440088', 'deviceTypes': [{'productFamily': 'Switches and Hubs'}], 'softwareType': 'IOS-XE', 'softwareVariant': 'XE', 'templateContent': '#INTERACTIVE\nno username fallback <IQ>confirm<R>y\nno username att-hon-bkup <IQ>confirm<R>y\nno username VZuser <IQ>confirm<R>y\n#ENDS_INTERACTIVE\n#MODE_ENABLE\nwrite memory\n#MODE_END_ENABLE\n', 'rollbackTemplateContent': '', 'templateParams': [], 'rollbackTemplateParams': [], 'composite': False, 'containingTemplates': [], 'language': 'VELOCITY', 'id': '3f13a5f0-8140-46da-b3f4-61e74557ef1f', 'version': '9', 'customParamsOrder': False, 'createTime': 1610367827322, 'lastUpdateTime': 1614582860767, 'latestVersionTime': 1614582872626, 'projectName': 'Hon-global-LAN-template', 'projectId': '8cb3458d-ecdb-453d-9edc-5baf192c1dd3', 'parentTemplateId': 'facf2eda-c83e-4993-8b35-025bf676296d', 'validationErrors': {'templateErrors': [], 'rollbackTemplateErrors': [], 'templateId': '3f13a5f0-8140-46da-b3f4-61e74557ef1f'}, 'projectAssociated': True, 'documentDatabase': False}
#INTERACTIVE
no username fallback <IQ>confirm<R>y
no username att-hon-bkup <IQ>confirm<R>y
no username VZuser <IQ>confirm<R>y
#ENDS_INTERACTIVE
#MODE_ENABLE
write memory
#MODE_END_ENABLE

## SPlunk Logging
logging host 10.224.20.28
## updated ACL for Rapid7
no ip access-list extended SSH-UNRESTRICTED
ip access-list extended SSH-UNRESTRICTED
remark ******** Honeywell Access ********
remark PRIME/APICEM/SNTC/DNA
permit ip 10.193.94.0 0.0.0.255 any
permit ip 10.217.94.0 0.0.0.255 any
permit ip 10.239.94.0 0.0.0.255 any
permit ip 10.79.19.0 0.0.0.255 any
permit ip 10.195.2.200 0.0.0.7 any
permit ip 10.238.1.8 0.0.0.7 any
permit ip 10.79.19.96 0.0.0.7 any
remark Rapid7 servers
permit ip host 10.224.29.136 any
permit ip host 10.224.29.137 any
permit ip host 10.195.27.20 any
permit ip host 10.195.27.19 any
permit ip host 10.224.32.35 any
permit ip host 10.195.33.8 any
permit ip host 10.224.180.34 any
permit ip host 10.195.180.37 any
permit ip host 10.224.29.142 any
permit ip host 10.224.29.143 any
permit ip host 10.195.27.39 any
permit ip host 10.195.27.40 any
permit ip host 10.195.26.245 any
permit ip host 10.195.26.244 any
permit ip host 10.195.26.246 any
permit ip host 10.195.26.247 any
permit ip host 10.224.26.12 any
permit ip host 10.238.2.28 any
permit ip host 10.238.2.132 any
permit ip host 10.238.2.133 any
remark IPSoft - Automation Initiative
permit ip host 10.195.2.31 any
permit ip host 10.195.2.65 any
permit ip host 10.224.2.155 any
permit ip host 10.224.2.173 any
permit ip host 10.238.2.43 any
permit ip host 10.78.4.84 any
remark HRA ITGsupport AZ66
permit ip 199.62.224.64 0.0.0.15 any
permit ip 199.62.224.80 0.0.0.15 any
permit ip 10.17.21.128 0.0.0.31 any
permit ip 10.17.27.64 0.0.0.31 any
remark HRA ITGsupport DCE
permit ip 199.62.225.0 0.0.0.15 any
permit ip 199.62.225.16 0.0.0.15 any
permit ip 10.18.185.208 0.0.0.15 any
permit ip 10.18.234.208 0.0.0.15 any
remark HRA ITGsupport NL69
permit ip 172.28.70.0 0.0.0.63 any
permit ip 172.28.102.0 0.0.0.63 any
permit ip 10.132.96.64 0.0.0.63 any
permit ip 10.132.160.64 0.0.0.63 any
remark HRA ITGsupport IE3B
permit ip 172.21.60.192 0.0.0.63 any
permit ip 172.21.188.192 0.0.0.63 any
permit ip 10.68.113.0 0.0.0.63 any
permit ip 10.68.179.128 0.0.0.63 any
remark HRA Firewall DCW
permit ip 199.62.224.0 0.0.0.31 any
remark HRA Firewall DCE
permit ip 199.62.225.128 0.0.0.31 any
remark HRA Firewall New Subnets
permit ip 10.132.156.16 0.0.0.7 any
permit ip 10.132.92.16 0.0.0.7 any
permit ip 10.18.186.48 0.0.0.7 any
permit ip 10.18.235.48 0.0.0.7 any
permit ip 10.68.178.160 0.0.0.7 any
permit ip 10.17.186.120 0.0.0.7 any
permit ip 10.17.28.0 0.0.0.7 any
remark Firewall Group
permit ip 137.160.213.0 0.0.0.255 any
remark Firewall Appliance
permit ip 10.195.106.0 0.0.0.255 any
permit ip 10.224.106.0 0.0.0.255 any
remark Honeywell APAC Jump Servers
permit ip host 159.99.234.141 any
permit ip host 159.99.234.143 any
permit ip host 159.99.234.160 any
permit ip host 159.99.234.235 any
remark Honeywell EMEA Jump Server
permit ip host 165.195.13.10 any
remark SOC and Investigations
permit ip 137.160.241.0 0.0.0.255 any
remark DCE Loopbacks and OOB
permit ip 10.223.225.0 0.0.0.255 any
permit ip 10.223.250.0 0.0.0.255 any
permit ip host 10.224.180.30 any
permit ip host 10.195.180.41 any
!


C:\Users\H421923\DNAC-TemplateProgrammer>python.exe template.py --template "Hon-global-LAN-template/Switch update post discovery"
Enter DNAC URL :apac-dna.honeywell.com
Looking for: Hon-global-LAN-template/Switch update post discovery
https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template
TemplateId: 9110b3c5-ff56-471c-9634-5fcedd5de4ea Version: 18

https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template/9110b3c5-ff56-471c-9634-5fcedd5de4ea
Showing Template Body:
{'name': 'Switch update post discovery', 'description': 'Template for switch post discovery ', 'author': 'h124739', 'deviceTypes': [{'productFamily': 'Switches and Hubs'}], 'softwareType': 'IOS-XE', 'softwareVariant': 'XE', 'templateContent': "ip domain name net.honeywell.com\nno ip access-list standard SSH-APAC\nip access-list extended SSH-UNRESTRICTED\nremark ******** Honeywell Access ********\nremark PRIME/APICEM/SNTC/DNA\npermit ip 10.193.94.0 0.0.0.255 any\npermit ip 10.217.94.0 0.0.0.255 any\npermit ip 10.239.94.0 0.0.0.255 any\npermit ip 10.79.19.0 0.0.0.255 any\npermit ip 10.195.2.200 0.0.0.7 any\npermit ip 10.238.1.8 0.0.0.7 any\npermit ip 10.79.19.96 0.0.0.7 any\nremark Rapid7 servers\npermit ip host 10.224.24.215 any\npermit ip host 10.224.24.216 any\npermit ip host 10.224.24.217 any\npermit ip host 10.224.24.218 any\npermit ip host 10.224.26.12 any\npermit ip host 10.224.26.14 any\npermit ip host 10.224.26.105 any\npermit ip host 10.224.26.109 any\npermit ip host 10.195.24.205 any\npermit ip host 10.195.24.206 any\npermit ip host 10.195.24.207 any\npermit ip host 10.195.24.208 any\npermit ip host 10.195.25.216 any\npermit ip host 10.195.25.217 any\npermit ip host 10.238.2.28 any\npermit ip host 10.238.2.132 any\npermit ip host 10.238.2.133 any\npermit ip host 10.224.180.30 any\npermit ip host 10.195.180.41 any\nremark IPSoft - Automation Initiative\npermit ip host 10.195.2.31 any\npermit ip host 10.195.2.65 any\npermit ip host 10.224.2.155 any\npermit ip host 10.224.2.173 any\npermit ip host 10.238.2.43 any\npermit ip host 10.78.4.84 any\nremark HRA ITGsupport AZ66\npermit ip 199.62.224.64 0.0.0.15 any\npermit ip 199.62.224.80 0.0.0.15 any\npermit ip 10.17.21.128 0.0.0.31 any\npermit ip 10.17.27.64 0.0.0.31 any\nremark HRA ITGsupport DCE\npermit ip 199.62.225.0 0.0.0.15 any\npermit ip 199.62.225.16 0.0.0.15 any\npermit ip 10.18.185.208 0.0.0.15 any\npermit ip 10.18.234.208 0.0.0.15 any\nremark HRA ITGsupport NL69\npermit ip 172.28.70.0 0.0.0.63 any\npermit ip 172.28.102.0 0.0.0.63 any\npermit ip 10.132.96.64 0.0.0.63 any\npermit ip 10.132.160.64 0.0.0.63 any\nremark HRA ITGsupport IE3B\npermit ip 172.21.60.192 0.0.0.63 any\npermit ip 172.21.188.192 0.0.0.63 any\npermit ip 10.68.113.0 0.0.0.63 any\npermit ip 10.68.179.128 0.0.0.63 any\nremark HRA Firewall DCW\npermit ip 199.62.224.0 0.0.0.31 any\nremark HRA Firewall DCE\npermit ip 199.62.225.128 0.0.0.31 any\nremark HRA Firewall New Subnets\npermit ip 10.132.156.16 0.0.0.7 any\npermit ip 10.132.92.16 0.0.0.7 any\npermit ip 10.18.186.48 0.0.0.7 any\npermit ip 10.18.235.48 0.0.0.7 any\npermit ip 10.68.178.160 0.0.0.7 any\npermit ip 10.17.186.120 0.0.0.7 any\npermit ip 10.17.28.0 0.0.0.7 any\nremark Firewall Group\npermit ip 137.160.213.0 0.0.0.255 any\nremark Firewall Appliance\npermit ip 10.195.106.0 0.0.0.255 any\npermit ip 10.224.106.0 0.0.0.255 any\nremark Honeywell APAC Jump Servers\npermit ip host 159.99.234.141 any\npermit ip host 159.99.234.143 any\npermit ip host 159.99.234.160 any\npermit ip host 159.99.234.235 any\nremark Honeywell EMEA Jump Server\npermit ip host 165.195.13.10 any\nremark SOC and Investigations\npermit ip 137.160.241.0 0.0.0.255 any\nremark DCE Loopbacks and OOB\npermit ip 10.223.225.0 0.0.0.255 any\npermit ip 10.223.250.0 0.0.0.255 any\n!\nline vty 0 4\naccess-class SSH-UNRESTRICTED in\nline vty 5 15\naccess-class SSH-UNRESTRICTED in\n!\nno ip access-list standard SNMP-HON-ACL\nip access-list standard SNMP-HON-ACL\nremark PRIME/APICEM/LACTION/SNTC\n permit 10.193.94.0 0.0.0.255\n permit 10.217.94.0 0.0.0.255\n permit 10.239.94.0 0.0.0.255\n permit 159.99.255.138\nremark SNTC NL69\n permit 10.238.2.130\nremark SNTC IE3B\n permit 10.79.19.0 0.0.0.255\nremark BMC Discovery\n permit 10.192.42.108\n permit 10.216.17.80\nremark Global Monitoring\n permit 10.223.224.0 0.0.0.255\n permit 10.199.224.0 0.0.0.255\n permit 199.63.32.220\n permit 10.239.246.101\nremark EMEA Monitoring Server for BMW\n permit 165.195.13.10\nremark Nagios\n permit 10.194.12.126\n permit 10.218.131.131\n permit 10.238.2.92\n permit 199.63.86.122\nremark ServiceNow Discovery - Legacy DC\n permit 10.192.42.84\n permit 10.223.150.21\n permit 10.223.191.109\n permit 10.223.191.111\n permit 10.224.25.75\nremark ServiceNow Discovery - New DC\n permit 10.224.28.62\n permit 10.224.28.78\n permit 10.224.28.134\n permit 10.224.28.133\n permit 10.224.28.132\n permit 10.224.28.136\n permit 10.224.28.137\n permit 10.224.28.79\n permit 10.224.28.131\n permit 10.224.28.80\n permit 10.224.28.142\n permit 10.224.28.143\n permit 10.224.28.141\n permit 10.224.28.140\n permit 10.224.28.139\n permit 10.224.28.158\n permit 10.192.42.84\n permit 10.195.25.96\n permit 10.216.17.53\n permit 10.224.26.134\n permit 199.63.86.145\n permit 199.63.86.158\n permit 10.224.25.75\n permit 10.195.4.38\n permit 10.224.4.20\n permit 10.195.2.14\n permit 10.224.2.75\n permit 10.195.191.25\n permit 10.224.191.47\nremark Firewall Appliance\n permit 10.195.106.0 0.0.0.255\n permit 10.224.106.0 0.0.0.255\nremark IPSoft - Automation Initiative\n permit 10.195.2.31\n permit 10.195.2.65\n permit 10.224.2.155\n permit 10.224.2.173\n permit 10.238.2.43\n permit 10.78.4.84\nremark Cisco DNA Center\n permit 10.195.2.201\n permit 10.195.2.202\n permit 10.195.2.203\n permit 10.195.2.204\n permit 10.238.1.10\n permit 10.238.1.11\n permit 10.238.1.12\n permit 10.238.1.13\n permit 10.79.19.100\n permit 10.79.19.101\n permit 10.79.19.102\n permit 10.79.19.103\n!\n!\ndevice-tracking policy IPDT_MAX_10\nsecurity-level glean\nno protocol ndp\ntracking enable reachable-lifetime 10\n!\n!\n<MLTCMD>banner motd ~ Warning:\nHoneywell policies - including its Code of Business Conduct and its Acceptable Use of Information\nResources Policy - govern access to this system and other information resources. The unauthorized\nuse of any of the company's computers, electronic devices, or electronic systems is prohibited and\nmay result in discipline and/or legal action.\nThe company reserves the right to monitor and audit all information resources without notice. No\nemployee or agent of the company may waive this right. Any data stored on or transmitted through\nHoneywell information resources is not private. By logging on, you expressly consent to these terms.\n~</MLTCMD>\n!", 'rollbackTemplateContent': '', 'templateParams': [], 'rollbackTemplateParams': [], 'composite': False, 'containingTemplates': [], 'language': 'VELOCITY', 'id': '9110b3c5-ff56-471c-9634-5fcedd5de4ea', 'version': '18', 'customParamsOrder': False, 'createTime': 1594140510189, 'lastUpdateTime': 1602493257005, 'latestVersionTime': 1602493334495, 'projectName': 'Hon-global-LAN-template', 'projectId': '8cb3458d-ecdb-453d-9edc-5baf192c1dd3', 'parentTemplateId': '6fb6deab-e736-4859-959a-fad0cf63369e', 'validationErrors': {'templateErrors': [], 'rollbackTemplateErrors': [], 'templateId': '9110b3c5-ff56-471c-9634-5fcedd5de4ea'}, 'projectAssociated': True, 'documentDatabase': False}
ip domain name net.honeywell.com
no ip access-list standard SSH-APAC
ip access-list extended SSH-UNRESTRICTED
remark ******** Honeywell Access ********
remark PRIME/APICEM/SNTC/DNA
permit ip 10.193.94.0 0.0.0.255 any
permit ip 10.217.94.0 0.0.0.255 any
permit ip 10.239.94.0 0.0.0.255 any
permit ip 10.79.19.0 0.0.0.255 any
permit ip 10.195.2.200 0.0.0.7 any
permit ip 10.238.1.8 0.0.0.7 any
permit ip 10.79.19.96 0.0.0.7 any
remark Rapid7 servers
permit ip host 10.224.24.215 any
permit ip host 10.224.24.216 any
permit ip host 10.224.24.217 any
permit ip host 10.224.24.218 any
permit ip host 10.224.26.12 any
permit ip host 10.224.26.14 any
permit ip host 10.224.26.105 any
permit ip host 10.224.26.109 any
permit ip host 10.195.24.205 any
permit ip host 10.195.24.206 any
permit ip host 10.195.24.207 any
permit ip host 10.195.24.208 any
permit ip host 10.195.25.216 any
permit ip host 10.195.25.217 any
permit ip host 10.238.2.28 any
permit ip host 10.238.2.132 any
permit ip host 10.238.2.133 any
permit ip host 10.224.180.30 any
permit ip host 10.195.180.41 any
remark IPSoft - Automation Initiative
permit ip host 10.195.2.31 any
permit ip host 10.195.2.65 any
permit ip host 10.224.2.155 any
permit ip host 10.224.2.173 any
permit ip host 10.238.2.43 any
permit ip host 10.78.4.84 any
remark HRA ITGsupport AZ66
permit ip 199.62.224.64 0.0.0.15 any
permit ip 199.62.224.80 0.0.0.15 any
permit ip 10.17.21.128 0.0.0.31 any
permit ip 10.17.27.64 0.0.0.31 any
remark HRA ITGsupport DCE
permit ip 199.62.225.0 0.0.0.15 any
permit ip 199.62.225.16 0.0.0.15 any
permit ip 10.18.185.208 0.0.0.15 any
permit ip 10.18.234.208 0.0.0.15 any
remark HRA ITGsupport NL69
permit ip 172.28.70.0 0.0.0.63 any
permit ip 172.28.102.0 0.0.0.63 any
permit ip 10.132.96.64 0.0.0.63 any
permit ip 10.132.160.64 0.0.0.63 any
remark HRA ITGsupport IE3B
permit ip 172.21.60.192 0.0.0.63 any
permit ip 172.21.188.192 0.0.0.63 any
permit ip 10.68.113.0 0.0.0.63 any
permit ip 10.68.179.128 0.0.0.63 any
remark HRA Firewall DCW
permit ip 199.62.224.0 0.0.0.31 any
remark HRA Firewall DCE
permit ip 199.62.225.128 0.0.0.31 any
remark HRA Firewall New Subnets
permit ip 10.132.156.16 0.0.0.7 any
permit ip 10.132.92.16 0.0.0.7 any
permit ip 10.18.186.48 0.0.0.7 any
permit ip 10.18.235.48 0.0.0.7 any
permit ip 10.68.178.160 0.0.0.7 any
permit ip 10.17.186.120 0.0.0.7 any
permit ip 10.17.28.0 0.0.0.7 any
remark Firewall Group
permit ip 137.160.213.0 0.0.0.255 any
remark Firewall Appliance
permit ip 10.195.106.0 0.0.0.255 any
permit ip 10.224.106.0 0.0.0.255 any
remark Honeywell APAC Jump Servers
permit ip host 159.99.234.141 any
permit ip host 159.99.234.143 any
permit ip host 159.99.234.160 any
permit ip host 159.99.234.235 any
remark Honeywell EMEA Jump Server
permit ip host 165.195.13.10 any
remark SOC and Investigations
permit ip 137.160.241.0 0.0.0.255 any
remark DCE Loopbacks and OOB
permit ip 10.223.225.0 0.0.0.255 any
permit ip 10.223.250.0 0.0.0.255 any
!
line vty 0 4
access-class SSH-UNRESTRICTED in
line vty 5 15
access-class SSH-UNRESTRICTED in
!
no ip access-list standard SNMP-HON-ACL
ip access-list standard SNMP-HON-ACL
remark PRIME/APICEM/LACTION/SNTC
 permit 10.193.94.0 0.0.0.255
 permit 10.217.94.0 0.0.0.255
 permit 10.239.94.0 0.0.0.255
 permit 159.99.255.138
remark SNTC NL69
 permit 10.238.2.130
remark SNTC IE3B
 permit 10.79.19.0 0.0.0.255
remark BMC Discovery
 permit 10.192.42.108
 permit 10.216.17.80
remark Global Monitoring
 permit 10.223.224.0 0.0.0.255
 permit 10.199.224.0 0.0.0.255
 permit 199.63.32.220
 permit 10.239.246.101
remark EMEA Monitoring Server for BMW
 permit 165.195.13.10
remark Nagios
 permit 10.194.12.126
 permit 10.218.131.131
 permit 10.238.2.92
 permit 199.63.86.122
remark ServiceNow Discovery - Legacy DC
 permit 10.192.42.84
 permit 10.223.150.21
 permit 10.223.191.109
 permit 10.223.191.111
 permit 10.224.25.75
remark ServiceNow Discovery - New DC
 permit 10.224.28.62
 permit 10.224.28.78
 permit 10.224.28.134
 permit 10.224.28.133
 permit 10.224.28.132
 permit 10.224.28.136
 permit 10.224.28.137
 permit 10.224.28.79
 permit 10.224.28.131
 permit 10.224.28.80
 permit 10.224.28.142
 permit 10.224.28.143
 permit 10.224.28.141
 permit 10.224.28.140
 permit 10.224.28.139
 permit 10.224.28.158
 permit 10.192.42.84
 permit 10.195.25.96
 permit 10.216.17.53
 permit 10.224.26.134
 permit 199.63.86.145
 permit 199.63.86.158
 permit 10.224.25.75
 permit 10.195.4.38
 permit 10.224.4.20
 permit 10.195.2.14
 permit 10.224.2.75
 permit 10.195.191.25
 permit 10.224.191.47
remark Firewall Appliance
 permit 10.195.106.0 0.0.0.255
 permit 10.224.106.0 0.0.0.255
remark IPSoft - Automation Initiative
 permit 10.195.2.31
 permit 10.195.2.65
 permit 10.224.2.155
 permit 10.224.2.173
 permit 10.238.2.43
 permit 10.78.4.84
remark Cisco DNA Center
 permit 10.195.2.201
 permit 10.195.2.202
 permit 10.195.2.203
 permit 10.195.2.204
 permit 10.238.1.10
 permit 10.238.1.11
 permit 10.238.1.12
 permit 10.238.1.13
 permit 10.79.19.100
 permit 10.79.19.101
 permit 10.79.19.102
 permit 10.79.19.103
!
!
device-tracking policy IPDT_MAX_10
security-level glean
no protocol ndp
tracking enable reachable-lifetime 10
!
!
<MLTCMD>banner motd ~ Warning:
Honeywell policies - including its Code of Business Conduct and its Acceptable Use of Information
Resources Policy - govern access to this system and other information resources. The unauthorized
use of any of the company's computers, electronic devices, or electronic systems is prohibited and
may result in discipline and/or legal action.
The company reserves the right to monitor and audit all information resources without notice. No
employee or agent of the company may waive this right. Any data stored on or transmitted through
Honeywell information resources is not private. By logging on, you expressly consent to these terms.
~</MLTCMD>
!
!
ip domain name net.honeywell.com
!
logging buffered 16384 debugging
logging console notifications
logging trap informational
!
line con 0
 exec-timeout 10 0
!
line vty 0 15
 exec-timeout 10 0
!
archive
 log config
  logging enable
  logging size 500
  hidekeys
!
#MODE_ENABLE
write memory
#MODE_END_ENABLE

C:\Users\H421923\DNAC-TemplateProgrammer>python.exe template.py --template Onboarding Configuration/Hon-access-initial-template
Enter DNAC URL :apac-dna.honeywell.com
usage: template.py [-h] [--template TEMPLATE] [--update UPDATE] [--device DEVICE] [--preview] [--force] [--params PARAMS] [--paramsfile PARAMSFILE] [--bulkfile BULKFILE] [-v]
template.py: error: unrecognized arguments: Configuration/Hon-access-initial-template

C:\Users\H421923\DNAC-TemplateProgrammer>python.exe template.py --template "Onboarding Configuration/Hon-access-initial-template"
Enter DNAC URL :apac-dna.honeywell.com
Looking for: Onboarding Configuration/Hon-access-initial-template
https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template
TemplateId: 838b8930-6893-4d91-9708-7afb1e5979b2 Version: 2

https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template/838b8930-6893-4d91-9708-7afb1e5979b2
Showing Template Body:
{'name': 'Hon-access-initial-template', 'description': 'access initial template ', 'author': 'h414283', 'deviceTypes': [{'productFamily': 'Switches and Hubs'}], 'softwareType': 'IOS-XE', 'softwareVariant': 'XE', 'templateContent': '##get LID from hostname variable\n#set( $LID = $hostname.substring(0,4) )\n!\n##set the variables so they wont appear in the list of the GUI variables as these are used only inside of the template scripts.\n#set($vlans = [])\n!\n##------ Nonessential services----\n!\nno service pad\nno service udp-small-servers\nno service tcp-small-servers\nno ip finger\t\t\t\t\t   \nno ip bootp server\nno platform punt-keepalive disable-kernel-core\nno ip source-route\nno ip http server\nno ip http secure-server\n!\n## access switch specific\nno service dhcp\n!\n##------ Active services----\n!\nservice tcp-keepalives-in\nservice tcp-keepalives-out\nservice timestamps debug datetime msec show-timezone\nservice timestamps log datetime msec show-timezone\nservice password-encryption\n!\ncdp run\nlldp run\n!\n##------ Basic configuration----\n!\nhostname ${hostname}-PNP\n!\nno aaa new-model\n!\n## following enable/username configs are used only for PnP staging, the correct Honeywell enable/username passwords are defined in Day-N templates\n!\nenable secret HonMgmtLocal\n!\nusername HonMgmtLocal secret HonMgmtLocal\n!\nip domain-name net.honeywell.com\n!\nno ip domain-lookup\n!\nip ssh version 2\nip ssh time-out 60\nip ssh authentication-retries 3\nip ssh source-interface vlan1000\n!\ncrypto key generate rsa general-keys modulus 2048 \n!\nerrdisable recovery cause udld\nerrdisable recovery cause bpduguard\nerrdisable recovery cause channel-misconfig\nerrdisable recovery cause link-flap\nerrdisable recovery cause psecure-violation\nerrdisable recovery cause port-mode-failure\nerrdisable recovery cause dhcp-rate-limit\nerrdisable recovery cause mac-limit\nerrdisable recovery cause inline-power\n!\nip ftp source-interface Vlan1000\nip tftp source-interface Vlan1000\n!\n##---------VTP-------\n!\nvtp mode off\n!\n##---------Spanning Tree Protocol and Associated Protocols -------\n!\nspanning-tree mode rapid-pvst\nspanning-tree loopguard default\nspanning-tree portfast bpduguard default\nspanning-tree extend system-id\n!\nudld enable\n!\n##---------Layer2--------\n!\n!\n##Vlan Description\n##split vlan IDs list by either comma or space, then configure all the user VLANs and other basic VLANs\n!\n#if($user_vlanids.toString().contains(","))\n#set ($vlans = $user_vlanids.split(\'\\,\'))\n#else\n#set ($vlans = $user_vlanids.split(\'\\ \'))\n#end\n!\n#foreach ($vlan in $vlans)\n !\n vlan ${vlan}\n  name User_${vlan} \n ! \n#end\n!\nvlan 710\n name Voice\n!\nvlan 999\n name NATIVE_vlan\n!\nvlan 805\n name WLAN-Mgmt\n!\nvlan 1000\n name Network-Mgmt\n!\n##---------Layer3--------\n!\n!\ninterface Vlan1\n shutdown\n!\ninterface Vlan1000\n Description |MANAGEMENT|\n ip address ${Network-Mgmt_IP} ${Network-Mgmt_Mask}\n no ip redirects\n no ip unreachables\n no ip proxy-arp\n no shutdown\n!\nno ip routing\n!\nip default-gateway ${default_gateway}\n!\n## --------VTY Lines-----------------\n!\nline con 0\t\t\t  \n login local\n logging synchronous\n!\nline vty 0 15\n login local\n transport input ssh\n logging synchronous\n!\nline vty 16 31\n login local\n transport input ssh\n logging synchronous\n!\n##-------DHCP snooping----------\n!\nip dhcp snooping vlan 1-4094\nip dhcp snooping\n!\n!\n##---------QoS--------\n## Qos is here so we can apply qos to interfaces now and do not have to do it later\n!\n!\nip access-list extended LYNC_voice\n permit tcp any any range 39040 39059\n permit udp any any range 39040 39059\n permit tcp any range 39040 39059 any\n permit udp any range 39040 39059 any\n!\nip access-list extended LYNC_video\n permit udp any any range 39060 39079\n permit tcp any any range 39060 39079\n permit udp any range 39060 39079 any\n permit tcp any range 39060 39079 any\n!\nip access-list extended LYNC_signaling\n  permit tcp any any eq 5061\n  permit tcp any eq 5061 any \n!\nip access-list extended CAPWAP_control\n  permit udp any any eq 5246\n!\nclass-map match-any LYNC_voice\n  match access-group name LYNC_voice\nclass-map match-any LYNC_video\n  match access-group name LYNC_video\nclass-map match-any LYNC_signaling\n  match access-group name LYNC_signaling\nclass-map match-any CAPWAP_control\n  match access-group name CAPWAP_control\n!\nclass-map egress_voice\n match dscp 40 46\nclass-map egress_video \n  match dscp CS4 af41 af42 af43\nclass-map egress_critical\n  match dscp af31\nclass-map egress_preferred\n  match dscp af32 af33\nclass-map egress_net_control_mgmt\n  match dscp cs6 AF22\nclass-map egress_signaling\n  match dscp af21\nclass-map egress_bulk\n  match dscp cs1\n!\npolicy-map mark_user_interface\n  class LYNC_voice\n    set dscp ef\n    police 160000 8000  conform-action transmit exceed-action drop \n  class LYNC_video\n    set dscp af41\n  class LYNC_signaling\n    set dscp af21\n  class class-default\n    set dscp default \n!\npolicy-map mark_AP_wireless_interface\n    class CAPWAP_control\n      set dscp cs6\n    class LYNC_voice\n      set dscp ef\n      police 1600000 8000 conform-action transmit exceed-action drop\n    class LYNC_video\n      set dscp af41\n    class LYNC_signaling\n      set dscp af21\n    class class-default\n      set dscp default\n!\npolicy-map egress_queue\n  class egress_voice\n   priority level 1\n   police rate percent 10\n  class egress_video\n    bandwidth remaining percent 34\n    queue-buffers ratio 15\n    queue-limit dscp AF43 percent 80\n    queue-limit dscp AF42 percent 90\n    queue-limit dscp AF41 percent 100\n   class egress_critical  \n    bandwidth remaining percent 15\n    queue-buffers ratio 10   \n   class egress_preferred\n    bandwidth remaining percent 8\n    queue-buffers ratio 10\n    queue-limit dscp AF33 percent 80\n    queue-limit dscp AF32 percent 100\n   class egress_net_control_mgmt\n    bandwidth remaining percent 9\n    queue-buffers ratio 10\n    queue-limit dscp AF23 percent 80\n    queue-limit dscp AF22 percent 90\n    queue-limit dscp CS6 percent 100\n   class egress_signaling\n     bandwidth remaining percent 8\n     queue-buffers ratio 10   \n   class egress_bulk\n     bandwidth remaining percent 1\n     queue-buffers ratio 10\n     queue-limit dscp AF13 percent 80\n     queue-limit dscp AF12 percent 90\n     queue-limit dscp AF11 percent 100\n   class class-default\n      bandwidth remaining percent 25\n      queue-buffers ratio 25\n!\npolicy-map mark_SBA_interface\n class LYNC_voice\n  set dscp ef\n class LYNC_video\n  set dscp af41\n class LYNC_signaling\n  set dscp af21\n class class-default\n  set dscp default\n!\npolicy-map SBA_egress_queue\n class egress_voice\n  priority level 1\n  police rate percent 50\n class egress_video\n  bandwidth remaining percent 5\n class egress_critical\n  bandwidth remaining percent 5\n class egress_preferred\n  bandwidth remaining percent 5\n class egress_net_control_mgmt\n  bandwidth remaining percent 10\n  queue-buffers ratio 10\n class egress_signaling\n  bandwidth remaining percent 20\n  queue-buffers ratio 30\n class egress_bulk\n  bandwidth remaining percent 5\n  queue-buffers ratio 10\n class class-default\n  bandwidth remaining percent 50\n  queue-buffers ratio 25\n!\n## ------ shutdown unprovisioned ports ----\n## this is needed here because then we will configure the uplinks. If this would be in the Day-N template, we would need to develop a script to check which ports are used and which not\n!\n## 1) prepare the variables\n!\n#set ( $count = 0)\n#set ($Uplink1 = "")\n#set ($Uplink2 = "")\n#set ($index = -1)\n!\n## 2) prepare uplink substrings so the uplinks are not shutdown\n!\n#if ($Uplink_PORT1.toString().contains("/1/"))\n #set ($index = $Uplink_PORT1.indexOf(\'/1/\'))\n#elseif ($Uplink_PORT1.toString().contains("/0/"))\n #set ($index = $Uplink_PORT1.indexOf(\'/0/\'))\n#end\n#if ($index >= 0)\n #set ($index = $index - 1)\n #set ($Uplink1 = $Uplink_PORT1.substring($index))\n#end\n!\n#if ($Uplink_PORT2.toString().contains("/1/"))\n #set ($index = $Uplink_PORT2.indexOf(\'/1/\'))\n#elseif ($Uplink_PORT2.toString().contains("/0/"))\n #set ($index = $Uplink_PORT2.indexOf(\'/0/\'))\n#end\n#if ($index >= 0)\n #set ($index = $index - 1)\n #set ($Uplink2 = $Uplink_PORT2.substring($index))\n#end\n!\n## 3) for each model, go through all interfaces, check if it is the specified uplink and if not, shut it down.\n!\n##C9300 - currently only 9300 is allowed, so the IF statement is not needed\n##if ( $switch_model.toString().contains("c9300"))\n #foreach($switch_stack_member in [1..${switch_stack_members}])\n  #foreach($count in [1..4])\n   #if((($Uplink_PORT1.startsWith("Gi")) && ($Uplink1 != "${switch_stack_member}/1/${count}" && $Uplink2 != "${switch_stack_member}/1/${count}")) || $Uplink_PORT1.startsWith("Gi") == "false")\n    interface GigabitEthernet ${switch_stack_member}/1/${count}\n     shutdown\n   #end\n  #end\n  #foreach($count in [1..8])\n   #if((($Uplink_PORT1.startsWith("Te")) && ($Uplink1 != "${switch_stack_member}/1/${count}" && $Uplink2 != "${switch_stack_member}/1/${count}")) || $Uplink_PORT1.startsWith("Te") == "false")\n    interface TenGigabitEthernet ${switch_stack_member}/1/${count}\n     shutdown\n   #end\n  #end\n  #foreach($count in [1..2])\n   #if((($Uplink_PORT1.startsWith("Fo")) && ($Uplink1 != "${switch_stack_member}/1/${count}" && $Uplink2 != "${switch_stack_member}/1/${count}")) || $Uplink_PORT1.startsWith("Fo") == "false")\n    interface FortyGigabitEthernet ${switch_stack_member}/1/${count}\n     shutdown\n   #end  \n   #if((($Uplink_PORT1.startsWith("Twe")) && ($Uplink1 != "${switch_stack_member}/1/${count}" && $Uplink2 != "${switch_stack_member}/1/${count}")) || $Uplink_PORT1.startsWith("Twe") == "false")\n    interface TwentyFiveGigE ${switch_stack_member}/1/${count}\n     shutdown\n   #end\n  #end\n #end\n##end\n!\n## ------ uplink to core/distribution switch----\n!\ninterface range ${Uplink_PORT1} , ${Uplink_PORT2}\n switchport trunk native vlan 999\n switchport trunk allowed vlan all\n switchport mode trunk\n switchport nonegotiate\n udld port aggressive\n service-policy output egress_queue\n no channel-group 1 mode active\n channel-group ${Core_Channel_ID} mode active\n logging event bundle-status\n no lldp receive\n no lldp transmit\n ip dhcp snooping trust\n no shutdown\n no  switchport access vlan 1000\n!\ninterface ${Uplink_PORT1}\n description L#Connected to ${LID}rs0001 interface ${Core_PORT1}\ninterface ${Uplink_PORT2}\n description L#Connected to ${LID}rs0001 interface ${Core_PORT2}\n!\ninterface Port-channel${Core_Channel_ID}\n description L#Connected to ${LID}rs0001 interface Po${Core_Channel_ID}\n switchport trunk native vlan 999\n switchport mode trunk\n switchport nonegotiate\n logging event bundle-status\n ip dhcp snooping trust\n no port-channel standalone-disable\n no shutdown\n no  switchport access vlan 1000\n!\n##---setting the zone into SNMP-location, will be later used for templating\n!\n#if ( $zone == "US-WEST" )\n snmp-server location US-WEST\n#elseif ( $zone == "CANADA" )\n snmp-server location CANADA\n#elseif ( $zone == "LATAM" )\n snmp-server location LATAM\n#elseif ( $zone == "US-EAST" )\n snmp-server location US-EAST\n#elseif ( $zone == "EMEA" )\n snmp-server location EMEA\n#elseif ( $zone == "APAC" )\n snmp-server location APAC\n#end\n!\n##------ switch priority ------\n!\n#set ( $scount = 0)\n#set ( $Priority = 14)\n#if ($switch_stack_members > 0)\n #foreach($switch_stack_member in [1..${switch_stack_members}])\n  do switch ${switch_stack_member} priority ${Priority}\n  #set ( $Priority = $Priority - 1)\n #end\n !\n#end\n!', 'rollbackTemplateContent': '', 'templateParams': [{'parameterName': 'Core_Channel_ID', 'dataType': 'INTEGER', 'defaultValue': None, 'description': 'Please enter the Portchannel ID on the Core switch where the Uplinks will be connected', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': 'Example: 11', 'group': None, 'order': 9, 'customOrder': 12, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': 'a95fe06f-a2d3-43d1-b985-917067208bfe'}, 'range': [{'minValue': 10, 'maxValue': 99, 'id': '838994f2-fbf9-4968-8516-f79c54f2164d'}], 'key': None, 'provider': None, 'binding': '', 'id': '6d6e3a69-f8f0-48de-b934-e6c7f7ce01a1'}, {'parameterName': 'default_gateway', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Default gateway (vlan 1000 ip address of the core switch)', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': '10.45.3.1', 'group': None, 'order': 5, 'customOrder': 5, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': 'fffea55a-b523-45f4-8777-4001d70e0b5c'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '184e5076-5fb0-4c25-a737-06ef6a73fd97'}, {'parameterName': 'switch_stack_members', 'dataType': 'INTEGER', 'defaultValue': None, 'description': 'Please select the number of switches in the stack', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': '1 to 8', 'group': None, 'order': 8, 'customOrder': 6, 'selection': {'selectionType': 'SINGLE_SELECT', 'selectionValues': {'1': '1', '2': '2', '3': '3', '4': '4', '5': '5', '6': '6', '7': '7', '8': '8'}, 'defaultSelectedValues': [], 'id': '76070434-36af-4bdf-a65f-86789eaba4a1'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'c1f57ad7-c102-4d46-b666-d0f4d0c7d153'}, {'parameterName': 'Network-Mgmt_Mask', 'dataType': 'IPADDRESS', 'defaultValue': None, 'description': 'Please fill in your access switch management subnet mask.', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': '255.255.255.128', 'group': None, 'order': 4, 'customOrder': 4, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': 'ca88257f-a802-4339-aa2d-0270d23f3b4a'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'd2036565-334a-4c1c-9322-1140709a264b'}, {'parameterName': 'Network-Mgmt_IP', 'dataType': 'IPADDRESS', 'defaultValue': None, 'description': 'Please fill in your access switch management ip address', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': '10.45.3.5', 'group': None, 'order': 3, 'customOrder': 3, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '133eff06-87cc-404e-990a-4cbe98c84aed'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '9bd46c8d-afd8-4655-a590-1fe5371c5602'}, {'parameterName': 'Uplink_PORT1', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Please enter the Uplink #1 interface of the Access swtich', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': 'Example: Te1/1/1', 'group': None, 'order': 6, 'customOrder': 8, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '709578a9-faf0-46f8-8bf0-4da1108652de'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '438941f2-28c9-453d-afb3-5269fed40823'}, {'parameterName': 'Uplink_PORT2', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Please enter the Uplink #2 interface of the Access swtich', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': 'Example: Te2/1/1', 'group': None, 'order': 7, 'customOrder': 9, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '3197dbed-cc88-42de-894b-3df481959d94'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '10e66734-8ec9-48c2-b949-7f977a769a87'}, {'parameterName': 'hostname', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Please fill in you host name like this:\nLID code + sw000 + number of the access switch in the site. \nExample: az18sw0001', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': 'az18sw0001', 'group': None, 'order': 1, 'customOrder': 1, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': 'ca85b26b-6ef1-45e6-9f01-273248f988da'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '12c2eacd-fe6c-4cb2-a082-bf9ef8173879'}, {'parameterName': 'Core_PORT1', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Please enter the Interface on the Core switch where the Uplink #1 will be connected', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': 'Example: Twe1/0/1', 'group': None, 'order': 10, 'customOrder': 10, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '1900811e-8218-4ef4-8795-452a56aa3d70'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '3569b19e-844d-433c-a3d2-919602fd4244'}, {'parameterName': 'user_vlanids', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Please list all of your user vlan IDs separated by a comma!', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': '10,11,12', 'group': None, 'order': 2, 'customOrder': 7, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '05e29d6a-cef9-43f6-a84d-b11807ab85d1'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'bcec5d99-2043-44e9-b4d5-e93f848b6864'}, {'parameterName': 'Core_PORT2', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Please enter the Interface on the Core switch where the Uplink #2 will be connected', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': 'Example: Twe2/0/1', 'group': None, 'order': 11, 'customOrder': 11, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '77b3c957-912f-4c0b-a641-6386066da65e'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '9e75a1e6-afb5-4137-a6f7-f5863f719b09'}, {'parameterName': 'zone', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Please select the region of your site.', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 12, 'customOrder': 2, 'selection': {'selectionType': 'SINGLE_SELECT', 'selectionValues': {'APAC': 'APAC', 'CANADA': 'CANADA', 'EMEA': 'EMEA', 'LATAM': 'LATAM', 'US-EAST': 'US-EAST', 'US-WEST': 'US-WEST'}, 'defaultSelectedValues': [], 'id': '76d97023-1c4c-4644-a27b-fee5037ad13c'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '4c7f3f41-1605-4f70-8979-38cef0ad0182'}], 'rollbackTemplateParams': [], 'composite': False, 'containingTemplates': [], 'language': 'VELOCITY', 'id': '838b8930-6893-4d91-9708-7afb1e5979b2', 'version': '2', 'customParamsOrder': True, 'createTime': 1614940643535, 'lastUpdateTime': 1616477824729, 'latestVersionTime': 1616477842633, 'projectName': 'Onboarding Configuration', 'projectId': 'e9658000-2088-453f-9941-0ab2277f149c', 'parentTemplateId': 'e6093d5a-f54c-4aad-9552-a4110f6df36a', 'validationErrors': {'templateErrors': [], 'rollbackTemplateErrors': [], 'templateId': '838b8930-6893-4d91-9708-7afb1e5979b2'}, 'projectAssociated': True, 'documentDatabase': False}
##get LID from hostname variable
#set( $LID = $hostname.substring(0,4) )
!
##set the variables so they wont appear in the list of the GUI variables as these are used only inside of the template scripts.
#set($vlans = [])
!
##------ Nonessential services----
!
no service pad
no service udp-small-servers
no service tcp-small-servers
no ip finger
no ip bootp server
no platform punt-keepalive disable-kernel-core
no ip source-route
no ip http server
no ip http secure-server
!
## access switch specific
no service dhcp
!
##------ Active services----
!
service tcp-keepalives-in
service tcp-keepalives-out
service timestamps debug datetime msec show-timezone
service timestamps log datetime msec show-timezone
service password-encryption
!
cdp run
lldp run
!
##------ Basic configuration----
!
hostname ${hostname}-PNP
!
no aaa new-model
!
## following enable/username configs are used only for PnP staging, the correct Honeywell enable/username passwords are defined in Day-N templates
!
enable secret HonMgmtLocal
!
username HonMgmtLocal secret HonMgmtLocal
!
ip domain-name net.honeywell.com
!
no ip domain-lookup
!
ip ssh version 2
ip ssh time-out 60
ip ssh authentication-retries 3
ip ssh source-interface vlan1000
!
crypto key generate rsa general-keys modulus 2048
!
errdisable recovery cause udld
errdisable recovery cause bpduguard
errdisable recovery cause channel-misconfig
errdisable recovery cause link-flap
errdisable recovery cause psecure-violation
errdisable recovery cause port-mode-failure
errdisable recovery cause dhcp-rate-limit
errdisable recovery cause mac-limit
errdisable recovery cause inline-power
!
ip ftp source-interface Vlan1000
ip tftp source-interface Vlan1000
!
##---------VTP-------
!
vtp mode off
!
##---------Spanning Tree Protocol and Associated Protocols -------
!
spanning-tree mode rapid-pvst
spanning-tree loopguard default
spanning-tree portfast bpduguard default
spanning-tree extend system-id
!
udld enable
!
##---------Layer2--------
!
!
##Vlan Description
##split vlan IDs list by either comma or space, then configure all the user VLANs and other basic VLANs
!
#if($user_vlanids.toString().contains(","))
#set ($vlans = $user_vlanids.split('\,'))
#else
#set ($vlans = $user_vlanids.split('\ '))
#end
!
#foreach ($vlan in $vlans)
 !
 vlan ${vlan}
  name User_${vlan}
 !
#end
!
vlan 710
 name Voice
!
vlan 999
 name NATIVE_vlan
!
vlan 805
 name WLAN-Mgmt
!
vlan 1000
 name Network-Mgmt
!
##---------Layer3--------
!
!
interface Vlan1
 shutdown
!
interface Vlan1000
 Description |MANAGEMENT|
 ip address ${Network-Mgmt_IP} ${Network-Mgmt_Mask}
 no ip redirects
 no ip unreachables
 no ip proxy-arp
 no shutdown
!
no ip routing
!
ip default-gateway ${default_gateway}
!
## --------VTY Lines-----------------
!
line con 0
 login local
 logging synchronous
!
line vty 0 15
 login local
 transport input ssh
 logging synchronous
!
line vty 16 31
 login local
 transport input ssh
 logging synchronous
!
##-------DHCP snooping----------
!
ip dhcp snooping vlan 1-4094
ip dhcp snooping
!
!
##---------QoS--------
## Qos is here so we can apply qos to interfaces now and do not have to do it later
!
!
ip access-list extended LYNC_voice
 permit tcp any any range 39040 39059
 permit udp any any range 39040 39059
 permit tcp any range 39040 39059 any
 permit udp any range 39040 39059 any
!
ip access-list extended LYNC_video
 permit udp any any range 39060 39079
 permit tcp any any range 39060 39079
 permit udp any range 39060 39079 any
 permit tcp any range 39060 39079 any
!
ip access-list extended LYNC_signaling
  permit tcp any any eq 5061
  permit tcp any eq 5061 any
!
ip access-list extended CAPWAP_control
  permit udp any any eq 5246
!
class-map match-any LYNC_voice
  match access-group name LYNC_voice
class-map match-any LYNC_video
  match access-group name LYNC_video
class-map match-any LYNC_signaling
  match access-group name LYNC_signaling
class-map match-any CAPWAP_control
  match access-group name CAPWAP_control
!
class-map egress_voice
 match dscp 40 46
class-map egress_video
  match dscp CS4 af41 af42 af43
class-map egress_critical
  match dscp af31
class-map egress_preferred
  match dscp af32 af33
class-map egress_net_control_mgmt
  match dscp cs6 AF22
class-map egress_signaling
  match dscp af21
class-map egress_bulk
  match dscp cs1
!
policy-map mark_user_interface
  class LYNC_voice
    set dscp ef
    police 160000 8000  conform-action transmit exceed-action drop
  class LYNC_video
    set dscp af41
  class LYNC_signaling
    set dscp af21
  class class-default
    set dscp default
!
policy-map mark_AP_wireless_interface
    class CAPWAP_control
      set dscp cs6
    class LYNC_voice
      set dscp ef
      police 1600000 8000 conform-action transmit exceed-action drop
    class LYNC_video
      set dscp af41
    class LYNC_signaling
      set dscp af21
    class class-default
      set dscp default
!
policy-map egress_queue
  class egress_voice
   priority level 1
   police rate percent 10
  class egress_video
    bandwidth remaining percent 34
    queue-buffers ratio 15
    queue-limit dscp AF43 percent 80
    queue-limit dscp AF42 percent 90
    queue-limit dscp AF41 percent 100
   class egress_critical
    bandwidth remaining percent 15
    queue-buffers ratio 10
   class egress_preferred
    bandwidth remaining percent 8
    queue-buffers ratio 10
    queue-limit dscp AF33 percent 80
    queue-limit dscp AF32 percent 100
   class egress_net_control_mgmt
    bandwidth remaining percent 9
    queue-buffers ratio 10
    queue-limit dscp AF23 percent 80
    queue-limit dscp AF22 percent 90
    queue-limit dscp CS6 percent 100
   class egress_signaling
     bandwidth remaining percent 8
     queue-buffers ratio 10
   class egress_bulk
     bandwidth remaining percent 1
     queue-buffers ratio 10
     queue-limit dscp AF13 percent 80
     queue-limit dscp AF12 percent 90
     queue-limit dscp AF11 percent 100
   class class-default
      bandwidth remaining percent 25
      queue-buffers ratio 25
!
policy-map mark_SBA_interface
 class LYNC_voice
  set dscp ef
 class LYNC_video
  set dscp af41
 class LYNC_signaling
  set dscp af21
 class class-default
  set dscp default
!
policy-map SBA_egress_queue
 class egress_voice
  priority level 1
  police rate percent 50
 class egress_video
  bandwidth remaining percent 5
 class egress_critical
  bandwidth remaining percent 5
 class egress_preferred
  bandwidth remaining percent 5
 class egress_net_control_mgmt
  bandwidth remaining percent 10
  queue-buffers ratio 10
 class egress_signaling
  bandwidth remaining percent 20
  queue-buffers ratio 30
 class egress_bulk
  bandwidth remaining percent 5
  queue-buffers ratio 10
 class class-default
  bandwidth remaining percent 50
  queue-buffers ratio 25
!
## ------ shutdown unprovisioned ports ----
## this is needed here because then we will configure the uplinks. If this would be in the Day-N template, we would need to develop a script to check which ports are used and which not
!
## 1) prepare the variables
!
#set ( $count = 0)
#set ($Uplink1 = "")
#set ($Uplink2 = "")
#set ($index = -1)
!
## 2) prepare uplink substrings so the uplinks are not shutdown
!
#if ($Uplink_PORT1.toString().contains("/1/"))
 #set ($index = $Uplink_PORT1.indexOf('/1/'))
#elseif ($Uplink_PORT1.toString().contains("/0/"))
 #set ($index = $Uplink_PORT1.indexOf('/0/'))
#end
#if ($index >= 0)
 #set ($index = $index - 1)
 #set ($Uplink1 = $Uplink_PORT1.substring($index))
#end
!
#if ($Uplink_PORT2.toString().contains("/1/"))
 #set ($index = $Uplink_PORT2.indexOf('/1/'))
#elseif ($Uplink_PORT2.toString().contains("/0/"))
 #set ($index = $Uplink_PORT2.indexOf('/0/'))
#end
#if ($index >= 0)
 #set ($index = $index - 1)
 #set ($Uplink2 = $Uplink_PORT2.substring($index))
#end
!
## 3) for each model, go through all interfaces, check if it is the specified uplink and if not, shut it down.
!
##C9300 - currently only 9300 is allowed, so the IF statement is not needed
##if ( $switch_model.toString().contains("c9300"))
 #foreach($switch_stack_member in [1..${switch_stack_members}])
  #foreach($count in [1..4])
   #if((($Uplink_PORT1.startsWith("Gi")) && ($Uplink1 != "${switch_stack_member}/1/${count}" && $Uplink2 != "${switch_stack_member}/1/${count}")) || $Uplink_PORT1.startsWith("Gi") == "false")
    interface GigabitEthernet ${switch_stack_member}/1/${count}
     shutdown
   #end
  #end
  #foreach($count in [1..8])
   #if((($Uplink_PORT1.startsWith("Te")) && ($Uplink1 != "${switch_stack_member}/1/${count}" && $Uplink2 != "${switch_stack_member}/1/${count}")) || $Uplink_PORT1.startsWith("Te") == "false")
    interface TenGigabitEthernet ${switch_stack_member}/1/${count}
     shutdown
   #end
  #end
  #foreach($count in [1..2])
   #if((($Uplink_PORT1.startsWith("Fo")) && ($Uplink1 != "${switch_stack_member}/1/${count}" && $Uplink2 != "${switch_stack_member}/1/${count}")) || $Uplink_PORT1.startsWith("Fo") == "false")
    interface FortyGigabitEthernet ${switch_stack_member}/1/${count}
     shutdown
   #end
   #if((($Uplink_PORT1.startsWith("Twe")) && ($Uplink1 != "${switch_stack_member}/1/${count}" && $Uplink2 != "${switch_stack_member}/1/${count}")) || $Uplink_PORT1.startsWith("Twe") == "false")
    interface TwentyFiveGigE ${switch_stack_member}/1/${count}
     shutdown
   #end
  #end
 #end
##end
!
## ------ uplink to core/distribution switch----
!
interface range ${Uplink_PORT1} , ${Uplink_PORT2}
 switchport trunk native vlan 999
 switchport trunk allowed vlan all
 switchport mode trunk
 switchport nonegotiate
 udld port aggressive
 service-policy output egress_queue
 no channel-group 1 mode active
 channel-group ${Core_Channel_ID} mode active
 logging event bundle-status
 no lldp receive
 no lldp transmit
 ip dhcp snooping trust
 no shutdown
 no  switchport access vlan 1000
!
interface ${Uplink_PORT1}
 description L#Connected to ${LID}rs0001 interface ${Core_PORT1}
interface ${Uplink_PORT2}
 description L#Connected to ${LID}rs0001 interface ${Core_PORT2}
!
interface Port-channel${Core_Channel_ID}
 description L#Connected to ${LID}rs0001 interface Po${Core_Channel_ID}
 switchport trunk native vlan 999
 switchport mode trunk
 switchport nonegotiate
 logging event bundle-status
 ip dhcp snooping trust
 no port-channel standalone-disable
 no shutdown
 no  switchport access vlan 1000
!
##---setting the zone into SNMP-location, will be later used for templating
!
#if ( $zone == "US-WEST" )
 snmp-server location US-WEST
#elseif ( $zone == "CANADA" )
 snmp-server location CANADA
#elseif ( $zone == "LATAM" )
 snmp-server location LATAM
#elseif ( $zone == "US-EAST" )
 snmp-server location US-EAST
#elseif ( $zone == "EMEA" )
 snmp-server location EMEA
#elseif ( $zone == "APAC" )
 snmp-server location APAC
#end
!
##------ switch priority ------
!
#set ( $scount = 0)
#set ( $Priority = 14)
#if ($switch_stack_members > 0)
 #foreach($switch_stack_member in [1..${switch_stack_members}])
  do switch ${switch_stack_member} priority ${Priority}
  #set ( $Priority = $Priority - 1)
 #end
 !
#end
!

Required Parameters for template body: {"Core_Channel_ID":"","default_gateway":"","switch_stack_members":"","Network-Mgmt_Mask":"","Network-Mgmt_IP":"","Uplink_PORT1":"","Uplink_PORT2":"","hostname":"","Core_PORT1":"","user_vlanids":"","Core_PORT2":"","zone":""}

Bindings []

C:\Users\H421923\DNAC-TemplateProgrammer>python.exe template.py --template "Onboarding Configuration/Hon-access-initial-template-OLD"
Enter DNAC URL :apac-dna.honeywell.com
Looking for: Onboarding Configuration/Hon-access-initial-template-OLD
https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template
TemplateId: 3d1581ea-41b7-421b-9265-56ac87e77713 Version: 2

https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template/3d1581ea-41b7-421b-9265-56ac87e77713
Showing Template Body:
{'name': 'Hon-access-initial-template-OLD', 'description': '', 'author': 'h421149', 'deviceTypes': [{'productFamily': 'Switches and Hubs'}], 'softwareType': 'IOS-XE', 'softwareVariant': 'XE', 'templateContent': 'no service pad\nservice tcp-keepalives-in\nservice tcp-keepalives-out\nservice timestamps debug datetime show-timezone\nservice timestamps log datetime show-timezone\nservice password-encryption\nservice compress-config\nno platform punt-keepalive disable-kernel-core\nudld enable\n!\nhostname ${hostname}\nvrf definition Mgmt-vrf\n !\n address-family ipv4\n exit-address-family\n !\n address-family ipv6\n exit-address-family\n!\nlogging buffered 16384\nlogging console errors\n!\n!\nenable secret 5 golf\n!\nno aaa new-model\n!\n!\nusername cisco privilege 15 password cisco\n!\nno ip finger\n!\nlldp run\n!\nno ip source-route\n!\n!\nip host tftp 135.89.201.98\nip name-server 10.192.2.45 10.216.2.51\nip domain name net.honeywell.com\n!\nip ssh version 2\n!\ncrypto key generate rsa general-keys modulus 2048 \n!\n!\nvtp domain ${LID}\nvtp mode transparent\n!\n!\nerrdisable recovery cause udld\nerrdisable recovery cause bpduguard\nerrdisable recovery cause channel-misconfig\nerrdisable recovery cause link-flap\nerrdisable recovery cause psecure-violation\nerrdisable recovery cause port-mode-failure\nerrdisable recovery cause dhcp-rate-limit\nerrdisable recovery cause mac-limit\nerrdisable recovery cause inline-power\ndiagnostic bootup level minimal\n!\nspanning-tree mode rapid-pvst\nspanning-tree portfast bpduguard default\nspanning-tree extend system-id\n##spanning-tree vlan 1-699, 705,710,801-808,811,814,950, 1000 priority 4096\n##spanning-tree vlan 851-853 priority 8192\n!\n## ------ uplink to core switch----\ninterface range ${Core_Uplink_PORT1}\ndescription Uplink To Coreswitch\nswitchport mode trunk\nswitchport trunk allowed vlan 1000\nspanning-tree bpduguard disable\nservice-policy output egress_queue\nno lldp receive\nno lldp transmit\n!\n!---Vlan Description---\n!split vlan IDs list by either comma or backslash\n\n#if($data_vlanids.toString().contains(","))\n#set ($vlans = $data_vlanids.split(\'\\,\'))\n\n#else\n#set ($vlans = $data_vlanids.split(\'\\ \'))\n#end\n\n!split ip addresses list by either comma or backslash\n\n\n#if($data_vlan_ipaddress.toString().contains(","))\n#set ($iplist = $data_vlan_ipaddress.split(\'\\,\'))\n#else\n#set ($iplist = $data_vlan_ipaddress.split(\'\\ \'))\n#end\n\n#set ( $count = 0)\n#foreach ($vlan in $vlans)\n    #if ( $count != $iplist.size() )\n        #set ( $ip = $iplist.get($count) )\n    #else \n        #break\n    #end\n\nvlan ${vlan}\nname datavlan_${ip} \n    #set ( $count = $count + 1)\n\n#end\n!\nVLAN 710\nname Voice_${Vlan_710_Voice_Des_IpSub_Mask}\n!\nvlan 801\nname WLAN-Eprize2_${Vlan_801_WLAN-Dec_Eprize2_IpSub_Mask}\n!\nvlan 802\nname WLAN-Guest_${Vlan_802_Dec_WLAN-Guest_IpSub_Mask}\n!\nvlan 803\nname WLAN-Industrial_${Vlan803_Dec_WLAN-Industrial_IpSub_Mask}\n!\nvlan 804\nname WLAN-Mprize_${Vlan804_Dec_wlan-mprize_IpSub_Mask}\n!\nvlan 805\nname WLAN-Mgmt_${Vlan_805_Dec_wlan-mgmt_IpSub_Mask}\n!\nvlan 1000\nname Network-Mgmt_${network-MGMT_IpSub_Mask}\n!\n!--- MGMT vlan 1000---\n!\nvlan 1000\nname Network-Mgmt\n!\ninterface vlan1000\nDescription *MGMT*\nip address ${Network-Mgmt_IP} ${Network-Mgmt_Mask}\nno ip redirects\nno ip unreachables\nno ip proxy-arp\n##no shutdown\n!\n!\nip default-gateway ${MGMT_RS01}\n!\nip http client source-interface vlan1000\n!\n##set ( $scount = 0)\n##if ($switch_stack_members == 8)\n##set ( $Priority = 15)\n##else\n##set ( $Priority = 13)\n##end\n##if ($switch_stack_members > 0)\n##MODE_ENABLE\n##foreach($switch_stack_member in [1..${switch_stack_members}])\n##switch ${switch_stack_member} priority ${Priority}\n##set ( $Priority = $Priority - 1)\n##end\n##MODE_END_ENABLE\n!\n##end\n!', 'rollbackTemplateContent': '', 'templateParams': [{'parameterName': 'vlans', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': True, 'displayName': None, 'instructionText': None, 'group': None, 'order': 6, 'customOrder': 0, 'selection': {'selectionType': 'MULTI_SELECT', 'selectionValues': {}, 'defaultSelectedValues': [], 'id': 'b7df3489-9516-49f7-a55d-01ee95d9b553'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '501ab5ea-6eee-4893-a8e0-c45a4a496d30'}, {'parameterName': 'hostname', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 1, 'customOrder': 1, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '0afee6b2-c2a8-4ec2-bdec-8454e96e504f'}, {'parameterName': 'ip', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 8, 'customOrder': 0, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'ad39403f-a6fb-4838-99e9-6748effc0d50'}, {'parameterName': 'MGMT_RS01', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 18, 'customOrder': 15, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '48fc7447-c55f-464e-8d6e-c60e7186b5ae'}, {'parameterName': 'Network-Mgmt_IP', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 16, 'customOrder': 13, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '775f6bcc-c057-4f5c-aa40-491e4dd3f130'}, {'parameterName': 'data_vlanids', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 4, 'customOrder': 4, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'e12e00ce-ec3a-4c49-8b39-aece5c7f4cd1'}, {'parameterName': 'iplist', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 7, 'customOrder': 0, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'd7be0f82-fedf-4bf2-acfc-af0eadaeedb8'}, {'parameterName': 'Vlan_802_Dec_WLAN-Guest_IpSub_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 11, 'customOrder': 8, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'ceb93c58-3075-43d1-9e51-9d8127a4c9ec'}, {'parameterName': 'Core_Uplink_PORT1', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 3, 'customOrder': 3, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '16e945c2-a7ac-4d3b-8437-5021ac659653'}, {'parameterName': 'Vlan804_Dec_wlan-mprize_IpSub_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 13, 'customOrder': 10, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '39c732ba-9e41-4701-ae5b-5a0e62c014d4'}, {'parameterName': 'Network-Mgmt_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 17, 'customOrder': 14, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '71a7f21f-5f4e-47a5-bff3-bbeb45c64a18'}, {'parameterName': 'data_vlan_ipaddress', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 5, 'customOrder': 5, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '4aef8a62-8ff7-4675-bc60-29ef4dfbe04a'}, {'parameterName': 'Vlan_805_Dec_wlan-mgmt_IpSub_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 14, 'customOrder': 11, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '21d6a53b-5e38-48ed-a513-990d0b27f772'}, {'parameterName': 'network-MGMT_IpSub_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 15, 'customOrder': 12, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'c67c83c9-5a7d-4c8f-adc5-9ddbc4e72ad4'}, {'parameterName': 'Vlan803_Dec_WLAN-Industrial_IpSub_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 12, 'customOrder': 9, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'ebb12fb1-1dc6-4e5f-b8f1-8c900ea0fb0e'}, {'parameterName': 'LID', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 2, 'customOrder': 2, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'f73c906f-0c54-4a00-b1ea-0e66eb866f23'}, {'parameterName': 'Vlan_801_WLAN-Dec_Eprize2_IpSub_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 10, 'customOrder': 7, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '786a8f84-4d8c-4098-9702-c279ef03021c'}, {'parameterName': 'Vlan_710_Voice_Des_IpSub_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 9, 'customOrder': 6, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'ff0adf15-eb23-4ab1-8c08-4ba2d83fcd36'}], 'rollbackTemplateParams': [], 'composite': False, 'containingTemplates': [], 'language': 'VELOCITY', 'id': '3d1581ea-41b7-421b-9265-56ac87e77713', 'version': '2', 'customParamsOrder': False, 'createTime': 1594396550109, 'lastUpdateTime': 1614940600257, 'latestVersionTime': 1614940622084, 'projectName': 'Onboarding Configuration', 'projectId': 'e9658000-2088-453f-9941-0ab2277f149c', 'parentTemplateId': 'a8fbfb5c-9a24-43cb-a779-e1eb973845b7', 'validationErrors': {'templateErrors': [], 'rollbackTemplateErrors': [], 'templateId': '3d1581ea-41b7-421b-9265-56ac87e77713'}, 'projectAssociated': True, 'documentDatabase': False}
no service pad
service tcp-keepalives-in
service tcp-keepalives-out
service timestamps debug datetime show-timezone
service timestamps log datetime show-timezone
service password-encryption
service compress-config
no platform punt-keepalive disable-kernel-core
udld enable
!
hostname ${hostname}
vrf definition Mgmt-vrf
 !
 address-family ipv4
 exit-address-family
 !
 address-family ipv6
 exit-address-family
!
logging buffered 16384
logging console errors
!
!
enable secret 5 golf
!
no aaa new-model
!
!
username cisco privilege 15 password cisco
!
no ip finger
!
lldp run
!
no ip source-route
!
!
ip host tftp 135.89.201.98
ip name-server 10.192.2.45 10.216.2.51
ip domain name net.honeywell.com
!
ip ssh version 2
!
crypto key generate rsa general-keys modulus 2048
!
!
vtp domain ${LID}
vtp mode transparent
!
!
errdisable recovery cause udld
errdisable recovery cause bpduguard
errdisable recovery cause channel-misconfig
errdisable recovery cause link-flap
errdisable recovery cause psecure-violation
errdisable recovery cause port-mode-failure
errdisable recovery cause dhcp-rate-limit
errdisable recovery cause mac-limit
errdisable recovery cause inline-power
diagnostic bootup level minimal
!
spanning-tree mode rapid-pvst
spanning-tree portfast bpduguard default
spanning-tree extend system-id
##spanning-tree vlan 1-699, 705,710,801-808,811,814,950, 1000 priority 4096
##spanning-tree vlan 851-853 priority 8192
!
## ------ uplink to core switch----
interface range ${Core_Uplink_PORT1}
description Uplink To Coreswitch
switchport mode trunk
switchport trunk allowed vlan 1000
spanning-tree bpduguard disable
service-policy output egress_queue
no lldp receive
no lldp transmit
!
!---Vlan Description---
!split vlan IDs list by either comma or backslash

#if($data_vlanids.toString().contains(","))
#set ($vlans = $data_vlanids.split('\,'))

#else
#set ($vlans = $data_vlanids.split('\ '))
#end

!split ip addresses list by either comma or backslash


#if($data_vlan_ipaddress.toString().contains(","))
#set ($iplist = $data_vlan_ipaddress.split('\,'))
#else
#set ($iplist = $data_vlan_ipaddress.split('\ '))
#end

#set ( $count = 0)
#foreach ($vlan in $vlans)
    #if ( $count != $iplist.size() )
        #set ( $ip = $iplist.get($count) )
    #else
        #break
    #end

vlan ${vlan}
name datavlan_${ip}
    #set ( $count = $count + 1)

#end
!
VLAN 710
name Voice_${Vlan_710_Voice_Des_IpSub_Mask}
!
vlan 801
name WLAN-Eprize2_${Vlan_801_WLAN-Dec_Eprize2_IpSub_Mask}
!
vlan 802
name WLAN-Guest_${Vlan_802_Dec_WLAN-Guest_IpSub_Mask}
!
vlan 803
name WLAN-Industrial_${Vlan803_Dec_WLAN-Industrial_IpSub_Mask}
!
vlan 804
name WLAN-Mprize_${Vlan804_Dec_wlan-mprize_IpSub_Mask}
!
vlan 805
name WLAN-Mgmt_${Vlan_805_Dec_wlan-mgmt_IpSub_Mask}
!
vlan 1000
name Network-Mgmt_${network-MGMT_IpSub_Mask}
!
!--- MGMT vlan 1000---
!
vlan 1000
name Network-Mgmt
!
interface vlan1000
Description *MGMT*
ip address ${Network-Mgmt_IP} ${Network-Mgmt_Mask}
no ip redirects
no ip unreachables
no ip proxy-arp
##no shutdown
!
!
ip default-gateway ${MGMT_RS01}
!
ip http client source-interface vlan1000
!
##set ( $scount = 0)
##if ($switch_stack_members == 8)
##set ( $Priority = 15)
##else
##set ( $Priority = 13)
##end
##if ($switch_stack_members > 0)
##MODE_ENABLE
##foreach($switch_stack_member in [1..${switch_stack_members}])
##switch ${switch_stack_member} priority ${Priority}
##set ( $Priority = $Priority - 1)
##end
##MODE_END_ENABLE
!
##end
!

Required Parameters for template body: {"vlans":"","hostname":"","ip":"","MGMT_RS01":"","Network-Mgmt_IP":"","data_vlanids":"","iplist":"","Vlan_802_Dec_WLAN-Guest_IpSub_Mask":"","Core_Uplink_PORT1":"","Vlan804_Dec_wlan-mprize_IpSub_Mask":"","Network-Mgmt_Mask":"","data_vlan_ipaddress":"","Vlan_805_Dec_wlan-mgmt_IpSub_Mask":"","network-MGMT_IpSub_Mask":"","Vlan803_Dec_WLAN-Industrial_IpSub_Mask":"","LID":"","Vlan_801_WLAN-Dec_Eprize2_IpSub_Mask":"","Vlan_710_Voice_Des_IpSub_Mask":""}

Bindings []

C:\Users\H421923\DNAC-TemplateProgrammer>python.exe template.py --template "Onboarding Configuration/Hon-core-initial template"
Enter DNAC URL :apac-dna.honeywell.com
Looking for: Onboarding Configuration/Hon-core-initial template
https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template
TemplateId: ed45584c-0309-4803-819c-1034a92d150f Version: 5

https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template/ed45584c-0309-4803-819c-1034a92d150f
Showing Template Body:
{'name': 'Hon-core-initial template', 'description': 'Base Template', 'author': 'h414283', 'deviceTypes': [{'productFamily': 'Switches and Hubs'}], 'softwareType': 'IOS-XE', 'softwareVariant': 'XE', 'templateContent': '##get LID from hostname variable\n#set( $LID = $hostname.substring(0,4) )\n##get SVL Domain number from hostname variable\n#set ($hostname-split = $hostname.split(\'[a-z0-9][a-z0-9][a-z0-9][a-z0-9]rs\'))\n#set ($SVL_domain = $hostname-split.get(1))\n!\n##set the variables so they wont appear in the list of the GUI variables as these are used only inside of the template scripts.\n#set($vlans = [])\n#set($iplist = [])\n#set($masklist = [])\n#set($mask = [])\n#set($finalip2 = [])\n!\n##------ Nonessential services----\n!\nno service pad\nno service udp-small-servers\nno service tcp-small-servers\nno ip finger\t\t\t\t\t   \nno ip bootp server\nno platform punt-keepalive disable-kernel-core\nno ip source-route\nno ip http server\nno ip http secure-server\n!\n##------ Active services----\n!\nservice tcp-keepalives-in\nservice tcp-keepalives-out\nservice timestamps debug datetime msec show-timezone\nservice timestamps log datetime msec show-timezone\nservice password-encryption\n!\ncdp run\nlldp run\n!\n##------ Basic configuration----\n!\nhostname ${hostname}-PNP\n!\nno aaa new-model\n!\n## following enable/username configs are used only for PnP staging, the correct Honeywell enable/username passwords are defined in Day-N templates\n!\nenable secret HonMgmtLocal\n!\nusername HonMgmtLocal secret HonMgmtLocal\n!\nip domain-name net.honeywell.com\n!\nno ip domain-lookup\n!\nip ssh version 2\nip ssh time-out 60\nip ssh authentication-retries 3\nip ssh source-interface Lo0\n!\ncrypto key generate rsa general-keys modulus 2048 \n!\nerrdisable recovery cause udld\nerrdisable recovery cause bpduguard\nerrdisable recovery cause channel-misconfig\nerrdisable recovery cause link-flap\nerrdisable recovery cause psecure-violation\nerrdisable recovery cause port-mode-failure\nerrdisable recovery cause dhcp-rate-limit\nerrdisable recovery cause mac-limit\nerrdisable recovery cause inline-power\n!\nip ftp source-interface Loopback0\nip tftp source-interface Loopback0\n!\n##---------VTP-------\n!\nvtp mode off\n!\n##---------Spanning Tree Protocol and Associated Protocols -------\n!\nspanning-tree mode rapid-pvst\nspanning-tree loopguard default\nspanning-tree portfast bpduguard default\nspanning-tree extend system-id\n!\n#if ($switch_role.toString().contains("CORE"))\n #if ($SVL_setup == "YES")\n  spanning-tree vlan 1-4093 priority 4096\n #else\n  spanning-tree vlan 1-4094 priority 4096 \n #end\n#elseif ($switch_role == \'DISTRIBUTION\')\n #if ($SVL_setup == "YES")\n  spanning-tree vlan 1-4093 priority 4096\n #else\n  spanning-tree vlan 1-4094 priority 4096 \n #end\n#end\n!\nudld enable\n!\n##---------Layer2--------\n!\n#if (($switch_role == \'COLLAPSED_CORE\') || ($switch_role == \'DISTRIBUTION\'))\n!\n##Vlan Description\n##split vlan IDs list by either comma or space, then configure all the user VLANs and other basic VLANs\n!\n#if($user_vlanids.toString().contains(","))\n#set ($vlans = $user_vlanids.split(\'\\,\'))\n#else\n#set ($vlans = $user_vlanids.split(\'\\ \'))\n#end\n!\n#foreach ($vlan in $vlans)\n !\n vlan ${vlan}\n  name User_${vlan} \n ! \n#end\n!\n#if ( $Voice_IP != "" && $Voice_Mask != "" )\nvlan 710\n name Voice\n#end\n!\nvlan 999\n name NATIVE_vlan\n!\n#if ( $WLAN-Mgmt_IP != "" && $WLAN-Mgmt_Mask != "" )\nvlan 805\n name WLAN-Mgmt\n#end\n!\nvlan 1000\n name Network-Mgmt\n!\n#end\n!\n##---------Layer3--------\n!\nip routing\n!\ninterface Vlan1\n shutdown\n!\ninterface Vlan1000\n no ip address\n shut\n!\ninterface loopback0\n description |MANAGEMENT|\n ip address ${loopback0-ip-address} 255.255.255.255\n no ip redirects\n no ip unreachables\n no ip proxy-arp\n ip pim sparse-mode\n ip ospf 1 area 1\n no shutdown\n!\n#if (($switch_role == \'COLLAPSED_CORE\') || ($switch_role == \'DISTRIBUTION\'))\n interface Vlan1000\n  description MGMT Vlan\n  ip address ${Network-Mgmt_IP} ${Network-Mgmt_Mask}\n  no ip redirects\n  no ip unreachables\n  no ip proxy-arp\n  ip pim sparse-mode\n  ip ospf 1 area 1\n  #if ( $deploy_vlan_type == "no shutdown" )\n  no shutdown\n  #elseif ( $deploy_vlan_type == "shutdown" )\n  shutdown\n  #end\n !\n #if ( $WLAN-Mgmt_IP != "" && $WLAN-Mgmt_Mask != "" )\n interface Vlan805\n  description WLAN MGMT Vlan\n  ip address ${WLAN-Mgmt_IP} ${WLAN-Mgmt_Mask}\n  #if ($zone.toString().contains("US-WEST") || $zone.toString().contains("US-EAST") || $zone.toString().contains("LATAM") || $zone.toString().contains("CANADA"))\n  ip helper-address 10.192.14.225\n  ip helper-address 10.216.14.220\n  #elseif ($zone.toString().contains("EMEA"))\n  ip helper-address 10.238.2.205\n  ip helper-address 10.216.14.225\n  #elseif ($zone.toString().contains("APAC"))\n  ip helper-address 199.63.219.142\n  ip helper-address 10.192.14.220\n  #end\n  ip helper-address 10.195.2.40\n  ip helper-address 10.217.95.21\n  no ip redirects\n  no ip unreachables\n  no ip proxy-arp\n  ip pim sparse-mode\n  ip ospf 1 area 1\n  #if ( $deploy_vlan_type == "no shutdown" )\n  no shutdown\n  #elseif ( $deploy_vlan_type == "shutdown" )\n  shutdown\n  #end\n #end\n !\n ##User Vlans\n !\n #if($user_vlan_ipaddress.toString().contains(","))\n #set ($iplist = $user_vlan_ipaddress.split(\'\\,\'))\n #else\n #set ($iplist = $user_vlan_ipaddress.split(\'\\ \'))\n #end\n #if($user_vlan_mask.toString().contains(","))\n #set ($masklist = $user_vlan_mask.split(\'\\,\'))\n #else\n #set ($masklist = $user_vlan_mask.split(\'\\ \'))\n #end\n !\n #set ( $count = 0)\n !\n #foreach ($vlan in $vlans)\n  #if ( $count != $iplist.size() )\n   #set ( $ip = $iplist.get($count) )\n   #set ( $mask = $masklist.get($count) )\n   #set ($finalip = $ip.split(\'\\/\'))\n   #set($finalip2 = $finalip.get(0))\n  #else \n   #break\n  #end\n  interface vlan ${vlan}\n   description User Vlan\n   ip address ${finalip2} ${mask}\n   #if ($zone.toString().contains("US-WEST") || $zone.toString().contains("US-EAST") || $zone.toString().contains("LATAM") || $zone.toString().contains("CANADA"))\n   ip helper-address 10.192.14.225\n   ip helper-address 10.216.14.220\n   #elseif ($zone.toString().contains("EMEA"))\n   ip helper-address 10.238.2.205\n   ip helper-address 10.216.14.225\n   #elseif ($zone.toString().contains("APAC"))\n   ip helper-address 199.63.219.142\n   ip helper-address 10.192.14.220\n   #end\n   ip helper-address 10.195.2.40\n   ip helper-address 10.217.95.21\n   no ip redirects\n   no ip unreachables\n   no ip proxy-arp\n   ip pim sparse-mode\n   ip ospf 1 area 1\n   #if ( $deploy_vlan_type == "no shutdown" )\n   no shutdown\n   #elseif ( $deploy_vlan_type == "shutdown" )\n   shutdown\n   #end\n   !\n  #set ( $count = $count + 1)\n #end\n !\n #if ( $Voice_IP != "" && $Voice_Mask != "" )\n interface vlan710\n  description Voice Vlan\n  ip address ${Voice_IP} ${Voice_Mask}\n  #if ($zone.toString().contains("US-WEST") || $zone.toString().contains("US-EAST") || $zone.toString().contains("LATAM") || $zone.toString().contains("CANADA"))\n  ip helper-address 10.192.14.225\n  ip helper-address 10.216.14.220\n  #elseif ($zone.toString().contains("EMEA"))\n  ip helper-address 10.238.2.205\n  ip helper-address 10.216.14.225\n  #elseif ($zone.toString().contains("APAC"))\n  ip helper-address 199.63.219.142\n  ip helper-address 10.192.14.220\n  #end\n  ip helper-address 10.195.2.40\n  ip helper-address 10.217.95.21\n  no ip redirects\n  no ip unreachables\n  no ip proxy-arp\n  ip pim sparse-mode\n  ip ospf 1 area 1\n  #if ( $deploy_vlan_type == "no shutdown" )\n  no shutdown\n  #elseif ( $deploy_vlan_type == "shutdown" )\n  shutdown\n  #end\n #end\n !\n#end\n!\nrouter ospf 1\n router-id ${loopback0-ip-address}\n## auto-cost reference-bandwidth 1000000\n area 1 authentication message-digest\n area 1 stub\n redistribute static metric 100 subnets route-map STATIC-TO-OSPF\n passive-interface default\n!\nroute-map STATIC-TO-OSPF permit 10 \n match tag 100\n!\n##--------VTY Lines-----------------\n!\nline con 0\t\t\t  \n login local\n logging synchronous\n!\nline vty 0 15\n login local\n transport input ssh\n logging synchronous\n!\nline vty 16 31\n login local\n transport input ssh\n logging synchronous\n!\n##-------DHCP snooping----------\n!\n#if (($switch_role == \'COLLAPSED_CORE\') || ($switch_role == \'DISTRIBUTION\'))\n ip dhcp snooping vlan 1-4094\n ip dhcp snooping\n !\n ##core/distribution switch specific\n ip dhcp relay information trust-all\n !\n#end\n!\n!\n##---------QoS--------\n## Qos is here so we can apply qos to interfaces now and do not have to do it later\n!\n!\nip access-list extended LYNC_voice\n permit tcp any any range 39040 39059\n permit udp any any range 39040 39059\n permit tcp any range 39040 39059 any\n permit udp any range 39040 39059 any\n!\nip access-list extended LYNC_video\n permit udp any any range 39060 39079\n permit tcp any any range 39060 39079\n permit udp any range 39060 39079 any\n permit tcp any range 39060 39079 any\n!\nip access-list extended LYNC_signaling\n  permit tcp any any eq 5061\n  permit tcp any eq 5061 any \n!\nip access-list extended CAPWAP_control\n  permit udp any any eq 5246\n!\nclass-map match-any LYNC_voice\n  match access-group name LYNC_voice\nclass-map match-any LYNC_video\n  match access-group name LYNC_video\nclass-map match-any LYNC_signaling\n  match access-group name LYNC_signaling\nclass-map match-any CAPWAP_control\n  match access-group name CAPWAP_control\n!\nclass-map egress_voice\n match dscp 40 46\nclass-map egress_video \n  match dscp CS4 af41 af42 af43\nclass-map egress_critical\n  match dscp af31\nclass-map egress_preferred\n  match dscp af32 af33\nclass-map egress_net_control_mgmt\n  match dscp cs6 AF22\nclass-map egress_signaling\n  match dscp af21\nclass-map egress_bulk\n  match dscp cs1\n!\npolicy-map mark_user_interface\n  class LYNC_voice\n    set dscp ef\n    police 160000 8000  conform-action transmit exceed-action drop \n  class LYNC_video\n    set dscp af41\n  class LYNC_signaling\n    set dscp af21\n  class class-default\n    set dscp default \n!\npolicy-map mark_AP_wireless_interface\n    class CAPWAP_control\n      set dscp cs6\n    class LYNC_voice\n      set dscp ef\n      police 1600000 8000 conform-action transmit exceed-action drop\n    class LYNC_video\n      set dscp af41\n    class LYNC_signaling\n      set dscp af21\n    class class-default\n      set dscp default\n!\npolicy-map egress_queue\n  class egress_voice\n   priority level 1\n   police rate percent 10\n  class egress_video\n    bandwidth remaining percent 34\n    queue-buffers ratio 15\n    queue-limit dscp AF43 percent 80\n    queue-limit dscp AF42 percent 90\n    queue-limit dscp AF41 percent 100\n   class egress_critical  \n    bandwidth remaining percent 15\n    queue-buffers ratio 10   \n   class egress_preferred\n    bandwidth remaining percent 8\n    queue-buffers ratio 10\n    queue-limit dscp AF33 percent 80\n    queue-limit dscp AF32 percent 100\n   class egress_net_control_mgmt\n    bandwidth remaining percent 9\n    queue-buffers ratio 10\n    queue-limit dscp AF23 percent 80\n    queue-limit dscp AF22 percent 90\n    queue-limit dscp CS6 percent 100\n   class egress_signaling\n     bandwidth remaining percent 8\n     queue-buffers ratio 10   \n   class egress_bulk\n     bandwidth remaining percent 1\n     queue-buffers ratio 10\n     queue-limit dscp AF13 percent 80\n     queue-limit dscp AF12 percent 90\n     queue-limit dscp AF11 percent 100\n   class class-default\n      bandwidth remaining percent 25\n      queue-buffers ratio 25\n!\npolicy-map mark_SBA_interface\n class LYNC_voice\n  set dscp ef\n class LYNC_video\n  set dscp af41\n class LYNC_signaling\n  set dscp af21\n class class-default\n  set dscp default\n!\npolicy-map SBA_egress_queue\n class egress_voice\n  priority level 1\n  police rate percent 50\n class egress_video\n  bandwidth remaining percent 5\n class egress_critical\n  bandwidth remaining percent 5\n class egress_preferred\n  bandwidth remaining percent 5\n class egress_net_control_mgmt\n  bandwidth remaining percent 10\n  queue-buffers ratio 10\n class egress_signaling\n  bandwidth remaining percent 20\n  queue-buffers ratio 30\n class egress_bulk\n  bandwidth remaining percent 5\n  queue-buffers ratio 10\n class class-default\n  bandwidth remaining percent 50\n  queue-buffers ratio 25\n!\n## ------ shutdown unprovisioned ports ----\n## this is needed here because then we will configure the uplinks. If this would be in the Day-N template, we would need to develop a script to check which ports are used and which not\n!\n## 1) prepare the variables\n!\n#set($TenGig_max = 0)\n#set($TwentyGig_max = 0)\n#set ( $count = 0)\n#set ($Uplink1 = "")\n#set ($Uplink2 = "")\n#set ($index = -1)\n!\n## 2) prepare uplink substrings so the uplinks are not shutdown\n!\n#if ($Uplink-to-rt01.toString().contains("/1/"))\n #set ($index = $Uplink-to-rt01.indexOf(\'/1/\'))\n#elseif ($Uplink-to-rt01.toString().contains("/0/"))\n #set ($index = $Uplink-to-rt01.indexOf(\'/0/\'))\n#end\n#if ($index >= 0)\n #set ($index = $index - 1)\n #set ($Uplink1 = $Uplink-to-rt01.substring($index))\n#end\n!\n#if ($Uplink-to-rt02.toString().contains("/1/"))\n #set ($index = $Uplink-to-rt02.indexOf(\'/1/\'))\n#elseif ($Uplink-to-rt02.toString().contains("/0/"))\n #set ($index = $Uplink-to-rt02.indexOf(\'/0/\'))\n#end\n#if ($index >= 0)\n #set ($index = $index - 1)\n #set ($Uplink2 = $Uplink-to-rt02.substring($index))\n#end\n!\n## 3) for each model, go through all interfaces, check if it is the specified uplink and if not, shut it down.\n!\n##C9300\n#if ( $switch_model.toString().contains("c9300"))\n #foreach($switch_stack_member in [1..${switch_stack_members}])\n  #foreach($count in [1..4])\n   #if((($Uplink-to-rt01.startsWith("Gi")) && ($Uplink1 != "${switch_stack_member}/1/${count}" && $Uplink2 != "${switch_stack_member}/1/${count}")) || $Uplink-to-rt01.startsWith("Gi") == "false")\n    interface GigabitEthernet ${switch_stack_member}/1/${count}\n     shutdown\n   #end\n  #end\n  #foreach($count in [1..8])\n   #if((($Uplink-to-rt01.startsWith("Te")) && ($Uplink1 != "${switch_stack_member}/1/${count}" && $Uplink2 != "${switch_stack_member}/1/${count}")) || $Uplink-to-rt01.startsWith("Te") == "false")\n    interface TenGigabitEthernet ${switch_stack_member}/1/${count}\n     shutdown\n   #end\n  #end\n  #foreach($count in [1..2])\n   #if((($Uplink-to-rt01.startsWith("Fo")) && ($Uplink1 != "${switch_stack_member}/1/${count}" && $Uplink2 != "${switch_stack_member}/1/${count}")) || $Uplink-to-rt01.startsWith("Fo") == "false")\n    interface FortyGigabitEthernet ${switch_stack_member}/1/${count}\n     shutdown\n   #end  \n   #if((($Uplink-to-rt01.startsWith("Twe")) && ($Uplink1 != "${switch_stack_member}/1/${count}" && $Uplink2 != "${switch_stack_member}/1/${count}")) || $Uplink-to-rt01.startsWith("Twe") == "false")\n    interface TwentyFiveGigE ${switch_stack_member}/1/${count}\n     shutdown\n   #end\n  #end\n #end\n##C9500\n#elseif ( $switch_model == "c9500-24y4c")\n #set($TwentyGig_max = 24)\n interface range Hu1/0/25 , Hu1/0/27\n  shutdown\n #foreach ($count in [1..${TwentyGig_max}])\n  #if($Uplink1 != "1/0/$count" && $Uplink2 != "1/0/$count")\n   interface Twe1/0/$count\n    shutdown\n  #end\n #end\n #if ($SVL_setup == "YES")\n  switch 2 provision $switch_model\n  interface range Hu2/0/25 , Hu2/0/27\n   shutdown\n  #foreach ($count in [1..${TwentyGig_max}])\n   #if($Uplink1 != "2/0/$count" && $Uplink2 != "2/0/$count")\n    interface Twe2/0/$count\n     shutdown\n   #end\n  #end\n #end\n#elseif ( $switch_model == "c9500-48y4c")\n #set($TwentyGig_max = 48)\n interface range Hu1/0/49 , Hu1/0/51\n  shutdown\n #foreach ($count in [1..${TwentyGig_max}])\n  #if($Uplink1 != "1/0/$count" && $Uplink2 != "1/0/$count")\n   interface Twe1/0/$count\n    shutdown\n  #end\n #end\n #if ($SVL_setup == "YES")\n  switch 2 provision $switch_model\n  interface range Hu2/0/49 , Hu2/0/51\n   shutdown\n  #foreach ($count in [1..${TwentyGig_max}])\n   #if($Uplink1 != "2/0/$count" && $Uplink2 != "2/0/$count")\n    interface Twe2/0/$count\n     shutdown\n   #end\n  #end\n #end\n#elseif ( $switch_model == "c9500-16x")\n interface range TenGigabitEthernet1/1/1 - 8\n  shutdown\n interface range FortyGigabitEthernet1/1/1 - 2\n  shutdown\n #set($TenGig_max = 16)\n #foreach ($count in [1..${TenGig_max}])\n  #if($Uplink1 != "1/0/$count" && $Uplink2 != "1/0/$count")\n   interface Te1/0/$count\n    shutdown\n  #end\n #end\n #if ($SVL_setup == "YES")\n  switch 2 provision $switch_model\n  interface range TenGigabitEthernet2/1/1 - 8\n   shutdown\n  interface range FortyGigabitEthernet2/1/1 - 2\n   shutdown\n  #foreach ($count in [1..${TenGig_max}])\n   #if($Uplink1 != "2/0/$count" && $Uplink2 != "2/0/$count")\n    interface Te2/0/$count\n     shutdown\n   #end\n  #end\n #end\n#end\n!\n##------ uplink to routers----\n##Uplink routers are switched in case of SVL. This was causing Connectivity timeouts and on the Standby device the config will be overwritten anyway.\n!\n#if (($switch_role == \'COLLAPSED_CORE\') || ($switch_role == \'CORE\'))\n!\n#if ( $SVL_setup == "NO" || ($SVL_setup == "YES" && $PRIMARY == "1"))\n interface ${Uplink-to-rt01}\n#elseif ( $SVL_setup == "YES" && $PRIMARY == "0")\n interface ${Uplink-to-rt02}\n#end\n description R#Connected to ${LID}rt0001 interface ${router_interface_1}\n no  switchport\n ip address ${Router1_uplink_IP} 255.255.255.252\n ip ospf network point-to-point\n ip ospf 1 area 0\n no ip redirects\n no ip unreachables\n no ip proxy-arp\n no lldp transmit\n no lldp receive\n service-policy output egress_queue\n no shutdown\n!\nrouter ospf 1\n#if ( $SVL_setup == "NO" || ($SVL_setup == "YES" && $PRIMARY == "1"))\n no passive-interface ${Uplink-to-rt01}\n#elseif ( $SVL_setup == "YES" && $PRIMARY == "0")\n no passive-interface ${Uplink-to-rt02}\n#end\n!\n#if ($Uplink-to-rt02 != "")\n#if ( $SVL_setup == "NO" || ($SVL_setup == "YES" && $PRIMARY == "1"))\n interface ${Uplink-to-rt02}\n#elseif ( $SVL_setup == "YES" && $PRIMARY == "0")\n interface ${Uplink-to-rt01}\n#end\n description R#Connected to ${LID}rt0002 interface ${router_interface_2}\n no  switchport\n ip address ${Router2_uplink_IP} 255.255.255.252\n ip ospf network point-to-point\n ip ospf 1 area 0\n no ip redirects\n no ip unreachables\n no ip proxy-arp\n no lldp transmit\n no lldp receive\n service-policy output egress_queue\n no shutdown\n!\nrouter ospf 1\n#if ( $SVL_setup == "NO" || ($SVL_setup == "YES" && $PRIMARY == "1"))\n no passive-interface ${Uplink-to-rt02}\n#elseif ( $SVL_setup == "YES" && $PRIMARY == "0")\n no passive-interface ${Uplink-to-rt01}\n#end\n!\n#end\n#end\n!\n##-------PnP DHCP scope------------------------\n!\nip dhcp excluded-address ${Network-Mgmt_IP}\nip dhcp pool pnp_device_pool\n network ${Network-Mgmt_IP} ${Network-Mgmt_Mask}\n default-router ${Network-Mgmt_IP}\n #if ( $zone == "US-WEST" || $zone == "CANADA" || $zone == "LATAM")\n  option 43 ascii "5A1D;B2;K4;I10.195.2.201;J80"\n #elseif ($zone == "EMEA")\n  option 43 ascii "5A1D;B2;K4;I10.238.1.10;J80"\n #elseif ($zone == "APAC")\n  option 43 ascii "5A1D;B2;K4;I10.79.19.100;J80"\n #end\n!\npnp startup-vlan 1000\n!\n##---setting the zone into SNMP-location, will be later used for templating\n!\n#if ( $zone == "US-WEST" )\n snmp-server location US-WEST\n#elseif ( $zone == "CANADA" )\n snmp-server location CANADA\n#elseif ( $zone == "LATAM" )\n snmp-server location LATAM\n#elseif ( $zone == "US-EAST" )\n snmp-server location US-EAST\n#elseif ( $zone == "EMEA" )\n snmp-server location EMEA\n#elseif ( $zone == "APAC" )\n snmp-server location APAC\n#end\n!\n##------ switch priority ------\n!\n#if ( $SVL_setup == "NO" )\n #set ( $scount = 0)\n #set ( $Priority = 14)\n #if ($switch_stack_members > 0)\n  #foreach($switch_stack_member in [1..${switch_stack_members}])\n   do switch ${switch_stack_member} priority ${Priority}\n   #set ( $Priority = $Priority - 1)\n  #end\n !\n #end\n!\n#end\n!\n#if ( $SVL_setup == "YES" )\n !\n ##-----enable NSF------\n !\n router ospf 1\n  nsf cisco\n !\n ##-----configure SVL with the domain #------\n !\n stackwise-virtual\n  domain $SVL_domain\n exit\n !\n ##------configure SVL interfaces based on chosen model------\n !\n #if ( $PRIMARY == "1" )\n  switch 2 provision $switch_model\n  !\n  ! \n  #if ( $switch_model == "c9500-16x" )\n  interface Te1/0/15\n   description L#Connected to ${hostname} interface Te2/0/15 (${switch_model}) SVL1\n  #elseif ( $switch_model == "c9500-24y4c" )\n  interface Hu1/0/26\n   description L#Connected to ${hostname} interface Hu2/0/26 (${switch_model}) SVL1\n  #elseif ( $switch_model == "c9500-48y4c" )\n  interface Hu1/0/50\n   description L#Connected to ${hostname} interface Hu2/0/50 (${switch_model}) SVL1\n  #end\n   stackwise-virtual link 1\n  ! \n  #if ( $switch_model == "c9500-16x" )\n  interface Te1/0/16\n   description L#Connected to ${hostname} interface Te2/0/16 (${switch_model}) SVL2\n  #elseif ( $switch_model == "c9500-24y4c" )\n  interface Hu1/0/28\n   description L#Connected to ${hostname} interface Hu2/0/28 (${switch_model}) SVL2\n  #elseif ( $switch_model == "c9500-48y4c" )\n  interface Hu1/0/52\n   description L#Connected to ${hostname} interface Hu2/0/52 (${switch_model}) SVL2\n  #end\n   stackwise-virtual link 1\n  !\n  #if ( $switch_model == "c9500-16x" )\n  interface Te1/0/14\n   description L#Connected to ${hostname} interface Te2/0/14 (${switch_model}) DAD\n  #elseif ( $switch_model == "c9500-24y4c" )\n  interface Twe1/0/24\n   description L#Connected to ${hostname} interface Twe2/0/24 (${switch_model}) DAD\n  #elseif ( $switch_model == "c9500-48y4c" )\n  interface Twe1/0/48\n   description L#Connected to ${hostname} interface Twe2/0/48 (${switch_model}) DAD\n  #end\n   stackwise-virtual dual-active-detection\n  !\n  #if ( $switch_model == "c9500-16x" )\n  interface Te2/0/15\n   description L#Connected to ${hostname} interface Te1/0/15 (${switch_model}) SVL1\n  #elseif ( $switch_model == "c9500-24y4c" )\n  interface Hu2/0/26\n   description L#Connected to ${hostname} interface Hu1/0/26 (${switch_model}) SVL1\n  #elseif ( $switch_model == "c9500-48y4c" )\n  interface Hu2/0/50\n   description L#Connected to ${hostname} interface Hu1/0/50 (${switch_model}) SVL1\n  #end\n   no shutdown\n  ! \n  #if ( $switch_model == "c9500-16x" )\n  interface Te2/0/16\n   description L#Connected to ${hostname} interface Te1/0/16 (${switch_model}) SVL2\n  #elseif ( $switch_model == "c9500-24y4c" )\n  interface Hu2/0/28\n   description L#Connected to ${hostname} interface Hu1/0/28 (${switch_model}) SVL2\n  #elseif ( $switch_model == "c9500-48y4c" )\n  interface Hu2/0/52\n   description L#Connected to ${hostname} interface Hu1/0/52 (${switch_model}) SVL2\n  #end\n   no shutdown\n  !\n  #if ( $switch_model == "c9500-16x" )\n  interface Te2/0/14\n   description L#Connected to ${hostname} interface Te1/0/14 (${switch_model}) DAD\n  #elseif ( $switch_model == "c9500-24y4c" )\n  interface Twe2/0/24\n   description L#Connected to ${hostname} interface Twe1/0/24 (${switch_model}) DAD\n  #elseif ( $switch_model == "c9500-48y4c" )\n  interface Twe2/0/48\n   description L#Connected to ${hostname} interface Twe1/0/48 (${switch_model}) DAD\n  #end\n   no shutdown\n  !\n #end\n !\n #if ( $PRIMARY == "0" )\n !\n  ! \n  #if ( $switch_model == "c9500-16x" )\n  interface Te1/0/15\n  #elseif ( $switch_model == "c9500-24y4c" )\n  interface Hu1/0/26\n  #elseif ( $switch_model == "c9500-48y4c" )\n  interface Hu1/0/50\n  #end\n   stackwise-virtual link 1\n  ! \n  #if ( $switch_model == "c9500-16x" )\n  interface Te1/0/16\n  #elseif ( $switch_model == "c9500-24y4c" )\n  interface Hu1/0/28\n  #elseif ( $switch_model == "c9500-48y4c" )\n  interface Hu1/0/52\n  #end\n   stackwise-virtual link 1\n  !\n  #if ( $switch_model == "c9500-16x" )\n  interface Te1/0/14\n  #elseif ( $switch_model == "c9500-24y4c" )\n  interface Twe1/0/24\n  #elseif ( $switch_model == "c9500-48y4c" )\n  interface Twe1/0/48\n  #end\n   stackwise-virtual dual-active-detection\n  !\n #end\n !\n ##------create EEM scripts to automate SVL------\n !\n event manager applet POST_PNP\n event timer countdown time 10\n action 1.0 cli command "enable"\n action 1.1 cli command "write"\n action 2.0 cli command "reload in 5" pattern "confirm"\n action 2.1 cli command "y"\n action 2.2 cli command "conf t"\n action 2.3 cli command "no event manager applet POST_PNP"\n action 2.4 cli command "end"\n action 2.5 cli command "write"\n action 2.5 cli command "exit"\n !\n event manager applet SVL_PRIORITY\n event syslog pattern "EEM:POST_PNP"\n action 1.0 cli command "enable"\n #if ( $PRIMARY == "1" )\n  action 1.1 cli command "switch 1 priority 15"\n##  action 1.2 cli command "y"\n  action 1.3 cli command "switch 1 renumber 1"  pattern "y/n"\n  action 1.4 cli command "y"\n #elseif ( $PRIMARY == "0" )\n  action 1.1 cli command "switch 1 priority 14"\n##  action 1.2 cli command "y"\n  action 1.3 cli command "switch 1 renumber 2"  pattern "y/n"\n  action 1.4 cli command "y"\n #end\n action 1.5 cli command "conf t"\n action 1.6 cli command "no event manager applet SVL_PRIORITY"\n action 1.7 cli command "end"\n action 2.0 cli command "write"\n !\n#end', 'rollbackTemplateContent': '', 'templateParams': [{'parameterName': 'Uplink-to-rt01', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Uplink port to router 1 ', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': 'Example: Te1/1/1', 'group': None, 'order': 16, 'customOrder': 17, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '174313c1-892c-452b-80d1-c40a827814df'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '9b687fc6-7281-448b-9fa4-f345bffc911e'}, {'parameterName': 'switch_role', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Please select the role of the switch:\nCOLLAPSED_CORE - Router connection and L2/L3 border (L2 Access Switches attached)\nCORE - Router connection, no L2/L3 border\nDISTRIBUTION - no Router connection, with L2/L3 border', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': 'Role of the switch', 'group': None, 'order': 2, 'customOrder': 3, 'selection': {'selectionType': 'SINGLE_SELECT', 'selectionValues': {'COLLAPSED_CORE': 'COLLAPSED_CORE', 'CORE': 'CORE', 'DISTRIBUTION': 'DISTRIBUTION'}, 'defaultSelectedValues': [], 'id': '9d0c4730-af03-4ae8-855d-a0f517c441e2'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'b4685842-3f35-4ea6-9743-f4e8748bd4ab'}, {'parameterName': 'deploy_vlan_type', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Do you want to deploy all your SVI\'s in "shutdown" or "no shutdown"?', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': "enable or disable your SVI's", 'group': None, 'order': 12, 'customOrder': 6, 'selection': {'selectionType': 'SINGLE_SELECT', 'selectionValues': {'no shutdown': 'no shutdown', 'shutdown': 'shutdown'}, 'defaultSelectedValues': [], 'id': 'fc786cb1-ac61-4177-8aee-a563da41d273'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '229af4fa-f039-45f9-b31c-d99b41e1e7be'}, {'parameterName': 'Network-Mgmt_Mask', 'dataType': 'IPADDRESS', 'defaultValue': None, 'description': 'Please fill in your core/distribution switch VLAN 1000 subnet mask.', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': '255.255.255.128', 'group': None, 'order': 11, 'customOrder': 8, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': 'c76fd2d2-0917-4b65-9edc-d312ff04a4ad'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '05efece0-c118-4de1-8a79-8818149111c9'}, {'parameterName': 'switch_stack_members', 'dataType': 'INTEGER', 'defaultValue': None, 'description': '[only required for C9300]\nPlease select the number of switches in the stack', 'required': False, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': '[only required for C9300] 1 to 8', 'group': None, 'order': 19, 'customOrder': 9, 'selection': {'selectionType': 'SINGLE_SELECT', 'selectionValues': {'1': '1', '2': '2', '3': '3', '4': '4', '5': '5', '6': '6', '7': '7', '8': '8'}, 'defaultSelectedValues': [], 'id': '5f418ca9-a981-482c-8da4-8d574d906085'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'fa1d9dd3-ff5c-4dc4-b80b-d225e932fb5e'}, {'parameterName': 'PRIMARY', 'dataType': 'INTEGER', 'defaultValue': None, 'description': '[only required for SVL setup] Is this switch SVL Primary or Secondary?', 'required': False, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': '[only required for SVL setup] Primary or Secondary', 'group': None, 'order': 20, 'customOrder': 25, 'selection': {'selectionType': 'SINGLE_SELECT', 'selectionValues': {'Primary': '1', 'Secondary': '0'}, 'defaultSelectedValues': [], 'id': 'efe59d07-4ac8-4983-9e44-f13ee7372932'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '5a209f69-0b9a-4d79-8ff9-2ac0100c7d4c'}, {'parameterName': 'Network-Mgmt_IP', 'dataType': 'IPADDRESS', 'defaultValue': None, 'description': 'Please fill in your core/distribution switch VLAN 1000 ip address', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': '10.45.3.1', 'group': None, 'order': 10, 'customOrder': 7, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': 'a4675b59-5a3b-486a-a9bd-12195a325bb1'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '64f2a191-3e1e-447b-b710-255082709562'}, {'parameterName': 'loopback0-ip-address', 'dataType': 'IPADDRESS', 'defaultValue': None, 'description': 'Please fill in your core/distribution switch management ip address', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': '10.1.1.1', 'group': None, 'order': 9, 'customOrder': 5, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '4118ef68-c8a0-432d-a29c-db7c562824f1'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '73b6d324-efe0-4605-b42a-54430bf1996d'}, {'parameterName': 'zone', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Please select the region of your site.', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 13, 'customOrder': 2, 'selection': {'selectionType': 'SINGLE_SELECT', 'selectionValues': {'APAC': 'APAC', 'CANADA': 'CANADA', 'EMEA': 'EMEA', 'LATAM': 'LATAM', 'US-EAST': 'US-EAST', 'US-WEST': 'US-WEST'}, 'defaultSelectedValues': [], 'id': '89afa9a1-353e-457f-916d-247374646bd0'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '3860b235-1dab-4a87-a4dd-bc44c05fea22'}, {'parameterName': 'Router2_uplink_IP', 'dataType': 'IPADDRESS', 'defaultValue': None, 'description': 'Please specify the IP address of the P2P uplink towards Router2.\n\nNOTE: the link is IP P2P interface with subnet mask /30, the first IP is used by the router, use the second IP for the Core switch.', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': '10.1.1.6', 'group': None, 'order': 24, 'customOrder': 20, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '61e4cb01-0257-4254-a4e5-2b13fff7520f'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '2ea904c8-73fe-49f7-84e0-138a0c8cf5ce'}, {'parameterName': 'SVL_setup', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Please choose if this is Stackwise Virtual setup or not.', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': 'YES or NO', 'group': None, 'order': 3, 'customOrder': 23, 'selection': {'selectionType': 'SINGLE_SELECT', 'selectionValues': {'NO': 'NO', 'YES': 'YES'}, 'defaultSelectedValues': [], 'id': 'a5623771-e699-4147-a2e3-16bf61ce89dd'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'd4ffb09d-e496-4e53-aa88-e84670ef4be5'}, {'parameterName': 'router_interface_2', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Please specify the downlink interface of the Router 2.', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': 'Example: Gi1/0/1', 'group': None, 'order': 23, 'customOrder': 22, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': 'f8ac8671-890b-42de-9b12-c9bdcf1c2145'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '9342a162-7cfe-41fa-86a2-09449d0bf580'}, {'parameterName': 'WLAN-Mgmt_IP', 'dataType': 'IPADDRESS', 'defaultValue': None, 'description': "[If you don't require this subnet then leave empty] Vlan 805 - WLAN MGMT - Please fill in your IP address only.", 'required': False, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': "[If you don't require this subnet then leave empty] 1.1.3.1", 'group': None, 'order': 7, 'customOrder': 15, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': 'ab2628aa-bf94-4236-bdb4-5242aca27f9d'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '061e7b27-182f-4ab5-b7f5-471415c3cb7e'}, {'parameterName': 'user_vlan_mask', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Please list all of your user vlan subnet masks separated by a comma!\n(use the same order as for the user vlan IDs)', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': '255.255.255.0,255.255.255.128,255.255.255.192', 'group': None, 'order': 15, 'customOrder': 12, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '81847434-9946-4c06-b916-1176e31f8dc1'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '497bb003-a16b-4aea-a447-823fe6b57522'}, {'parameterName': 'Uplink-to-rt02', 'dataType': 'STRING', 'defaultValue': None, 'description': "Uplink port to router 2.\n[If you don't require Router 2 then leave empty]", 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': "[If you don't require this subnet then leave empty] Te2/1/1", 'group': None, 'order': 17, 'customOrder': 18, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '32653878-19ff-470c-9b2c-428d2c6d20a1'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'cf4c3322-a801-463e-8c05-5075da9e34da'}, {'parameterName': 'router_interface_1', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Please specify the downlink interface of the Router 1.', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': 'Example: Gi1/0/1', 'group': None, 'order': 21, 'customOrder': 21, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '762ddead-7645-47ed-a0b5-04b9c7c7a067'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '80018bfa-c349-42a0-84df-bcba7d57c654'}, {'parameterName': 'user_vlanids', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Please list all of your user vlan IDs separated by a comma!', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': '10,11,12', 'group': None, 'order': 4, 'customOrder': 10, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '277d0180-f2de-483e-87fd-1a216c17d155'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '53a606e0-bb0e-40d2-97a2-4e16e8d4924f'}, {'parameterName': 'user_vlan_ipaddress', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Please list all of your user vlan ip addresses separated by a comma!\n(use the same order as for the user vlan IDs)', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': '10.1.1.1,10.1.2.1,10.1.3.1', 'group': None, 'order': 14, 'customOrder': 11, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': 'c23f9b6b-8e42-44e1-99cf-dcc8ff242c5a'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '6dbe3049-0524-4de2-bf3e-167c169ffc0a'}, {'parameterName': 'Voice_IP', 'dataType': 'IPADDRESS', 'defaultValue': None, 'description': "[If you don't require this subnet then leave empty] Vlan 710 - Voice - Please fill in your IP address only. \n\n", 'required': False, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': "[If you don't require this subnet then leave empty] 1.1.2.1", 'group': None, 'order': 5, 'customOrder': 13, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '8c06061b-89e3-4052-beb6-2c56d4dcdf86'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'c612aff2-7c50-4be7-9936-3f5bb2efe433'}, {'parameterName': 'hostname', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Please fill in you host name like this:\nLID code + rs000 + number of the core/distribution switch in the site. \nExample: az18rs0001', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': 'az18rs0001', 'group': None, 'order': 1, 'customOrder': 1, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '0b1a3640-f967-429d-8f20-74fdcf932bf5'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '84357177-7fb7-4afc-86bc-9c6d1adcfd27'}, {'parameterName': 'WLAN-Mgmt_Mask', 'dataType': 'IPADDRESS', 'defaultValue': None, 'description': "[If you don't require this subnet then leave empty] Vlan 805 - WLAN MGMT - Please fill in your subnet mask only.", 'required': False, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': "[If you don't require this subnet then leave empty] 255.255.255.0", 'group': None, 'order': 8, 'customOrder': 16, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '15e74aa7-de53-4cac-87b9-be6196e75735'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'be79babf-baed-423b-ad02-b0f7bd702d11'}, {'parameterName': 'switch_model', 'dataType': 'STRING', 'defaultValue': None, 'description': 'Select model of your switch', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': 'Switch model', 'group': None, 'order': 18, 'customOrder': 4, 'selection': {'selectionType': 'SINGLE_SELECT', 'selectionValues': {'c9300': 'c9300', 'c9500-16x': 'c9500-16x', 'c9500-24y4c': 'c9500-24y4c', 'c9500-48y4c': 'c9500-48y4c'}, 'defaultSelectedValues': [], 'id': '5de28651-80b5-43c5-aed8-a9802cd69272'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '263fc528-7ba9-46fb-bf68-c42a785d20d4'}, {'parameterName': 'Router1_uplink_IP', 'dataType': 'IPADDRESS', 'defaultValue': None, 'description': 'Please specify the IP address of the P2P uplink towards Router1.\n\nNOTE: the link is IP P2P interface with subnet mask /30, the first IP is used by the router, use the second IP for the Core switch.', 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': '10.1.1.2', 'group': None, 'order': 22, 'customOrder': 19, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '11ad234f-5af4-4f48-81ec-b4eb32b69753'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '23d10591-96e0-4884-8b9d-80f8450c9baa'}, {'parameterName': 'Voice_Mask', 'dataType': 'IPADDRESS', 'defaultValue': None, 'description': "[If you don't require this subnet then leave empty] Vlan 710 - Voice - Please fill in your subnet mask only.", 'required': False, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': "[If you don't require this subnet then leave empty] 255.255.255.0", 'group': None, 'order': 6, 'customOrder': 14, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '2dca8813-2517-44b5-b56b-9043bd4ebab4'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'c96a8449-80a9-4a6c-a8e7-983eecfdb623'}], 'rollbackTemplateParams': [], 'composite': False, 'containingTemplates': [], 'language': 'VELOCITY', 'id': 'ed45584c-0309-4803-819c-1034a92d150f', 'version': '5', 'customParamsOrder': True, 'createTime': 1614940643767, 'lastUpdateTime': 1616658137688, 'latestVersionTime': 1616658163144, 'projectName': 'Onboarding Configuration', 'projectId': 'e9658000-2088-453f-9941-0ab2277f149c', 'parentTemplateId': '9f14d60a-2e01-4a3e-a8b2-a6e84b74633e', 'validationErrors': {'templateErrors': [], 'rollbackTemplateErrors': [], 'templateId': 'ed45584c-0309-4803-819c-1034a92d150f'}, 'projectAssociated': True, 'documentDatabase': False}
##get LID from hostname variable
#set( $LID = $hostname.substring(0,4) )
##get SVL Domain number from hostname variable
#set ($hostname-split = $hostname.split('[a-z0-9][a-z0-9][a-z0-9][a-z0-9]rs'))
#set ($SVL_domain = $hostname-split.get(1))
!
##set the variables so they wont appear in the list of the GUI variables as these are used only inside of the template scripts.
#set($vlans = [])
#set($iplist = [])
#set($masklist = [])
#set($mask = [])
#set($finalip2 = [])
!
##------ Nonessential services----
!
no service pad
no service udp-small-servers
no service tcp-small-servers
no ip finger
no ip bootp server
no platform punt-keepalive disable-kernel-core
no ip source-route
no ip http server
no ip http secure-server
!
##------ Active services----
!
service tcp-keepalives-in
service tcp-keepalives-out
service timestamps debug datetime msec show-timezone
service timestamps log datetime msec show-timezone
service password-encryption
!
cdp run
lldp run
!
##------ Basic configuration----
!
hostname ${hostname}-PNP
!
no aaa new-model
!
## following enable/username configs are used only for PnP staging, the correct Honeywell enable/username passwords are defined in Day-N templates
!
enable secret HonMgmtLocal
!
username HonMgmtLocal secret HonMgmtLocal
!
ip domain-name net.honeywell.com
!
no ip domain-lookup
!
ip ssh version 2
ip ssh time-out 60
ip ssh authentication-retries 3
ip ssh source-interface Lo0
!
crypto key generate rsa general-keys modulus 2048
!
errdisable recovery cause udld
errdisable recovery cause bpduguard
errdisable recovery cause channel-misconfig
errdisable recovery cause link-flap
errdisable recovery cause psecure-violation
errdisable recovery cause port-mode-failure
errdisable recovery cause dhcp-rate-limit
errdisable recovery cause mac-limit
errdisable recovery cause inline-power
!
ip ftp source-interface Loopback0
ip tftp source-interface Loopback0
!
##---------VTP-------
!
vtp mode off
!
##---------Spanning Tree Protocol and Associated Protocols -------
!
spanning-tree mode rapid-pvst
spanning-tree loopguard default
spanning-tree portfast bpduguard default
spanning-tree extend system-id
!
#if ($switch_role.toString().contains("CORE"))
 #if ($SVL_setup == "YES")
  spanning-tree vlan 1-4093 priority 4096
 #else
  spanning-tree vlan 1-4094 priority 4096
 #end
#elseif ($switch_role == 'DISTRIBUTION')
 #if ($SVL_setup == "YES")
  spanning-tree vlan 1-4093 priority 4096
 #else
  spanning-tree vlan 1-4094 priority 4096
 #end
#end
!
udld enable
!
##---------Layer2--------
!
#if (($switch_role == 'COLLAPSED_CORE') || ($switch_role == 'DISTRIBUTION'))
!
##Vlan Description
##split vlan IDs list by either comma or space, then configure all the user VLANs and other basic VLANs
!
#if($user_vlanids.toString().contains(","))
#set ($vlans = $user_vlanids.split('\,'))
#else
#set ($vlans = $user_vlanids.split('\ '))
#end
!
#foreach ($vlan in $vlans)
 !
 vlan ${vlan}
  name User_${vlan}
 !
#end
!
#if ( $Voice_IP != "" && $Voice_Mask != "" )
vlan 710
 name Voice
#end
!
vlan 999
 name NATIVE_vlan
!
#if ( $WLAN-Mgmt_IP != "" && $WLAN-Mgmt_Mask != "" )
vlan 805
 name WLAN-Mgmt
#end
!
vlan 1000
 name Network-Mgmt
!
#end
!
##---------Layer3--------
!
ip routing
!
interface Vlan1
 shutdown
!
interface Vlan1000
 no ip address
 shut
!
interface loopback0
 description |MANAGEMENT|
 ip address ${loopback0-ip-address} 255.255.255.255
 no ip redirects
 no ip unreachables
 no ip proxy-arp
 ip pim sparse-mode
 ip ospf 1 area 1
 no shutdown
!
#if (($switch_role == 'COLLAPSED_CORE') || ($switch_role == 'DISTRIBUTION'))
 interface Vlan1000
  description MGMT Vlan
  ip address ${Network-Mgmt_IP} ${Network-Mgmt_Mask}
  no ip redirects
  no ip unreachables
  no ip proxy-arp
  ip pim sparse-mode
  ip ospf 1 area 1
  #if ( $deploy_vlan_type == "no shutdown" )
  no shutdown
  #elseif ( $deploy_vlan_type == "shutdown" )
  shutdown
  #end
 !
 #if ( $WLAN-Mgmt_IP != "" && $WLAN-Mgmt_Mask != "" )
 interface Vlan805
  description WLAN MGMT Vlan
  ip address ${WLAN-Mgmt_IP} ${WLAN-Mgmt_Mask}
  #if ($zone.toString().contains("US-WEST") || $zone.toString().contains("US-EAST") || $zone.toString().contains("LATAM") || $zone.toString().contains("CANADA"))
  ip helper-address 10.192.14.225
  ip helper-address 10.216.14.220
  #elseif ($zone.toString().contains("EMEA"))
  ip helper-address 10.238.2.205
  ip helper-address 10.216.14.225
  #elseif ($zone.toString().contains("APAC"))
  ip helper-address 199.63.219.142
  ip helper-address 10.192.14.220
  #end
  ip helper-address 10.195.2.40
  ip helper-address 10.217.95.21
  no ip redirects
  no ip unreachables
  no ip proxy-arp
  ip pim sparse-mode
  ip ospf 1 area 1
  #if ( $deploy_vlan_type == "no shutdown" )
  no shutdown
  #elseif ( $deploy_vlan_type == "shutdown" )
  shutdown
  #end
 #end
 !
 ##User Vlans
 !
 #if($user_vlan_ipaddress.toString().contains(","))
 #set ($iplist = $user_vlan_ipaddress.split('\,'))
 #else
 #set ($iplist = $user_vlan_ipaddress.split('\ '))
 #end
 #if($user_vlan_mask.toString().contains(","))
 #set ($masklist = $user_vlan_mask.split('\,'))
 #else
 #set ($masklist = $user_vlan_mask.split('\ '))
 #end
 !
 #set ( $count = 0)
 !
 #foreach ($vlan in $vlans)
  #if ( $count != $iplist.size() )
   #set ( $ip = $iplist.get($count) )
   #set ( $mask = $masklist.get($count) )
   #set ($finalip = $ip.split('\/'))
   #set($finalip2 = $finalip.get(0))
  #else
   #break
  #end
  interface vlan ${vlan}
   description User Vlan
   ip address ${finalip2} ${mask}
   #if ($zone.toString().contains("US-WEST") || $zone.toString().contains("US-EAST") || $zone.toString().contains("LATAM") || $zone.toString().contains("CANADA"))
   ip helper-address 10.192.14.225
   ip helper-address 10.216.14.220
   #elseif ($zone.toString().contains("EMEA"))
   ip helper-address 10.238.2.205
   ip helper-address 10.216.14.225
   #elseif ($zone.toString().contains("APAC"))
   ip helper-address 199.63.219.142
   ip helper-address 10.192.14.220
   #end
   ip helper-address 10.195.2.40
   ip helper-address 10.217.95.21
   no ip redirects
   no ip unreachables
   no ip proxy-arp
   ip pim sparse-mode
   ip ospf 1 area 1
   #if ( $deploy_vlan_type == "no shutdown" )
   no shutdown
   #elseif ( $deploy_vlan_type == "shutdown" )
   shutdown
   #end
   !
  #set ( $count = $count + 1)
 #end
 !
 #if ( $Voice_IP != "" && $Voice_Mask != "" )
 interface vlan710
  description Voice Vlan
  ip address ${Voice_IP} ${Voice_Mask}
  #if ($zone.toString().contains("US-WEST") || $zone.toString().contains("US-EAST") || $zone.toString().contains("LATAM") || $zone.toString().contains("CANADA"))
  ip helper-address 10.192.14.225
  ip helper-address 10.216.14.220
  #elseif ($zone.toString().contains("EMEA"))
  ip helper-address 10.238.2.205
  ip helper-address 10.216.14.225
  #elseif ($zone.toString().contains("APAC"))
  ip helper-address 199.63.219.142
  ip helper-address 10.192.14.220
  #end
  ip helper-address 10.195.2.40
  ip helper-address 10.217.95.21
  no ip redirects
  no ip unreachables
  no ip proxy-arp
  ip pim sparse-mode
  ip ospf 1 area 1
  #if ( $deploy_vlan_type == "no shutdown" )
  no shutdown
  #elseif ( $deploy_vlan_type == "shutdown" )
  shutdown
  #end
 #end
 !
#end
!
router ospf 1
 router-id ${loopback0-ip-address}
## auto-cost reference-bandwidth 1000000
 area 1 authentication message-digest
 area 1 stub
 redistribute static metric 100 subnets route-map STATIC-TO-OSPF
 passive-interface default
!
route-map STATIC-TO-OSPF permit 10
 match tag 100
!
##--------VTY Lines-----------------
!
line con 0
 login local
 logging synchronous
!
line vty 0 15
 login local
 transport input ssh
 logging synchronous
!
line vty 16 31
 login local
 transport input ssh
 logging synchronous
!
##-------DHCP snooping----------
!
#if (($switch_role == 'COLLAPSED_CORE') || ($switch_role == 'DISTRIBUTION'))
 ip dhcp snooping vlan 1-4094
 ip dhcp snooping
 !
 ##core/distribution switch specific
 ip dhcp relay information trust-all
 !
#end
!
!
##---------QoS--------
## Qos is here so we can apply qos to interfaces now and do not have to do it later
!
!
ip access-list extended LYNC_voice
 permit tcp any any range 39040 39059
 permit udp any any range 39040 39059
 permit tcp any range 39040 39059 any
 permit udp any range 39040 39059 any
!
ip access-list extended LYNC_video
 permit udp any any range 39060 39079
 permit tcp any any range 39060 39079
 permit udp any range 39060 39079 any
 permit tcp any range 39060 39079 any
!
ip access-list extended LYNC_signaling
  permit tcp any any eq 5061
  permit tcp any eq 5061 any
!
ip access-list extended CAPWAP_control
  permit udp any any eq 5246
!
class-map match-any LYNC_voice
  match access-group name LYNC_voice
class-map match-any LYNC_video
  match access-group name LYNC_video
class-map match-any LYNC_signaling
  match access-group name LYNC_signaling
class-map match-any CAPWAP_control
  match access-group name CAPWAP_control
!
class-map egress_voice
 match dscp 40 46
class-map egress_video
  match dscp CS4 af41 af42 af43
class-map egress_critical
  match dscp af31
class-map egress_preferred
  match dscp af32 af33
class-map egress_net_control_mgmt
  match dscp cs6 AF22
class-map egress_signaling
  match dscp af21
class-map egress_bulk
  match dscp cs1
!
policy-map mark_user_interface
  class LYNC_voice
    set dscp ef
    police 160000 8000  conform-action transmit exceed-action drop
  class LYNC_video
    set dscp af41
  class LYNC_signaling
    set dscp af21
  class class-default
    set dscp default
!
policy-map mark_AP_wireless_interface
    class CAPWAP_control
      set dscp cs6
    class LYNC_voice
      set dscp ef
      police 1600000 8000 conform-action transmit exceed-action drop
    class LYNC_video
      set dscp af41
    class LYNC_signaling
      set dscp af21
    class class-default
      set dscp default
!
policy-map egress_queue
  class egress_voice
   priority level 1
   police rate percent 10
  class egress_video
    bandwidth remaining percent 34
    queue-buffers ratio 15
    queue-limit dscp AF43 percent 80
    queue-limit dscp AF42 percent 90
    queue-limit dscp AF41 percent 100
   class egress_critical
    bandwidth remaining percent 15
    queue-buffers ratio 10
   class egress_preferred
    bandwidth remaining percent 8
    queue-buffers ratio 10
    queue-limit dscp AF33 percent 80
    queue-limit dscp AF32 percent 100
   class egress_net_control_mgmt
    bandwidth remaining percent 9
    queue-buffers ratio 10
    queue-limit dscp AF23 percent 80
    queue-limit dscp AF22 percent 90
    queue-limit dscp CS6 percent 100
   class egress_signaling
     bandwidth remaining percent 8
     queue-buffers ratio 10
   class egress_bulk
     bandwidth remaining percent 1
     queue-buffers ratio 10
     queue-limit dscp AF13 percent 80
     queue-limit dscp AF12 percent 90
     queue-limit dscp AF11 percent 100
   class class-default
      bandwidth remaining percent 25
      queue-buffers ratio 25
!
policy-map mark_SBA_interface
 class LYNC_voice
  set dscp ef
 class LYNC_video
  set dscp af41
 class LYNC_signaling
  set dscp af21
 class class-default
  set dscp default
!
policy-map SBA_egress_queue
 class egress_voice
  priority level 1
  police rate percent 50
 class egress_video
  bandwidth remaining percent 5
 class egress_critical
  bandwidth remaining percent 5
 class egress_preferred
  bandwidth remaining percent 5
 class egress_net_control_mgmt
  bandwidth remaining percent 10
  queue-buffers ratio 10
 class egress_signaling
  bandwidth remaining percent 20
  queue-buffers ratio 30
 class egress_bulk
  bandwidth remaining percent 5
  queue-buffers ratio 10
 class class-default
  bandwidth remaining percent 50
  queue-buffers ratio 25
!
## ------ shutdown unprovisioned ports ----
## this is needed here because then we will configure the uplinks. If this would be in the Day-N template, we would need to develop a script to check which ports are used and which not
!
## 1) prepare the variables
!
#set($TenGig_max = 0)
#set($TwentyGig_max = 0)
#set ( $count = 0)
#set ($Uplink1 = "")
#set ($Uplink2 = "")
#set ($index = -1)
!
## 2) prepare uplink substrings so the uplinks are not shutdown
!
#if ($Uplink-to-rt01.toString().contains("/1/"))
 #set ($index = $Uplink-to-rt01.indexOf('/1/'))
#elseif ($Uplink-to-rt01.toString().contains("/0/"))
 #set ($index = $Uplink-to-rt01.indexOf('/0/'))
#end
#if ($index >= 0)
 #set ($index = $index - 1)
 #set ($Uplink1 = $Uplink-to-rt01.substring($index))
#end
!
#if ($Uplink-to-rt02.toString().contains("/1/"))
 #set ($index = $Uplink-to-rt02.indexOf('/1/'))
#elseif ($Uplink-to-rt02.toString().contains("/0/"))
 #set ($index = $Uplink-to-rt02.indexOf('/0/'))
#end
#if ($index >= 0)
 #set ($index = $index - 1)
 #set ($Uplink2 = $Uplink-to-rt02.substring($index))
#end
!
## 3) for each model, go through all interfaces, check if it is the specified uplink and if not, shut it down.
!
##C9300
#if ( $switch_model.toString().contains("c9300"))
 #foreach($switch_stack_member in [1..${switch_stack_members}])
  #foreach($count in [1..4])
   #if((($Uplink-to-rt01.startsWith("Gi")) && ($Uplink1 != "${switch_stack_member}/1/${count}" && $Uplink2 != "${switch_stack_member}/1/${count}")) || $Uplink-to-rt01.startsWith("Gi") == "false")
    interface GigabitEthernet ${switch_stack_member}/1/${count}
     shutdown
   #end
  #end
  #foreach($count in [1..8])
   #if((($Uplink-to-rt01.startsWith("Te")) && ($Uplink1 != "${switch_stack_member}/1/${count}" && $Uplink2 != "${switch_stack_member}/1/${count}")) || $Uplink-to-rt01.startsWith("Te") == "false")
    interface TenGigabitEthernet ${switch_stack_member}/1/${count}
     shutdown
   #end
  #end
  #foreach($count in [1..2])
   #if((($Uplink-to-rt01.startsWith("Fo")) && ($Uplink1 != "${switch_stack_member}/1/${count}" && $Uplink2 != "${switch_stack_member}/1/${count}")) || $Uplink-to-rt01.startsWith("Fo") == "false")
    interface FortyGigabitEthernet ${switch_stack_member}/1/${count}
     shutdown
   #end
   #if((($Uplink-to-rt01.startsWith("Twe")) && ($Uplink1 != "${switch_stack_member}/1/${count}" && $Uplink2 != "${switch_stack_member}/1/${count}")) || $Uplink-to-rt01.startsWith("Twe") == "false")
    interface TwentyFiveGigE ${switch_stack_member}/1/${count}
     shutdown
   #end
  #end
 #end
##C9500
#elseif ( $switch_model == "c9500-24y4c")
 #set($TwentyGig_max = 24)
 interface range Hu1/0/25 , Hu1/0/27
  shutdown
 #foreach ($count in [1..${TwentyGig_max}])
  #if($Uplink1 != "1/0/$count" && $Uplink2 != "1/0/$count")
   interface Twe1/0/$count
    shutdown
  #end
 #end
 #if ($SVL_setup == "YES")
  switch 2 provision $switch_model
  interface range Hu2/0/25 , Hu2/0/27
   shutdown
  #foreach ($count in [1..${TwentyGig_max}])
   #if($Uplink1 != "2/0/$count" && $Uplink2 != "2/0/$count")
    interface Twe2/0/$count
     shutdown
   #end
  #end
 #end
#elseif ( $switch_model == "c9500-48y4c")
 #set($TwentyGig_max = 48)
 interface range Hu1/0/49 , Hu1/0/51
  shutdown
 #foreach ($count in [1..${TwentyGig_max}])
  #if($Uplink1 != "1/0/$count" && $Uplink2 != "1/0/$count")
   interface Twe1/0/$count
    shutdown
  #end
 #end
 #if ($SVL_setup == "YES")
  switch 2 provision $switch_model
  interface range Hu2/0/49 , Hu2/0/51
   shutdown
  #foreach ($count in [1..${TwentyGig_max}])
   #if($Uplink1 != "2/0/$count" && $Uplink2 != "2/0/$count")
    interface Twe2/0/$count
     shutdown
   #end
  #end
 #end
#elseif ( $switch_model == "c9500-16x")
 interface range TenGigabitEthernet1/1/1 - 8
  shutdown
 interface range FortyGigabitEthernet1/1/1 - 2
  shutdown
 #set($TenGig_max = 16)
 #foreach ($count in [1..${TenGig_max}])
  #if($Uplink1 != "1/0/$count" && $Uplink2 != "1/0/$count")
   interface Te1/0/$count
    shutdown
  #end
 #end
 #if ($SVL_setup == "YES")
  switch 2 provision $switch_model
  interface range TenGigabitEthernet2/1/1 - 8
   shutdown
  interface range FortyGigabitEthernet2/1/1 - 2
   shutdown
  #foreach ($count in [1..${TenGig_max}])
   #if($Uplink1 != "2/0/$count" && $Uplink2 != "2/0/$count")
    interface Te2/0/$count
     shutdown
   #end
  #end
 #end
#end
!
##------ uplink to routers----
##Uplink routers are switched in case of SVL. This was causing Connectivity timeouts and on the Standby device the config will be overwritten anyway.
!
#if (($switch_role == 'COLLAPSED_CORE') || ($switch_role == 'CORE'))
!
#if ( $SVL_setup == "NO" || ($SVL_setup == "YES" && $PRIMARY == "1"))
 interface ${Uplink-to-rt01}
#elseif ( $SVL_setup == "YES" && $PRIMARY == "0")
 interface ${Uplink-to-rt02}
#end
 description R#Connected to ${LID}rt0001 interface ${router_interface_1}
 no  switchport
 ip address ${Router1_uplink_IP} 255.255.255.252
 ip ospf network point-to-point
 ip ospf 1 area 0
 no ip redirects
 no ip unreachables
 no ip proxy-arp
 no lldp transmit
 no lldp receive
 service-policy output egress_queue
 no shutdown
!
router ospf 1
#if ( $SVL_setup == "NO" || ($SVL_setup == "YES" && $PRIMARY == "1"))
 no passive-interface ${Uplink-to-rt01}
#elseif ( $SVL_setup == "YES" && $PRIMARY == "0")
 no passive-interface ${Uplink-to-rt02}
#end
!
#if ($Uplink-to-rt02 != "")
#if ( $SVL_setup == "NO" || ($SVL_setup == "YES" && $PRIMARY == "1"))
 interface ${Uplink-to-rt02}
#elseif ( $SVL_setup == "YES" && $PRIMARY == "0")
 interface ${Uplink-to-rt01}
#end
 description R#Connected to ${LID}rt0002 interface ${router_interface_2}
 no  switchport
 ip address ${Router2_uplink_IP} 255.255.255.252
 ip ospf network point-to-point
 ip ospf 1 area 0
 no ip redirects
 no ip unreachables
 no ip proxy-arp
 no lldp transmit
 no lldp receive
 service-policy output egress_queue
 no shutdown
!
router ospf 1
#if ( $SVL_setup == "NO" || ($SVL_setup == "YES" && $PRIMARY == "1"))
 no passive-interface ${Uplink-to-rt02}
#elseif ( $SVL_setup == "YES" && $PRIMARY == "0")
 no passive-interface ${Uplink-to-rt01}
#end
!
#end
#end
!
##-------PnP DHCP scope------------------------
!
ip dhcp excluded-address ${Network-Mgmt_IP}
ip dhcp pool pnp_device_pool
 network ${Network-Mgmt_IP} ${Network-Mgmt_Mask}
 default-router ${Network-Mgmt_IP}
 #if ( $zone == "US-WEST" || $zone == "CANADA" || $zone == "LATAM")
  option 43 ascii "5A1D;B2;K4;I10.195.2.201;J80"
 #elseif ($zone == "EMEA")
  option 43 ascii "5A1D;B2;K4;I10.238.1.10;J80"
 #elseif ($zone == "APAC")
  option 43 ascii "5A1D;B2;K4;I10.79.19.100;J80"
 #end
!
pnp startup-vlan 1000
!
##---setting the zone into SNMP-location, will be later used for templating
!
#if ( $zone == "US-WEST" )
 snmp-server location US-WEST
#elseif ( $zone == "CANADA" )
 snmp-server location CANADA
#elseif ( $zone == "LATAM" )
 snmp-server location LATAM
#elseif ( $zone == "US-EAST" )
 snmp-server location US-EAST
#elseif ( $zone == "EMEA" )
 snmp-server location EMEA
#elseif ( $zone == "APAC" )
 snmp-server location APAC
#end
!
##------ switch priority ------
!
#if ( $SVL_setup == "NO" )
 #set ( $scount = 0)
 #set ( $Priority = 14)
 #if ($switch_stack_members > 0)
  #foreach($switch_stack_member in [1..${switch_stack_members}])
   do switch ${switch_stack_member} priority ${Priority}
   #set ( $Priority = $Priority - 1)
  #end
 !
 #end
!
#end
!
#if ( $SVL_setup == "YES" )
 !
 ##-----enable NSF------
 !
 router ospf 1
  nsf cisco
 !
 ##-----configure SVL with the domain #------
 !
 stackwise-virtual
  domain $SVL_domain
 exit
 !
 ##------configure SVL interfaces based on chosen model------
 !
 #if ( $PRIMARY == "1" )
  switch 2 provision $switch_model
  !
  !
  #if ( $switch_model == "c9500-16x" )
  interface Te1/0/15
   description L#Connected to ${hostname} interface Te2/0/15 (${switch_model}) SVL1
  #elseif ( $switch_model == "c9500-24y4c" )
  interface Hu1/0/26
   description L#Connected to ${hostname} interface Hu2/0/26 (${switch_model}) SVL1
  #elseif ( $switch_model == "c9500-48y4c" )
  interface Hu1/0/50
   description L#Connected to ${hostname} interface Hu2/0/50 (${switch_model}) SVL1
  #end
   stackwise-virtual link 1
  !
  #if ( $switch_model == "c9500-16x" )
  interface Te1/0/16
   description L#Connected to ${hostname} interface Te2/0/16 (${switch_model}) SVL2
  #elseif ( $switch_model == "c9500-24y4c" )
  interface Hu1/0/28
   description L#Connected to ${hostname} interface Hu2/0/28 (${switch_model}) SVL2
  #elseif ( $switch_model == "c9500-48y4c" )
  interface Hu1/0/52
   description L#Connected to ${hostname} interface Hu2/0/52 (${switch_model}) SVL2
  #end
   stackwise-virtual link 1
  !
  #if ( $switch_model == "c9500-16x" )
  interface Te1/0/14
   description L#Connected to ${hostname} interface Te2/0/14 (${switch_model}) DAD
  #elseif ( $switch_model == "c9500-24y4c" )
  interface Twe1/0/24
   description L#Connected to ${hostname} interface Twe2/0/24 (${switch_model}) DAD
  #elseif ( $switch_model == "c9500-48y4c" )
  interface Twe1/0/48
   description L#Connected to ${hostname} interface Twe2/0/48 (${switch_model}) DAD
  #end
   stackwise-virtual dual-active-detection
  !
  #if ( $switch_model == "c9500-16x" )
  interface Te2/0/15
   description L#Connected to ${hostname} interface Te1/0/15 (${switch_model}) SVL1
  #elseif ( $switch_model == "c9500-24y4c" )
  interface Hu2/0/26
   description L#Connected to ${hostname} interface Hu1/0/26 (${switch_model}) SVL1
  #elseif ( $switch_model == "c9500-48y4c" )
  interface Hu2/0/50
   description L#Connected to ${hostname} interface Hu1/0/50 (${switch_model}) SVL1
  #end
   no shutdown
  !
  #if ( $switch_model == "c9500-16x" )
  interface Te2/0/16
   description L#Connected to ${hostname} interface Te1/0/16 (${switch_model}) SVL2
  #elseif ( $switch_model == "c9500-24y4c" )
  interface Hu2/0/28
   description L#Connected to ${hostname} interface Hu1/0/28 (${switch_model}) SVL2
  #elseif ( $switch_model == "c9500-48y4c" )
  interface Hu2/0/52
   description L#Connected to ${hostname} interface Hu1/0/52 (${switch_model}) SVL2
  #end
   no shutdown
  !
  #if ( $switch_model == "c9500-16x" )
  interface Te2/0/14
   description L#Connected to ${hostname} interface Te1/0/14 (${switch_model}) DAD
  #elseif ( $switch_model == "c9500-24y4c" )
  interface Twe2/0/24
   description L#Connected to ${hostname} interface Twe1/0/24 (${switch_model}) DAD
  #elseif ( $switch_model == "c9500-48y4c" )
  interface Twe2/0/48
   description L#Connected to ${hostname} interface Twe1/0/48 (${switch_model}) DAD
  #end
   no shutdown
  !
 #end
 !
 #if ( $PRIMARY == "0" )
 !
  !
  #if ( $switch_model == "c9500-16x" )
  interface Te1/0/15
  #elseif ( $switch_model == "c9500-24y4c" )
  interface Hu1/0/26
  #elseif ( $switch_model == "c9500-48y4c" )
  interface Hu1/0/50
  #end
   stackwise-virtual link 1
  !
  #if ( $switch_model == "c9500-16x" )
  interface Te1/0/16
  #elseif ( $switch_model == "c9500-24y4c" )
  interface Hu1/0/28
  #elseif ( $switch_model == "c9500-48y4c" )
  interface Hu1/0/52
  #end
   stackwise-virtual link 1
  !
  #if ( $switch_model == "c9500-16x" )
  interface Te1/0/14
  #elseif ( $switch_model == "c9500-24y4c" )
  interface Twe1/0/24
  #elseif ( $switch_model == "c9500-48y4c" )
  interface Twe1/0/48
  #end
   stackwise-virtual dual-active-detection
  !
 #end
 !
 ##------create EEM scripts to automate SVL------
 !
 event manager applet POST_PNP
 event timer countdown time 10
 action 1.0 cli command "enable"
 action 1.1 cli command "write"
 action 2.0 cli command "reload in 5" pattern "confirm"
 action 2.1 cli command "y"
 action 2.2 cli command "conf t"
 action 2.3 cli command "no event manager applet POST_PNP"
 action 2.4 cli command "end"
 action 2.5 cli command "write"
 action 2.5 cli command "exit"
 !
 event manager applet SVL_PRIORITY
 event syslog pattern "EEM:POST_PNP"
 action 1.0 cli command "enable"
 #if ( $PRIMARY == "1" )
  action 1.1 cli command "switch 1 priority 15"
##  action 1.2 cli command "y"
  action 1.3 cli command "switch 1 renumber 1"  pattern "y/n"
  action 1.4 cli command "y"
 #elseif ( $PRIMARY == "0" )
  action 1.1 cli command "switch 1 priority 14"
##  action 1.2 cli command "y"
  action 1.3 cli command "switch 1 renumber 2"  pattern "y/n"
  action 1.4 cli command "y"
 #end
 action 1.5 cli command "conf t"
 action 1.6 cli command "no event manager applet SVL_PRIORITY"
 action 1.7 cli command "end"
 action 2.0 cli command "write"
 !
#end

C:\Users\H421923\DNAC-TemplateProgrammer>python.exe template.py --template "Onboarding Configuration/Hon-core-initial template-OLD"
Enter DNAC URL :apac-dna.honeywell.com
Looking for: Onboarding Configuration/Hon-core-initial template-OLD
https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template
TemplateId: 7bcf85ac-6387-4e51-a858-3e4472c4c7a0 Version: 3

https://apac-dna.honeywell.com:443/dna/intent/api/v1/template-programmer/template/7bcf85ac-6387-4e51-a858-3e4472c4c7a0
Showing Template Body:
{'name': 'Hon-core-initial template-OLD', 'description': 'Base Template', 'author': 'h421149', 'deviceTypes': [{'productFamily': 'Switches and Hubs'}], 'softwareType': 'IOS-XE', 'softwareVariant': 'XE', 'templateContent': 'no service pad\nservice tcp-keepalives-in\nservice tcp-keepalives-out\nservice timestamps debug datetime show-timezone\nservice timestamps log datetime show-timezone\nservice password-encryption\nservice compress-config\nno platform punt-keepalive disable-kernel-core\nudld enable\n!\nhostname ${hostname}\n!\nvrf definition Mgmt-vrf\n !\n address-family ipv4\n exit-address-family\n !\n address-family ipv6\n exit-address-family\n!\nlogging buffered 16384\nlogging console errors\n!\n!\n!\nno aaa new-model\n!\n!\n!\nno ip finger\n!\nlldp run\n!\nno ip source-route\nip routing\n!\nip host tftp 135.89.201.98\nip name-server 10.192.2.45 10.216.2.51\nip domain name net.honeywell.com\n!\nno service udp-small-servers \nno service tcp-small-servers\nno ip bootp server\n!\ninterface loopback0\nip address ${loopback0_IP} 255.255.255.255\nno ip redirects\nno ip unreachables\nno ip proxy-arp\nno shutdown\n!\nint vlan 1\nno ip address\nshutdown\n!\ninterface ${R1_Uplink_PORT}\n##switchport mode trunk\nno sw\nip address ${Core_Wan_int_Point_To_Point_IP} ${Core_Wan_int_Point_To_Point_MASK}\n##switchport trunk allowed vlan 1000,403\n##switchport trunk native vlan 100\nip ospf network point-to-point\ncts manual \npolicy static sgt 2 trusted\n!\n#if ($Defualt_Route_ip != \'0.0.0.0\')\nip route 0.0.0.0 0.0.0.0 ${Defualt_Route_ip} 200\n#end\n!\n#if ($R2_Uplink_PORT != \'0.0.0.0\')\ninterface ${R2_Uplink_PORT}\ndescription *R2_Uplink_PORT*\nrouter ospf 100\nno passive-interface ${R2_Uplink_PORT}\n#end\n!\n!---Vlan Description---\n!split vlan IDs list by either comma or backslash\n!\n#if($data_vlanids.toString().contains(","))\n#set ($vlans = $data_vlanids.split(\'\\,\'))\n\n#else\n#set ($vlans = $data_vlanids.split(\'\\ \'))\n#end\n\n!split ip addresses list by either comma or backslash\n\n\n#if($data_vlan_ipaddress.toString().contains(","))\n#set ($iplist = $data_vlan_ipaddress.split(\'\\,\'))\n#else\n#set ($iplist = $data_vlan_ipaddress.split(\'\\ \'))\n#end\n\n#set ( $count = 0)\n#foreach ($vlan in $vlans)\n    #if ( $count != $iplist.size() )\n        #set ( $ip = $iplist.get($count) )\n    #else \n        #break\n    #end\n\nvlan ${vlan}\nname datavlan_${ip} \n    #set ( $count = $count + 1)\n\n#end\n!\nVLAN 710\nname Voice_${Vlan_710_Voice_Des_IpSub_Mask}\n!\nvlan 801\nname WLAN-Eprize2_${Vlan_801_WLAN-Dec_Eprize2_IpSub_Mask}\n!\nvlan 802\nname WLAN-Guest_${Vlan_802_Dec_WLAN-Guest_IpSub_Mask}\n!\nvlan 803\nname WLAN-Industrial_${Vlan803_Dec_WLAN-Industrial_IpSub_Mask}\n!\nvlan 804\nname WLAN-Mprize_${Vlan804_Dec_wlan-mprize_IpSub_Mask}\n!\nvlan 805\nname WLAN-Mgmt_${Vlan_805_Dec_wlan-mgmt_IpSub_Mask}\n!\nvlan 1000\nname Network-Mgmt_${network-MGMT_IpSub_Mask}\n!\n#if ( $deploy_type_mgmt_vlan == "no shutdown" )\ninterface vlan1000\nip address ${Network-Mgmt_IP} ${Network-Mgmt_Mask}\nno ip redirects\nno ip unreachables\nno ip proxy-arp\nno shutdown\n!\n#if (($Voice_IP != "0.0.0.0") && ($Voice_Mask != "0.0.0.0"))\ninterface vlan710\nip address ${Voice_IP} ${Voice_Mask}\nno shutdown\n#end\n!\n#if (($WLAN_Eprize2_IP != "0.0.0.0") && ($WLAN_Eprize2_Mask != "0.0.0.0"))\ninterface vlan801\nip address ${WLAN_Eprize2_IP} ${WLAN_Eprize2_Mask}\nno shutdown\n#end\n!\n#if (($WLAN-Guest_IP != "0.0.0.0") && ($WLAN-Guest_Mask != "0.0.0.0"))\ninterface vlan802\nip address ${WLAN-Guest_IP} ${WLAN-Guest_Mask}\nno shutdown\n#end\n!\n#if (($WLAN-Industrial_IP != "0.0.0.0") && ($WLAN-Industrial_Mask != "0.0.0.0"))\ninterface vlan803\nip address ${WLAN-Industrial_IP} ${WLAN-Industrial_Mask}\nno shutdown\n#end\n!\n#if (($WLAN-Mprize_IP != "0.0.0.0") && ($WLAN-Mprize_Mask != "0.0.0.0"))\ninterface vlan804\nip address ${WLAN-Mprize_IP} ${WLAN-Mprize_Mask}\nno shutdown\n#end\n!\n#if (($WLAN-Mgmt_IP != "0.0.0.0") && ($WLAN-Mgmt_Mask != "0.0.0.0"))\ninterface vlan805\nip address ${WLAN-Mgmt_IP} ${WLAN-Mgmt_Mask}\nno shutdown\n#end\n!\n!--Interface vlans IP Filter--\n\n#if($data_vlan_mask.toString().contains(","))\n#set ($masklist = $data_vlan_mask.split(\'\\,\'))\n\n#else\n#set ($masklist = $data_vlan_mask.split(\'\\ \'))\n#end\n\n#set ( $count = 0)\n#foreach ($vlan in $vlans)\n\n#if ( $count != $iplist.size() )\n#set ( $ip = $iplist.get($count) )\n#set ( $mask = $masklist.get($count) )\n#set ($finalip = $ip.split(\'\\/\'))\n#set($finalip2 = $finalip.get(0))\n#else \n#break\n#end\ninterface vlan ${vlan}\nip address ${finalip2} ${mask}\n#if ( $iphelper == "US&CANALA" )\nip helper-address 10.192.14.225\nip helper-address 10.216.14.220\n#end\n#if ( $iphelper == "EMEA" )\nip helper-address 10.238.2.205\nip helper-address 10.216.14.225\n#end\n#if ( $iphelper == "APAC" )\nip helper-address 199.63.219.142\nip helper-address 10.192.14.220\n#end\nno ip redirects\nno ip unreachables\nno ip proxy-arp\nno shutdown\n#set ( $count = $count + 1)\n#end\n!\n#else\ninterface vlan1000\nip address ${Network-Mgmt_IP} ${Network-Mgmt_Mask}\nno ip redirects\nno ip unreachables\nno ip proxy-arp\nshutdown\n!\n#if (($Voice_IP != "0.0.0.0") && ($Voice_Mask != "0.0.0.0"))\ninterface vlan710\nip address ${Voice_IP} ${Voice_Mask}\nshutdown\n#end\n!\n#if (($WLAN_Eprize2_IP != "0.0.0.0") && ($WLAN_Eprize2_Mask != "0.0.0.0"))\ninterface vlan801\nip address ${WLAN_Eprize2_IP} ${WLAN_Eprize2_Mask}\nshutdown\n#end\n!\n#if (($WLAN-Guest_IP != "0.0.0.0") && ($WLAN-Guest_Mask != "0.0.0.0"))\ninterface vlan802\nip address ${WLAN-Guest_IP} ${WLAN-Guest_Mask}\nshutdown\n#end\n!\n#if (($WLAN-Industrial_IP != "0.0.0.0") && ($WLAN-Industrial_Mask != "0.0.0.0"))\ninterface vlan803\nip address ${WLAN-Industrial_IP} ${WLAN-Industrial_Mask}\nshutdown\n#end\n!\n#if (($WLAN-Mprize_IP != "0.0.0.0") && ($WLAN-Mprize_Mask != "0.0.0.0"))\ninterface vlan804\nip address ${WLAN-Mprize_IP} ${WLAN-Mprize_Mask}\nshutdown\n#end\n!\n#if (($WLAN-Mgmt_IP != "0.0.0.0") && ($WLAN-Mgmt_Mask != "0.0.0.0"))\ninterface vlan805\nip address ${WLAN-Mgmt_IP} ${WLAN-Mgmt_Mask}\nshutdown\n#end\n!--Interface vlans IP Filter--\n\n#if($data_vlan_mask.toString().contains(","))\n#set ($masklist = $data_vlan_mask.split(\'\\,\'))\n\n#else\n#set ($masklist = $data_vlan_mask.split(\'\\ \'))\n#end\n\n#set ( $count = 0)\n#foreach ($vlan in $vlans)\n\n#if ( $count != $iplist.size() )\n#set ( $ip = $iplist.get($count) )\n#set ( $mask = $masklist.get($count) )\n#set ($finalip = $ip.split(\'\\/\'))\n#set($finalip2 = $finalip.get(0))\n#else \n#break\n#end\ninterface vlan ${vlan}\nip address ${finalip2} ${mask}\n#if ( $iphelper == "US&CANALA" )\nip helper-address 10.192.14.225\nip helper-address 10.216.14.220\n#end\n#if ( $iphelper == "EMEA" )\nip helper-address 10.238.2.205\nip helper-address 10.216.14.225\n#end\n#if ( $iphelper == "APAC" )\nip helper-address 199.63.219.142\nip helper-address 10.192.14.220\n#end\nno ip redirects\nno ip unreachables\nno ip proxy-arp\nshutdown\n#set ( $count = $count + 1)\n#end\n!\n#end\n!\nip ftp source-interface loopback0\nip tftp source-interface loopback0\nip http client source-interface loopback0\n!\n!-------OSPF--------------------------\n!\nrouter ospf 100\nrouter-id ${loopback0_IP}\nredistribute static subnets\nredistribute connected\npassive-interface default\nno passive-interface ${R1_Uplink_PORT}\n##no passive-interface ${R2_Uplink_PORT}\nnetwork 0.0.0.0 255.255.255.255 area 0\n!\nip ssh source-interface loopback0\nip ssh version 2\n!\nip http client source-interface loopback0\n!\nvtp domain ${LID}\nvtp mode transparent\n!\nerrdisable recovery cause udld\nerrdisable recovery cause bpduguard\nerrdisable recovery cause channel-misconfig\nerrdisable recovery cause link-flap\nerrdisable recovery cause psecure-violation\nerrdisable recovery cause port-mode-failure\nerrdisable recovery cause dhcp-rate-limit\nerrdisable recovery cause mac-limit\nerrdisable recovery cause inline-power\ndiagnostic bootup level minimal\n!\nspanning-tree mode rapid-pvst\nspanning-tree portfast bpduguard default\nspanning-tree extend system-id\nspanning-tree vlan 1-1024 priority 4096 \n!\n!---Uplinks MDF to IDF -------------------\n!\n#if($IDF_Access_Sw_PORT.toString().contains(","))\n#set ($IDFlist = $IDF_Access_Sw_PORT.split(\'\\,\'))\n\n#else\n#set ($IDFlist = $IDF_Access_Sw_PORT.split(\'\\ \'))\n#end\n\n#set ( $count = 0)\n#foreach ($IDFPORT in $IDFlist)\n#if ( $count != $IDFlist.size() )\n#set ( $IDF = $IDFlist.get($count) )\n#else \n#break\n#end\ninterface ${IDF}\ndescription *Access Switch*\nswitchport mode trunk\nspanning-tree bpduguard disable\nno lldp receive\nno lldp transmit\n#set ( $count = $count + 1)\n#end\n!\n!-------DHCP scope------------------------\n!\n#if ( $deploy_type_mgmt_vlan == "no shutdown" )\n#if ($VL1000_MGMT_DHCP_POOL_Net != "0.0.0.0" )\nip dhcp excluded-address ${Network-Mgmt_IP}\nip dhcp pool pnp_device_pool\nnetwork ${VL1000_MGMT_DHCP_POOL_Net} ${Network-Mgmt_Mask}\ndefault-router ${Network-Mgmt_IP}\noption 43 ascii "5A1D;B2;K4;I10.195.2.201;J80"\n!\npnp startup-vlan 1000\n!\n#end\n#end\n! ', 'rollbackTemplateContent': '', 'templateParams': [{'parameterName': 'Vlan_802_Dec_WLAN-Guest_IpSub_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 15, 'customOrder': 12, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '3cb6d605-94dd-47c3-abe3-9259fb81e032'}, {'parameterName': 'Vlan804_Dec_wlan-mprize_IpSub_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 17, 'customOrder': 14, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '02f2df08-63e0-4927-b13c-a1f378cfe863'}, {'parameterName': 'WLAN-Mgmt_IP', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 33, 'customOrder': 30, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'd449b059-c60f-4023-acef-541c2f69080a'}, {'parameterName': 'Vlan803_Dec_WLAN-Industrial_IpSub_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 16, 'customOrder': 13, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'b352dc88-f9ec-47fc-9ffa-88f837a8677d'}, {'parameterName': 'WLAN-Mprize_IP', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 31, 'customOrder': 28, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '956f2cdb-6b18-4ff3-a823-a6d7a3c6c8c5'}, {'parameterName': 'WLAN-Guest_IP', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 27, 'customOrder': 24, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'ce505e4b-0819-4c18-b6ab-f5972a2f7063'}, {'parameterName': 'WLAN_Eprize2_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 26, 'customOrder': 23, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '9d5ebfe7-33b5-4344-9fd3-efb30d02b8b5'}, {'parameterName': 'Voice_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 24, 'customOrder': 21, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '91507569-7c34-4864-991b-ceb1ee0f8e29'}, {'parameterName': 'Network-Mgmt_IP', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 21, 'customOrder': 18, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '196fa4fb-6352-4981-b787-bfc3e0f58e4a'}, {'parameterName': 'Network-Mgmt_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 22, 'customOrder': 19, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'e72d2bfc-1fd3-4a2e-a45c-0cd486a6f3ef'}, {'parameterName': 'loopback0_IP', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 2, 'customOrder': 2, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'c6ac7d0c-7239-404c-ab8e-c7ebeb9f715a'}, {'parameterName': 'data_vlan_mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 35, 'customOrder': 32, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'dd4f58ce-ab20-42e6-9c5b-83d43a83a2a2'}, {'parameterName': 'network-MGMT_IpSub_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 19, 'customOrder': 16, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'acdb72f9-0ecf-4d64-9558-f2975f2906e7'}, {'parameterName': 'data_vlanids', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 8, 'customOrder': 8, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '185c4146-5b0f-4531-9a48-9428633dde78'}, {'parameterName': 'IDFlist', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 42, 'customOrder': 0, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '157e9e0a-0357-4514-94ab-0aa5c7c3d7f4'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '83de74b9-850b-4b00-a108-499bfe4b4f53'}, {'parameterName': 'WLAN_Eprize2_IP', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 25, 'customOrder': 22, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'b244137c-ddee-449c-bed8-81c4d21a1cb6'}, {'parameterName': 'finalip2', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 37, 'customOrder': 0, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '090fb774-f368-4215-95ba-c9d04f02797f'}, {'parameterName': 'IDF_Access_Sw_PORT', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 41, 'customOrder': 35, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '94a1440f-e755-4849-94a7-ca9d5014decf'}, {'parameterName': 'masklist', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 36, 'customOrder': 0, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'f7715753-a120-4db0-bcf3-5b875870e027'}, {'parameterName': 'mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 38, 'customOrder': 0, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '349a3981-8266-418a-a801-a7c18bf8bd1d'}, {'parameterName': 'Voice_IP', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 23, 'customOrder': 20, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '3f720c77-b4f0-4e8f-9e99-fb1b23c34bc2'}, {'parameterName': 'R1_Uplink_PORT', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 3, 'customOrder': 3, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'fa26ccc3-a440-44bf-aaed-61b74d9dd50e'}, {'parameterName': 'Core_Wan_int_Point_To_Point_IP', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 4, 'customOrder': 4, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'a0f4e012-b357-459e-80e8-dbd895fd5ab1'}, {'parameterName': 'deploy_type_mgmt_vlan', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 20, 'customOrder': 17, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '5a7d6f59-48af-4ce1-93b1-e805c284bf0e'}, {'parameterName': 'Vlan_710_Voice_Des_IpSub_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 13, 'customOrder': 10, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'd43614cd-b00b-498b-9b9c-983b4e4d5001'}, {'parameterName': 'Vlan_805_Dec_wlan-mgmt_IpSub_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 18, 'customOrder': 15, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '4a89fdc5-fbbc-49b5-ae35-d09cccca4161'}, {'parameterName': 'hostname', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 1, 'customOrder': 1, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '3176a90a-d997-4968-99dc-0f521cb4da9b'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'f8b233f9-2ef1-4007-acf2-83832dc6ff1e'}, {'parameterName': 'iphelper', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 39, 'customOrder': 33, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'f60b3b1c-ef86-4c7b-98db-7fa55cd665c8'}, {'parameterName': 'vlans', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': False, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 10, 'customOrder': 0, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': 'c3de0162-e078-48da-a953-2acaae483083'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '940f51a7-1e0a-4d9d-8e17-bf07e4d196d1'}, {'parameterName': 'WLAN-Mprize_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 32, 'customOrder': 29, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '342dc552-1d23-47c3-9c39-eb672c1c1975'}, {'parameterName': 'iplist', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 11, 'customOrder': 0, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '3e7505b0-5d00-4937-861a-552bded8090a'}, {'parameterName': 'WLAN-Guest_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 28, 'customOrder': 25, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'a2ce9908-21f2-4478-9cd3-f4c588bfa1ef'}, {'parameterName': 'WLAN-Industrial_IP', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 29, 'customOrder': 26, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'cc410194-3346-454c-90ac-14b1933de41e'}, {'parameterName': 'R2_Uplink_PORT', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 7, 'customOrder': 7, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'e86a9847-5ccc-4657-af23-60480fdae8c0'}, {'parameterName': 'LID', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 40, 'customOrder': 34, 'selection': {'selectionType': None, 'selectionValues': {}, 'defaultSelectedValues': [], 'id': '967eb379-e6c9-43e3-9996-1da715ac0989'}, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '3a5084ea-763e-4372-8f32-9476570347ef'}, {'parameterName': 'WLAN-Industrial_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 30, 'customOrder': 27, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '0a11462b-5cdb-437d-a210-7c24d322528c'}, {'parameterName': 'IDF', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 43, 'customOrder': 0, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '1e38be32-dbae-45b6-8650-0b67b3e52ca6'}, {'parameterName': 'WLAN-Mgmt_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 34, 'customOrder': 31, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'f7f569ef-9e46-4615-9ba8-c149c609024b'}, {'parameterName': 'Vlan_801_WLAN-Dec_Eprize2_IpSub_Mask', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 14, 'customOrder': 11, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '31cf4eed-0a63-4e39-ba5d-1a3db38a2d37'}, {'parameterName': 'ip', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 12, 'customOrder': 0, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '8d93c328-7489-4d13-8969-c04c500d023d'}, {'parameterName': 'data_vlan_ipaddress', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 9, 'customOrder': 9, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'b9fb6fad-e770-4bdc-9ef2-72741e721ab4'}, {'parameterName': 'VL1000_MGMT_DHCP_POOL_Net', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 44, 'customOrder': 36, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '7feb6d98-3158-44d4-9ef5-8a007de66478'}, {'parameterName': 'Defualt_Route_ip', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 6, 'customOrder': 6, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': '6557aae4-293b-469e-9a6c-a3d9d8d794eb'}, {'parameterName': 'Core_Wan_int_Point_To_Point_MASK', 'dataType': 'STRING', 'defaultValue': None, 'description': None, 'required': True, 'notParam': False, 'paramArray': False, 'displayName': None, 'instructionText': None, 'group': None, 'order': 5, 'customOrder': 5, 'selection': None, 'range': [], 'key': None, 'provider': None, 'binding': '', 'id': 'd521da00-323c-4d9c-b057-77fb7d27c7b9'}], 'rollbackTemplateParams': [], 'composite': False, 'containingTemplates': [], 'language': 'VELOCITY', 'id': '7bcf85ac-6387-4e51-a858-3e4472c4c7a0', 'version': '3', 'customParamsOrder': False, 'createTime': 1594396453819, 'lastUpdateTime': 1615208654809, 'latestVersionTime': 1615208659199, 'projectName': 'Onboarding Configuration', 'projectId': 'e9658000-2088-453f-9941-0ab2277f149c', 'parentTemplateId': '1e3f224a-b232-497e-82ea-9404bd6a3300', 'validationErrors': {'templateErrors': [], 'rollbackTemplateErrors': [], 'templateId': '7bcf85ac-6387-4e51-a858-3e4472c4c7a0'}, 'projectAssociated': True, 'documentDatabase': False}
no service pad
service tcp-keepalives-in
service tcp-keepalives-out
service timestamps debug datetime show-timezone
service timestamps log datetime show-timezone
service password-encryption
service compress-config
no platform punt-keepalive disable-kernel-core
udld enable
!
hostname ${hostname}
!
vrf definition Mgmt-vrf
 !
 address-family ipv4
 exit-address-family
 !
 address-family ipv6
 exit-address-family
!
logging buffered 16384
logging console errors
!
!
!
no aaa new-model
!
!
!
no ip finger
!
lldp run
!
no ip source-route
ip routing
!
ip host tftp 135.89.201.98
ip name-server 10.192.2.45 10.216.2.51
ip domain name net.honeywell.com
!
no service udp-small-servers
no service tcp-small-servers
no ip bootp server
!
interface loopback0
ip address ${loopback0_IP} 255.255.255.255
no ip redirects
no ip unreachables
no ip proxy-arp
no shutdown
!
int vlan 1
no ip address
shutdown
!
interface ${R1_Uplink_PORT}
##switchport mode trunk
no sw
ip address ${Core_Wan_int_Point_To_Point_IP} ${Core_Wan_int_Point_To_Point_MASK}
##switchport trunk allowed vlan 1000,403
##switchport trunk native vlan 100
ip ospf network point-to-point
cts manual
policy static sgt 2 trusted
!
#if ($Defualt_Route_ip != '0.0.0.0')
ip route 0.0.0.0 0.0.0.0 ${Defualt_Route_ip} 200
#end
!
#if ($R2_Uplink_PORT != '0.0.0.0')
interface ${R2_Uplink_PORT}
description *R2_Uplink_PORT*
router ospf 100
no passive-interface ${R2_Uplink_PORT}
#end
!
!---Vlan Description---
!split vlan IDs list by either comma or backslash
!
#if($data_vlanids.toString().contains(","))
#set ($vlans = $data_vlanids.split('\,'))

#else
#set ($vlans = $data_vlanids.split('\ '))
#end

!split ip addresses list by either comma or backslash


#if($data_vlan_ipaddress.toString().contains(","))
#set ($iplist = $data_vlan_ipaddress.split('\,'))
#else
#set ($iplist = $data_vlan_ipaddress.split('\ '))
#end

#set ( $count = 0)
#foreach ($vlan in $vlans)
    #if ( $count != $iplist.size() )
        #set ( $ip = $iplist.get($count) )
    #else
        #break
    #end

vlan ${vlan}
name datavlan_${ip}
    #set ( $count = $count + 1)

#end
!
VLAN 710
name Voice_${Vlan_710_Voice_Des_IpSub_Mask}
!
vlan 801
name WLAN-Eprize2_${Vlan_801_WLAN-Dec_Eprize2_IpSub_Mask}
!
vlan 802
name WLAN-Guest_${Vlan_802_Dec_WLAN-Guest_IpSub_Mask}
!
vlan 803
name WLAN-Industrial_${Vlan803_Dec_WLAN-Industrial_IpSub_Mask}
!
vlan 804
name WLAN-Mprize_${Vlan804_Dec_wlan-mprize_IpSub_Mask}
!
vlan 805
name WLAN-Mgmt_${Vlan_805_Dec_wlan-mgmt_IpSub_Mask}
!
vlan 1000
name Network-Mgmt_${network-MGMT_IpSub_Mask}
!
#if ( $deploy_type_mgmt_vlan == "no shutdown" )
interface vlan1000
ip address ${Network-Mgmt_IP} ${Network-Mgmt_Mask}
no ip redirects
no ip unreachables
no ip proxy-arp
no shutdown
!
#if (($Voice_IP != "0.0.0.0") && ($Voice_Mask != "0.0.0.0"))
interface vlan710
ip address ${Voice_IP} ${Voice_Mask}
no shutdown
#end
!
#if (($WLAN_Eprize2_IP != "0.0.0.0") && ($WLAN_Eprize2_Mask != "0.0.0.0"))
interface vlan801
ip address ${WLAN_Eprize2_IP} ${WLAN_Eprize2_Mask}
no shutdown
#end
!
#if (($WLAN-Guest_IP != "0.0.0.0") && ($WLAN-Guest_Mask != "0.0.0.0"))
interface vlan802
ip address ${WLAN-Guest_IP} ${WLAN-Guest_Mask}
no shutdown
#end
!
#if (($WLAN-Industrial_IP != "0.0.0.0") && ($WLAN-Industrial_Mask != "0.0.0.0"))
interface vlan803
ip address ${WLAN-Industrial_IP} ${WLAN-Industrial_Mask}
no shutdown
#end
!
#if (($WLAN-Mprize_IP != "0.0.0.0") && ($WLAN-Mprize_Mask != "0.0.0.0"))
interface vlan804
ip address ${WLAN-Mprize_IP} ${WLAN-Mprize_Mask}
no shutdown
#end
!
#if (($WLAN-Mgmt_IP != "0.0.0.0") && ($WLAN-Mgmt_Mask != "0.0.0.0"))
interface vlan805
ip address ${WLAN-Mgmt_IP} ${WLAN-Mgmt_Mask}
no shutdown
#end
!
!--Interface vlans IP Filter--

#if($data_vlan_mask.toString().contains(","))
#set ($masklist = $data_vlan_mask.split('\,'))

#else
#set ($masklist = $data_vlan_mask.split('\ '))
#end

#set ( $count = 0)
#foreach ($vlan in $vlans)

#if ( $count != $iplist.size() )
#set ( $ip = $iplist.get($count) )
#set ( $mask = $masklist.get($count) )
#set ($finalip = $ip.split('\/'))
#set($finalip2 = $finalip.get(0))
#else
#break
#end
interface vlan ${vlan}
ip address ${finalip2} ${mask}
#if ( $iphelper == "US&CANALA" )
ip helper-address 10.192.14.225
ip helper-address 10.216.14.220
#end
#if ( $iphelper == "EMEA" )
ip helper-address 10.238.2.205
ip helper-address 10.216.14.225
#end
#if ( $iphelper == "APAC" )
ip helper-address 199.63.219.142
ip helper-address 10.192.14.220
#end
no ip redirects
no ip unreachables
no ip proxy-arp
no shutdown
#set ( $count = $count + 1)
#end
!
#else
interface vlan1000
ip address ${Network-Mgmt_IP} ${Network-Mgmt_Mask}
no ip redirects
no ip unreachables
no ip proxy-arp
shutdown
!
#if (($Voice_IP != "0.0.0.0") && ($Voice_Mask != "0.0.0.0"))
interface vlan710
ip address ${Voice_IP} ${Voice_Mask}
shutdown
#end
!
#if (($WLAN_Eprize2_IP != "0.0.0.0") && ($WLAN_Eprize2_Mask != "0.0.0.0"))
interface vlan801
ip address ${WLAN_Eprize2_IP} ${WLAN_Eprize2_Mask}
shutdown
#end
!
#if (($WLAN-Guest_IP != "0.0.0.0") && ($WLAN-Guest_Mask != "0.0.0.0"))
interface vlan802
ip address ${WLAN-Guest_IP} ${WLAN-Guest_Mask}
shutdown
#end
!
#if (($WLAN-Industrial_IP != "0.0.0.0") && ($WLAN-Industrial_Mask != "0.0.0.0"))
interface vlan803
ip address ${WLAN-Industrial_IP} ${WLAN-Industrial_Mask}
shutdown
#end
!
#if (($WLAN-Mprize_IP != "0.0.0.0") && ($WLAN-Mprize_Mask != "0.0.0.0"))
interface vlan804
ip address ${WLAN-Mprize_IP} ${WLAN-Mprize_Mask}
shutdown
#end
!
#if (($WLAN-Mgmt_IP != "0.0.0.0") && ($WLAN-Mgmt_Mask != "0.0.0.0"))
interface vlan805
ip address ${WLAN-Mgmt_IP} ${WLAN-Mgmt_Mask}
shutdown
#end
!--Interface vlans IP Filter--

#if($data_vlan_mask.toString().contains(","))
#set ($masklist = $data_vlan_mask.split('\,'))

#else
#set ($masklist = $data_vlan_mask.split('\ '))
#end

#set ( $count = 0)
#foreach ($vlan in $vlans)

#if ( $count != $iplist.size() )
#set ( $ip = $iplist.get($count) )
#set ( $mask = $masklist.get($count) )
#set ($finalip = $ip.split('\/'))
#set($finalip2 = $finalip.get(0))
#else
#break
#end
interface vlan ${vlan}
ip address ${finalip2} ${mask}
#if ( $iphelper == "US&CANALA" )
ip helper-address 10.192.14.225
ip helper-address 10.216.14.220
#end
#if ( $iphelper == "EMEA" )
ip helper-address 10.238.2.205
ip helper-address 10.216.14.225
#end
#if ( $iphelper == "APAC" )
ip helper-address 199.63.219.142
ip helper-address 10.192.14.220
#end
no ip redirects
no ip unreachables
no ip proxy-arp
shutdown
#set ( $count = $count + 1)
#end
!
#end
!
ip ftp source-interface loopback0
ip tftp source-interface loopback0
ip http client source-interface loopback0
!
!-------OSPF--------------------------
!
router ospf 100
router-id ${loopback0_IP}
redistribute static subnets
redistribute connected
passive-interface default
no passive-interface ${R1_Uplink_PORT}
##no passive-interface ${R2_Uplink_PORT}
network 0.0.0.0 255.255.255.255 area 0
!
ip ssh source-interface loopback0
ip ssh version 2
!
ip http client source-interface loopback0
!
vtp domain ${LID}
vtp mode transparent
!
errdisable recovery cause udld
errdisable recovery cause bpduguard
errdisable recovery cause channel-misconfig
errdisable recovery cause link-flap
errdisable recovery cause psecure-violation
errdisable recovery cause port-mode-failure
errdisable recovery cause dhcp-rate-limit
errdisable recovery cause mac-limit
errdisable recovery cause inline-power
diagnostic bootup level minimal
!
spanning-tree mode rapid-pvst
spanning-tree portfast bpduguard default
spanning-tree extend system-id
spanning-tree vlan 1-1024 priority 4096
!
!---Uplinks MDF to IDF -------------------
!
#if($IDF_Access_Sw_PORT.toString().contains(","))
#set ($IDFlist = $IDF_Access_Sw_PORT.split('\,'))

#else
#set ($IDFlist = $IDF_Access_Sw_PORT.split('\ '))
#end

#set ( $count = 0)
#foreach ($IDFPORT in $IDFlist)
#if ( $count != $IDFlist.size() )
#set ( $IDF = $IDFlist.get($count) )
#else
#break
#end
interface ${IDF}
description *Access Switch*
switchport mode trunk
spanning-tree bpduguard disable
no lldp receive
no lldp transmit
#set ( $count = $count + 1)
#end
!
!-------DHCP scope------------------------
!
#if ( $deploy_type_mgmt_vlan == "no shutdown" )
#if ($VL1000_MGMT_DHCP_POOL_Net != "0.0.0.0" )
ip dhcp excluded-address ${Network-Mgmt_IP}
ip dhcp pool pnp_device_pool
network ${VL1000_MGMT_DHCP_POOL_Net} ${Network-Mgmt_Mask}
default-router ${Network-Mgmt_IP}
option 43 ascii "5A1D;B2;K4;I10.195.2.201;J80"
!
pnp startup-vlan 1000
!
#end
#end
!

Required Parameters for template body: {"Vlan_802_Dec_WLAN-Guest_IpSub_Mask":"","Vlan804_Dec_wlan-mprize_IpSub_Mask":"","WLAN-Mgmt_IP":"","Vlan803_Dec_WLAN-Industrial_IpSub_Mask":"","WLAN-Mprize_IP":"","WLAN-Guest_IP":"","WLAN_Eprize2_Mask":"","Voice_Mask":"","Network-Mgmt_IP":"","Network-Mgmt_Mask":"","loopback0_IP":"","data_vlan_mask":"","network-MGMT_IpSub_Mask":"","data_vlanids":"","IDFlist":"","WLAN_Eprize2_IP":"","finalip2":"","IDF_Access_Sw_PORT":"","masklist":"","mask":"","Voice_IP":"","R1_Uplink_PORT":"","Core_Wan_int_Point_To_Point_IP":"","deploy_type_mgmt_vlan":"","Vlan_710_Voice_Des_IpSub_Mask":"","Vlan_805_Dec_wlan-mgmt_IpSub_Mask":"","hostname":"","iphelper":"","vlans":"","WLAN-Mprize_Mask":"","iplist":"","WLAN-Guest_Mask":"","WLAN-Industrial_IP":"","R2_Uplink_PORT":"","LID":"","WLAN-Industrial_Mask":"","IDF":"","WLAN-Mgmt_Mask":"","Vlan_801_WLAN-Dec_Eprize2_IpSub_Mask":"","ip":"","data_vlan_ipaddress":"","VL1000_MGMT_DHCP_POOL_Net":"","Defualt_Route_ip":"","Core_Wan_int_Point_To_Point_MASK":""}