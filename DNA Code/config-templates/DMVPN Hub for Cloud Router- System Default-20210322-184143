{
    "author": "SYSTEM",
    "composite": false,
    "containingTemplates": [],
    "createTime": 1613496379697,
    "customParamsOrder": false,
    "description": "Dynamic Multipoint VPN Hub for Cloud Router",
    "deviceTypes": [
        {
            "productFamily": "Routers",
            "productSeries": "Cisco Cloud Services Router 1000V Series"
        }
    ],
    "documentDatabase": false,
    "id": "82bbcace-774d-4571-83b0-2ed1f77f458d",
    "language": "VELOCITY",
    "lastUpdateTime": 1613496379697,
    "latestVersionTime": 1613496380031,
    "name": "DMVPN Hub for Cloud Router- System Default",
    "parentTemplateId": "82bbcace-774d-4571-83b0-2ed1f77f458d",
    "projectAssociated": true,
    "projectId": "cd0c1706-85d5-4397-aa6e-9f7966e56573",
    "projectName": "Onboarding Configuration",
    "rollbackTemplateParams": [],
    "softwareType": "IOS-XE",
    "softwareVariant": "XE",
    "tags": [
        {
            "id": "12833b4c-31d3-457a-9b6f-6fd0e572c68d",
            "name": "cloud-dmvpn-hub"
        }
    ],
    "templateContent": "!\nip vrf dmvpn\nrd $VrfDmvpnRouteDistinguisher\nroute-target export $VrfDmvpnRouteTarget\nroute-target import $VrfDmvpnRouteTarget\n!\n!--- Crypto Config ---\ncrypto keyring keyring-dmvpn\n  local-address GigabitEthernet1\n  pre-shared-key address 0.0.0.0 0.0.0.0 key cisco\n!\ncrypto isakmp policy 200\nencr aes\nauthentication pre-share\ngroup 2\nlifetime 28800\ncrypto isakmp keepalive 10 10\ncrypto isakmp profile dmvpn\n   keyring keyring-dmvpn\n   match identity address 0.0.0.0\n   local-address GigabitEthernet1\n!\ncrypto ipsec security-association replay window-size 1024\n!\ncrypto ipsec transform-set dmvpn esp-aes esp-sha-hmac\nmode transport\n!\ncrypto ipsec profile dmvpn-prof\nset transform-set dmvpn\n!\n!--- DMVPN Tunnel Config ---\ninterface Loopback77\nip vrf forwarding dmvpn\nip address $OspfRouterId 255.255.255.255\n!\n!-- Tunnel11 is used for ip route with DNACenter as below ---\n!ip route DNACIpAddress 255.255.255.255 Tunnel11\n!\ninterface Tunnel11\nip vrf forwarding dmvpn\nip address $TunnelIpAddress $TunnelSubnetMask\nno ip redirects\nip mtu $mtu\n#if ( $isStandby == \"0\" )\n  ip nhrp map multicast $ActiveCloudRouterPublicIP\n  ip nhrp map $ActiveCloudRouterTunnelIP $ActiveCloudRouterPublicIP\n#end\nip nhrp network-id $NetworkId\n#if ( $isStandby == \"0\" )\n  ip nhrp nhs $ActiveCloudRouterTunnelIP\n#end\nip tcp adjust-mss 1360\nbfd interval 100 min_rx 100 multiplier 3\ntunnel source GigabitEthernet1\ntunnel mode gre multipoint\ntunnel key $TunnelKey\ntunnel protection ipsec profile dmvpn-prof\n!\n!--- BGP Config ---\nrouter bgp $AutonomousSystemNumber\nbgp log-neighbor-changes\n!\naddress-family ipv4 vrf dmvpn\n  network $OspfRouterId mask 255.255.255.255\n  #if(${CloudRouterSubnet1})\n  network $CloudRouterSubnet1 mask $CloudRouterSubnetMask1\n  #end\n  #if(${CloudRouterSubnet2})\n  network $CloudRouterSubnet2 mask $CloudRouterSubnetMask2\n  #end\n  neighbor $BranchRouterTunnelIP remote-as $NeighborBgpASN\n  neighbor $BranchRouterTunnelIP fall-over bfd\n  neighbor $BranchRouterTunnelIP activate\nexit-address-family",
    "templateParams": [
        {
            "binding": "{\"provider\":\"CLOUDCONNECT\",\"attributeToDisplay\":null,\"variableName\":\"CloudRouterSubnet2\",\"params\":[{\"type\":\"PRIVATE_SUBNET2_IPADDRESS\",\"scope\":\"RUNTIME\",\"value\":null}],\"value\":null,\"source\":\"CloudConnect\",\"entity\":\"PrivateSubnet-2-IP\",\"attribute\":null}",
            "customOrder": 0,
            "dataType": "STRING",
            "defaultValue": null,
            "description": "Private Subnet 2",
            "displayName": "Private Subnet 2",
            "group": null,
            "id": "3c7b202a-be0b-4d37-87e7-61ad93af637f",
            "instructionText": "Private Subnet 2",
            "key": null,
            "notParam": false,
            "order": 9,
            "paramArray": false,
            "parameterName": "CloudRouterSubnet2",
            "provider": null,
            "range": [],
            "required": false,
            "selection": {
                "defaultSelectedValues": [],
                "id": "35937df3-01cd-4eae-8c71-cc547410f070",
                "selectionType": null,
                "selectionValues": {}
            }
        },
        {
            "binding": "",
            "customOrder": 0,
            "dataType": "IPADDRESS",
            "defaultValue": null,
            "description": "Tunnel IP of Active Cloud Router",
            "displayName": "Tunnel IP of Active Cloud Router",
            "group": null,
            "id": "a58502f1-ff88-4b13-9942-c6d45fce96df",
            "instructionText": "Tunnel IP of Active Cloud Router",
            "key": null,
            "notParam": false,
            "order": 5,
            "paramArray": false,
            "parameterName": "ActiveCloudRouterTunnelIP",
            "provider": null,
            "range": [],
            "required": true,
            "selection": {
                "defaultSelectedValues": [],
                "id": "41aab0e7-19a4-42ec-a961-70cf7071a8af",
                "selectionType": null,
                "selectionValues": {}
            }
        },
        {
            "binding": "",
            "customOrder": 0,
            "dataType": "INTEGER",
            "defaultValue": null,
            "description": "BGP Autonomous System Number",
            "displayName": "BGP Autonomous System Number",
            "group": null,
            "id": "77f9fd3a-0f87-4b74-b827-86a95cc38ba6",
            "instructionText": "64512",
            "key": null,
            "notParam": false,
            "order": 13,
            "paramArray": false,
            "parameterName": "AutonomousSystemNumber",
            "provider": null,
            "range": [],
            "required": true,
            "selection": {
                "defaultSelectedValues": [],
                "id": "9c2a0e43-31ce-46dd-9c41-2fd06b0dfadc",
                "selectionType": null,
                "selectionValues": {}
            }
        },
        {
            "binding": "",
            "customOrder": 0,
            "dataType": "IPADDRESS",
            "defaultValue": null,
            "description": "Tunnel IP",
            "displayName": "Tunnel IP",
            "group": null,
            "id": "619f4ac5-1ebc-4a51-bc04-97151f3d935c",
            "instructionText": "Tunnel IP",
            "key": null,
            "notParam": false,
            "order": 2,
            "paramArray": false,
            "parameterName": "TunnelIpAddress",
            "provider": null,
            "range": [],
            "required": true,
            "selection": {
                "defaultSelectedValues": [],
                "id": "02f52d1b-b4e0-446a-b7e7-330df1300c06",
                "selectionType": null,
                "selectionValues": {}
            }
        },
        {
            "binding": "",
            "customOrder": 0,
            "dataType": "IPADDRESS",
            "defaultValue": null,
            "description": "IP Address of BranchRouter Tunnel",
            "displayName": "IP Address of BranchRouter Tunnel",
            "group": null,
            "id": "6ae2534a-c5ea-4ccd-982d-5d5e527afce8",
            "instructionText": "IP Address of BranchRouter Tunnel",
            "key": null,
            "notParam": false,
            "order": 6,
            "paramArray": false,
            "parameterName": "BranchRouterTunnelIP",
            "provider": null,
            "range": [],
            "required": true,
            "selection": {
                "defaultSelectedValues": [],
                "id": "3b3c5553-478d-498b-9cb9-72d2f65b00d6",
                "selectionType": null,
                "selectionValues": {}
            }
        },
        {
            "binding": "",
            "customOrder": 0,
            "dataType": "IPADDRESS",
            "defaultValue": null,
            "description": "Tunnel Subnet Mask",
            "displayName": "Tunnel Subnet Mask",
            "group": null,
            "id": "53a1c0ce-0da0-4a5e-879f-0438083a74c3",
            "instructionText": "255.255.255.0",
            "key": null,
            "notParam": false,
            "order": 3,
            "paramArray": false,
            "parameterName": "TunnelSubnetMask",
            "provider": null,
            "range": [],
            "required": true,
            "selection": {
                "defaultSelectedValues": [],
                "id": "55db60e2-3107-4cc3-a32c-c3d13164a2b9",
                "selectionType": null,
                "selectionValues": {}
            }
        },
        {
            "binding": "",
            "customOrder": 0,
            "dataType": "STRING",
            "defaultValue": null,
            "description": "VRF DMVPN Route Target",
            "displayName": "VRF DMVPN Route Target",
            "group": null,
            "id": "839df399-7362-4322-adca-e001533b30dc",
            "instructionText": "64512:0",
            "key": null,
            "notParam": false,
            "order": 18,
            "paramArray": false,
            "parameterName": "VrfDmvpnRouteTarget",
            "provider": null,
            "range": [],
            "required": true,
            "selection": {
                "defaultSelectedValues": [],
                "id": "ca641144-e405-4134-9e60-5059a5e1322d",
                "selectionType": null,
                "selectionValues": {}
            }
        },
        {
            "binding": "{\"provider\":\"CLOUDCONNECT\",\"attributeToDisplay\":null,\"variableName\":\"CloudRouterPublicIP\",\"params\":[{\"type\":\"CLOUD_ROUTER1_IPADDRESS\",\"scope\":\"RUNTIME\",\"value\":null}],\"value\":null,\"source\":\"CloudConnect\",\"entity\":\"CloudRouter-1-Public-IP\",\"attribute\":null}",
            "customOrder": 0,
            "dataType": "STRING",
            "defaultValue": null,
            "description": "Public IP of Active Cloud Router",
            "displayName": "Public IP of Active Cloud Router",
            "group": null,
            "id": "61b85774-f0df-4480-99a8-1ff521add119",
            "instructionText": "Public IP of Active Cloud Router",
            "key": null,
            "notParam": false,
            "order": 4,
            "paramArray": false,
            "parameterName": "ActiveCloudRouterPublicIP",
            "provider": null,
            "range": [],
            "required": true,
            "selection": {
                "defaultSelectedValues": [],
                "id": "20f8f08f-6bbc-4291-ab70-9a49e8c317bb",
                "selectionType": null,
                "selectionValues": {}
            }
        },
        {
            "binding": "",
            "customOrder": 0,
            "dataType": "INTEGER",
            "defaultValue": null,
            "description": "Tunnel Key",
            "displayName": "Tunnel Key",
            "group": null,
            "id": "b94d8738-053f-4b18-b137-8644aebf73ae",
            "instructionText": "1",
            "key": null,
            "notParam": false,
            "order": 16,
            "paramArray": false,
            "parameterName": "TunnelKey",
            "provider": null,
            "range": [],
            "required": true,
            "selection": {
                "defaultSelectedValues": [],
                "id": "4911c5d8-0f38-4f6d-a70a-532a2601c239",
                "selectionType": null,
                "selectionValues": {}
            }
        },
        {
            "binding": "{\"provider\":\"CLOUDCONNECT\",\"attributeToDisplay\":null,\"variableName\":\"CloudRouterSubnetMask1\",\"params\":[{\"type\":\"PRIVATE_SUBNET1_MASK\",\"scope\":\"RUNTIME\",\"value\":null}],\"value\":null,\"source\":\"CloudConnect\",\"entity\":\"PrivateSubnet-1-IPMask\",\"attribute\":null}",
            "customOrder": 0,
            "dataType": "STRING",
            "defaultValue": null,
            "description": "Private Subnet Mask 1",
            "displayName": "Private Subnet Mask 1",
            "group": null,
            "id": "2e5b24bc-684d-4fc3-bf0b-7665db4b82a5",
            "instructionText": "255.255.255.0",
            "key": null,
            "notParam": false,
            "order": 8,
            "paramArray": false,
            "parameterName": "CloudRouterSubnetMask1",
            "provider": null,
            "range": [],
            "required": true,
            "selection": {
                "defaultSelectedValues": [],
                "id": "c1dc406b-659c-4f09-8d7a-6d78d5add33a",
                "selectionType": null,
                "selectionValues": {}
            }
        },
        {
            "binding": "",
            "customOrder": 0,
            "dataType": "STRING",
            "defaultValue": null,
            "description": "VRF DMVPN Route Distinguisher",
            "displayName": "VRF DMVPN Route Distinguisher",
            "group": null,
            "id": "efdd08af-9dd3-4137-9bef-5180a2f7defa",
            "instructionText": "64512:99",
            "key": null,
            "notParam": false,
            "order": 17,
            "paramArray": false,
            "parameterName": "VrfDmvpnRouteDistinguisher",
            "provider": null,
            "range": [],
            "required": true,
            "selection": {
                "defaultSelectedValues": [],
                "id": "f68383bc-030f-4540-a2a1-4a8e3a15d2a4",
                "selectionType": null,
                "selectionValues": {}
            }
        },
        {
            "binding": "",
            "customOrder": 0,
            "dataType": "STRING",
            "defaultValue": null,
            "description": "MTU for Tunnel",
            "displayName": "Maximum Transmission Unit (MTU) for Tunnel",
            "group": null,
            "id": "3dac9002-ab52-4a15-842f-2a2e852bd109",
            "instructionText": "1400",
            "key": null,
            "notParam": false,
            "order": 11,
            "paramArray": false,
            "parameterName": "mtu",
            "provider": null,
            "range": [],
            "required": true,
            "selection": {
                "defaultSelectedValues": [],
                "id": "a96b9e32-219d-4b11-9418-f66b5abdfd46",
                "selectionType": null,
                "selectionValues": {}
            }
        },
        {
            "binding": "{\"provider\":\"CLOUDCONNECT\",\"attributeToDisplay\":null,\"variableName\":\"CloudRouterSubnet1\",\"params\":[{\"type\":\"PRIVATE_SUBNET1_IPADDRESS\",\"scope\":\"RUNTIME\",\"value\":null}],\"value\":null,\"source\":\"CloudConnect\",\"entity\":\"PrivateSubnet-1-IP\",\"attribute\":null}",
            "customOrder": 0,
            "dataType": "STRING",
            "defaultValue": null,
            "description": "Private Subnet 1",
            "displayName": "Private Subnet 1",
            "group": null,
            "id": "404f61ba-af2d-4b17-8d4b-24abf0f0f216",
            "instructionText": "Private Subnet 1",
            "key": null,
            "notParam": false,
            "order": 7,
            "paramArray": false,
            "parameterName": "CloudRouterSubnet1",
            "provider": null,
            "range": [],
            "required": true,
            "selection": {
                "defaultSelectedValues": [],
                "id": "10423ddd-4739-4248-b1ee-b27c7c912126",
                "selectionType": null,
                "selectionValues": {}
            }
        },
        {
            "binding": "",
            "customOrder": 0,
            "dataType": "INTEGER",
            "defaultValue": null,
            "description": "Neighbor BGP Autonomous System Number",
            "displayName": "Neighbor BGP Autonomous System Number",
            "group": null,
            "id": "2a43ab57-0ce4-4b26-9ad8-96cbbe3d6280",
            "instructionText": "65001",
            "key": null,
            "notParam": false,
            "order": 14,
            "paramArray": false,
            "parameterName": "NeighborBgpASN",
            "provider": null,
            "range": [],
            "required": true,
            "selection": {
                "defaultSelectedValues": [],
                "id": "6e25a609-523d-4426-ae47-8b284871039e",
                "selectionType": null,
                "selectionValues": {}
            }
        },
        {
            "binding": "{\"provider\":\"CLOUDCONNECT\",\"attributeToDisplay\":null,\"variableName\":\"OspfRouterId\",\"params\":[{\"type\":\"CLOUD_ROUTER1_LOOPBACK_IPADDRESS\",\"scope\":\"RUNTIME\",\"value\":null}],\"value\":null,\"source\":\"CloudConnect\",\"entity\":\"CloudRouter-1-Loopback-IP\",\"attribute\":null}",
            "customOrder": 0,
            "dataType": "IPADDRESS",
            "defaultValue": null,
            "description": "OSPF Router ID in IP Address format (Unique Id per device)",
            "displayName": "OSPF Router ID in IP Address format (Unique Id per device)",
            "group": null,
            "id": "0f519213-534c-4e7c-8bca-d0b0ef3101b6",
            "instructionText": "7.7.7.7",
            "key": null,
            "notParam": false,
            "order": 12,
            "paramArray": false,
            "parameterName": "OspfRouterId",
            "provider": null,
            "range": [],
            "required": true,
            "selection": {
                "defaultSelectedValues": [],
                "id": "aadbedb2-80b2-420e-8eb5-1e3554848840",
                "selectionType": null,
                "selectionValues": {}
            }
        },
        {
            "binding": "",
            "customOrder": 0,
            "dataType": null,
            "defaultValue": "0",
            "description": null,
            "displayName": "StandBy / Active",
            "group": null,
            "id": "ceaaa01b-d99f-4be5-83fa-b9c80109b9fa",
            "instructionText": null,
            "key": null,
            "notParam": false,
            "order": 1,
            "paramArray": false,
            "parameterName": "isStandby",
            "provider": null,
            "range": [],
            "required": true,
            "selection": {
                "defaultSelectedValues": [],
                "id": "88ba2aff-54db-4b83-9580-2fe44bc37ab3",
                "selectionType": "SINGLE_SELECT",
                "selectionValues": {
                    "Active": "1",
                    "StandBy": "0"
                }
            }
        },
        {
            "binding": "{\"provider\":\"CLOUDCONNECT\",\"attributeToDisplay\":null,\"variableName\":\"CloudRouterSubnetMask2\",\"params\":[{\"type\":\"PRIVATE_SUBNET2_MASK\",\"scope\":\"RUNTIME\",\"value\":null}],\"value\":null,\"source\":\"CloudConnect\",\"entity\":\"PrivateSubnet-2-IPMask\",\"attribute\":null}",
            "customOrder": 0,
            "dataType": "STRING",
            "defaultValue": null,
            "description": "Private Subnet Mask 2",
            "displayName": "Private Subnet Mask 2",
            "group": null,
            "id": "b2713d84-342b-4eaa-8e74-a7ba14f63317",
            "instructionText": "255.255.255.0",
            "key": null,
            "notParam": false,
            "order": 10,
            "paramArray": false,
            "parameterName": "CloudRouterSubnetMask2",
            "provider": null,
            "range": [],
            "required": false,
            "selection": {
                "defaultSelectedValues": [],
                "id": "a6b8b4c6-cad8-4c39-a55b-7251e78beb71",
                "selectionType": null,
                "selectionValues": {}
            }
        },
        {
            "binding": "",
            "customOrder": 0,
            "dataType": "INTEGER",
            "defaultValue": null,
            "description": "Network Id",
            "displayName": "Network Id",
            "group": null,
            "id": "893be23e-29cb-4be5-a770-0ab679df1426",
            "instructionText": "1",
            "key": null,
            "notParam": false,
            "order": 15,
            "paramArray": false,
            "parameterName": "NetworkId",
            "provider": null,
            "range": [],
            "required": true,
            "selection": {
                "defaultSelectedValues": [],
                "id": "4a92ab66-dfac-413b-a718-57fc1ef6bc92",
                "selectionType": null,
                "selectionValues": {}
            }
        }
    ],
    "validationErrors": {
        "rollbackTemplateErrors": [],
        "templateErrors": [],
        "templateId": "82bbcace-774d-4571-83b0-2ed1f77f458d"
    }
}